{"generatedAt":1691506862897,"generateTime":131,"contents":[{"_path":"/articles/_dir","_dir":"articles","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"文章","_id":"content:articles:_dir.yml","_type":"yaml","_source":"content","_file":"articles/_dir.yml","_extension":"yml"},{"_path":"/articles/css/_dir","_dir":"css","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"Css","_id":"content:articles:css:_dir.yml","_type":"yaml","_source":"content","_file":"articles/css/_dir.yml","_extension":"yml"},{"_path":"/articles/css/bfcstackcascading","_dir":"css","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"BFC,层叠上下文,级联层","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"_1生成-bfcblock-formatting-context"},"children":[{"type":"text","value":"1、生成 BFC（Block Formatting Context)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根元素或包含根元素的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"float 的值不为 none"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"overflow 的值不为 visible 和 clip"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"display 的值为 inline-block、table-cell、table-caption"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"position 的值为 absolute 或 fixed"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"匿名表格单元格元素(由 display 为 table、table-row、 table-row-group、table-header-group、table-footer-group、inline-table 元素匿名生成的单元格元素)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"display 值为 flow-root 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"contain 值为 layout、paint, content 或 strict 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"弹性元素(display 为 flex 或 inline-flex 元素的直接子元素),但是其本身不是 flex, grid 或 table 类型的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"网格元素(display 为 grid 或 inline-grid 元素的直接子元素),但是其本身不是 flex, grid 或 table 类型的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多列容器(元素的 column-count 或 column-width 不为 auto，包括 column-count 为 1)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"column-span 为 all 的元素，即使该元素没有包裹在一个多列容器中"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中设置 display 为 flow-root 可以无副作用地触发 BFC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当一个元素触发了 BFC 外主要有以下的效果"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"元素可以包裹内部的浮动元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"和外部的浮动元素进行隔离"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"抑制外边距折叠"}]}]},{"type":"element","tag":"h2","props":{"id":"_2创建层叠上下文"},"children":[{"type":"text","value":"2、创建层叠上下文"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根元素 (HTML)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"z-index 值不为 \"auto\" 的 absolute 和 relative 定位(absolute 和 relative 定位中如果 z-index 为 auto 那么不会形成自身的层叠上下文)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"position: fixed or stick(适用于所有移动浏览器，但不适用于较旧的桌面浏览器)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个 z-index 值不为 \"auto\" 的 flex 项目 (flex item)，即：父元素 display: flex|inline-flex"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个 z-index 值不为 \"auto\" 的 grid 项目 (grid item)，即：父元素 display: grid|inline-grid"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"opacity 属性值小于 1 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"mix-blend-mode 属性值不为 \"normal\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"filter 值不为 \"none\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"transform 属性值不为 \"none\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"backdrop-filter 不为 \"none\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"perspective 值不为 \"none\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clip-path 的值不为 \"none\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"mask/mask-image/mask-border 不为 \"none\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"isolation 属性被设置为 \"isolate\" 的元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 will-change 中指定了一个属性,而且该属性其非初始值会创建一个层叠上下文。例如 transform 的初始值(Initial value)为 none,非初始值会创建层叠上下文,因此 will-change: transform 就会创建层叠上下文"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-webkit-overflow-scrolling 属性被设置 “touch”的元素 (控制元素在移动设备上是否使用滚动回弹效果,设置为 touch 时表明有滚动回弹效果)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"contain 值是 layout 或者是 paint,或者是包括他们的合成值,如 strict 和 content"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"offset-path 不为 \"none\" 的元素"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中设置 isolation: isolate 可以无副作用地创建层叠上下文"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"层叠上下文主要影响元素在互相堆叠时的显示顺序。如果出现堆叠顺序问题,可以考虑一下是否意外地创建了层叠上下文。而且需要注意层叠上下文是分层的,只有在同层下堆叠比较才有意义。"}]},{"type":"element","tag":"h2","props":{"id":"_3级联层顺序"},"children":[{"type":"text","value":"3、级联层顺序"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的用户代理样式,第一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的用户代理样式,最后一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的用户代理样式,没有声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的用户样式,第一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的用户样式,最后一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的用户样式,没有声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的开发者样式,第一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的开发者样式,最后一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的开发者样式,没有声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有设置 !important 的内联样式"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"animations"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的开发者样式,没有声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的开发者样式,最后一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的开发者样式,第一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的内联样式"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的用户样式,没有声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的用户样式,最后一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的用户样式,第一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的用户代理样式,没有声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的用户代理样式,最后一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有设置 !important 的用户代理样式,第一个声明层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"transitions"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"css(Cascading Style Sheets) 一般会翻译为层叠样式表,这里为了和上面的层叠上下文进行区分把 Cascading 翻译为级联。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在进行 css 属性的优先级对比时,需要用到权重计算,会采用权重高的属性值,但是权重计算是有一个前提的,就是在同一个级联层内计算才有意义。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n上面的列表就是由低到高的顺序排列了级联层,例如 animations 的层总是比没有设置 !important 层高,所以使用 animations 动画可以覆盖掉内联设置的样式。而为什么 !important 设置的样式容易被采用,因为是提升到比较高的层上。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在样式来源上可以分为用户代理样式,开发者样式,用户样式。像 div 标签的 display 属性,按照规范其初始值应该为 inline,但是使用时我们发现是 block 的,因为其 block 值是用户代理即浏览器设置的,这些设置就是用户代理样式。而开发者样式就是开发网站时写的样式。用户样式是浏览器允许用户上传的样式,不同的浏览器有不同的上传方法,这个知道即可。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在新的级联规范中,支持了使用 @layer 来声明层。例如"}]},{"type":"element","tag":"code","props":{"code":".alert {\n  background-color: green;\n}\n@layer module, state\n@layer state {\n  .alert {\n    background-color: brown;\n  }\n}\n@layer module {\n  .alert {\n    background-color: yellow;\n  }\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-b3da8e"},"children":[{"type":"text","value":".alert"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfb99e"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-e7efa0"},"children":[{"type":"text","value":"green"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-535c20"},"children":[{"type":"text","value":"@layer"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":" module, state\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"@layer state {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3da8e"},"children":[{"type":"text","value":".alert"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bfb99e"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-e7efa0"},"children":[{"type":"text","value":"brown"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-535c20"},"children":[{"type":"text","value":"@layer"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":" module {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3da8e"},"children":[{"type":"text","value":".alert"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bfb99e"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-e7efa0"},"children":[{"type":"text","value":"yellow"}]},{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-496755"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中 module 就是第一个声明层, state 是最后一个声明层,外部的没有使用 @layer 声明的为没有声明层。在没有添加 !important 的情况下,按照级联顺序,最终的结果是 green。如果都添加了 !important 那么最终的结果是 yellow。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n还有一点对于 animations,内部的样式声明添加 !important 是无效的。"}]},{"type":"element","tag":"h2","props":{"id":"参考链接"},"children":[{"type":"text","value":"参考链接"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context","rel":["nofollow"]},"children":[{"type":"text","value":"BFC"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context","rel":["nofollow"]},"children":[{"type":"text","value":"层叠上下文"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade#Origin_of_CSS_declarations","rel":["nofollow"]},"children":[{"type":"text","value":"级联"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-535c20{color:#C586C0}\n.ct-e7efa0{color:#CE9178}\n.ct-bfb99e{color:#9CDCFE}\n.ct-496755{color:#D4D4D4}\n.ct-b3da8e{color:#D7BA7D}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_1生成-bfcblock-formatting-context","depth":2,"text":"1、生成 BFC（Block Formatting Context)"},{"id":"_2创建层叠上下文","depth":2,"text":"2、创建层叠上下文"},{"id":"_3级联层顺序","depth":2,"text":"3、级联层顺序"},{"id":"参考链接","depth":2,"text":"参考链接"}]}},"_type":"markdown","_id":"content:articles:css:BFCStackCascading.md","_source":"content","_file":"articles/css/BFCStackCascading.md","_extension":"md"},{"_path":"/articles/css/csscenter","_dir":"css","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"css 各种居中方法总结","description":"","body":{"type":"root","children":[{"type":"element","tag":"h3","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在使用 css 设置页面样式时会经常遇到需要居中的情况,下面我总结了一些 css 在不同条件下实现居中的方法。有一些方法具有一些 hack 味道,大家看看就好。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n为了方便显示居中效果,给父元素和子元素都设置了边框和背景样式,由于效果都差不多,对于每一个方法我就不截图显示了,水平居中的大概实现是这样的\n"},{"type":"element","tag":"img","props":{"alt":"","src":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/704b013c08d044cb81652c3ffd6e4be5~tplv-k3u1fbpfcp-watermark.image"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"_1水平居中-block-子元素定宽-margin"},"children":[{"type":"text","value":"1、水平居中 + block 子元素定宽 + margin"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n  }\n\n  .child {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    width: 150px;\n    margin: 0 auto;\n  }\n</style>\n<div class=\"parent\">\n  <div class=\"child\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"150px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_2水平居中-inline-block-子元素不定宽-text-align"},"children":[{"type":"text","value":"2、水平居中 + inline-block 子元素不定宽 + text-align"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent2 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    text-align: center;\n  }\n\n  .child2 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    display: inline-block;\n  }\n</style>\n<div class=\"parent2\">\n  <div class=\"child2\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent2"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child2"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent2\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child2\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_3水平居中-inline-block-子元素定宽-text-align"},"children":[{"type":"text","value":"3、水平居中 + inline-block 子元素定宽 + text-align"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent3 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    text-align: center;\n  }\n\n  .child3 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    width: 150px;\n    display: inline-block;\n  }\n</style>\n<div class=\"parent3\">\n  <div class=\"child3\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent3"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child3"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"150px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent3\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child3\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_4水平居中-inline-子元素不定宽-text-align"},"children":[{"type":"text","value":"4、水平居中 + inline 子元素不定宽 + text-align"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"inline 类型的元素设置高宽是无效的,因此也没有定不定宽的说法,这里写上是为了看起来一致"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent4 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    text-align: center;\n  }\n\n  .child4 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    display: inline;\n  }\n</style>\n<div class=\"parent4\">\n  <div class=\"child4\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent4"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child4"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"inline"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent4\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child4\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_5水平垂直居中-flex-子元素不定宽高"},"children":[{"type":"text","value":"5、水平垂直居中 + flex + 子元素不定宽高"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent5 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .child5 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n  }\n</style>\n<div class=\"parent5\">\n  <div class=\"child5\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent5"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"flex"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"justify-content"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"align-items"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child5"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent5\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child5\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_6水平垂直居中-flex-子元素不定宽高-margin"},"children":[{"type":"text","value":"6、水平垂直居中 + flex + 子元素不定宽高 + margin"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent6 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    display: flex;\n  }\n\n  .child6 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    margin: auto;\n  }\n</style>\n<div class=\"parent6\">\n  <div class=\"child6\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent6"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"flex"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child6"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent6\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child6\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_7水平垂直居中-gird-子元素不定宽高"},"children":[{"type":"text","value":"7、水平垂直居中 + gird + 子元素不定宽高"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent7 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    display: grid;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .child7 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n  }\n</style>\n<div class=\"parent7\">\n  <div class=\"child7\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent7"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"grid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"justify-content"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"align-items"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child7"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent7\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child7\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_8水平垂直居中-gird-子元素不定宽高居中属性设置在子元素上"},"children":[{"type":"text","value":"8、水平垂直居中 + gird + 子元素不定宽高(居中属性设置在子元素上)"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent7-2 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    display: grid;\n  }\n\n  .child7-2 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    justify-self: center;\n    align-self: center;\n  }\n</style>\n<div class=\"parent7-2\">\n  <div class=\"child7-2\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent7-2"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"grid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child7-2"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"justify-self"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"align-self"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent7-2\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child7-2\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_9水平垂直居中-gird-子元素不定宽高-margin"},"children":[{"type":"text","value":"9、水平垂直居中 + gird + 子元素不定宽高 + margin"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent8 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    display: grid;\n  }\n\n  .child8 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    margin: auto;\n  }\n</style>\n<div class=\"parent8\">\n  <div class=\"child8\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent8"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"grid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child8"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent8\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child8\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_10水平垂直居中-absolute-子元素定宽高-margin"},"children":[{"type":"text","value":"10、水平垂直居中 + absolute + 子元素定宽高 + margin"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent9 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    position: relative;\n  }\n\n  .child9 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    margin: auto;\n    width: 150px;\n    height: 100px;\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n  }\n</style>\n<div class=\"parent9\">\n  <div class=\"child9\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent9"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"relative"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child9"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"150px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"100px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"absolute"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"left"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"right"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"bottom"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"top"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent9\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child9\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_11水平垂直居中-absolute-子元素不定宽高-margin"},"children":[{"type":"text","value":"11、水平垂直居中 + absolute + 子元素不定宽高 + margin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"fit-content 这属性具有兼容问题"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent10 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    position: relative;\n  }\n\n  .child10 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    margin: auto;\n    position: absolute;\n    width: fit-content;\n    height: fit-content;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n  }\n</style>\n<div class=\"parent10\">\n  <div class=\"child10\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent10"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"relative"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child10"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"absolute"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"fit-content"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"fit-content"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"left"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"right"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"bottom"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"top"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent10\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child10\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_12水平垂直居中-absolute-子元素不定宽高-transform"},"children":[{"type":"text","value":"12、水平垂直居中 + absolute + 子元素不定宽高 + transform"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent11 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    position: relative;\n  }\n\n  .child11 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    margin: auto;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n</style>\n<div class=\"parent11\">\n  <div class=\"child11\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent11"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"relative"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child11"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"absolute"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"left"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"top"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"translate"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"-50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"-50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent11\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child11\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_13水平垂直居中-table-cell-子元素不定宽高-text-align-vertical-align"},"children":[{"type":"text","value":"13、水平垂直居中 + table-cell + 子元素不定宽高 + text-align + vertical-align"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent12 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    /* width 设置百分比会失效,如果宽度不设置就由子元素的内容宽度决定 */\n    width: 1000px;\n    display: table-cell;\n    text-align: center;\n    vertical-align: middle;\n  }\n\n  .child12 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n  }\n</style>\n<div class=\"parent12\">\n  <div class=\"child12\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent12"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d5b3"},"children":[{"type":"text","value":"/* width 设置百分比会失效,如果宽度不设置就由子元素的内容宽度决定 */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1000px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"table-cell"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"vertical-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"middle"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child12"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent12\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child12\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_14水平垂直居中-inlineinline-block-子元素不定宽高-vertical-align"},"children":[{"type":"text","value":"14、水平垂直居中 + inline/inline-block 子元素不定宽高 + vertical-align"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent13 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    text-align: center;\n  }\n\n  .parent13::before {\n    content: '';\n    line-height: 200px;\n    font-size: 0;\n  }\n\n  .child13 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    /* display: inline-block; */\n    display: inline;\n    vertical-align: middle;\n  }\n</style>\n<div class=\"parent13\">\n  <div class=\"child13\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent13"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent13::before"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"line-height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child13"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d5b3"},"children":[{"type":"text","value":"/* display: inline-block; */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"inline"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"vertical-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"middle"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent13\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child13\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_15水平垂直居中-writing-mode-inlineinline-block-子元素不定宽高-text-align"},"children":[{"type":"text","value":"15、水平垂直居中 + writing-mode + inline/inline-block 子元素不定宽高 + text-align"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个方法受默认排版影响,也是有兼容问题的"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent15 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    height: 200px;\n    writing-mode: vertical-lr;\n    text-align: center;\n  }\n\n  .child15 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    writing-mode: horizontal-tb;\n    /* display: inline; */\n    display: inline-block;\n    width: 100%;\n  }\n</style>\n<div class=\"parent15\">\n  <div class=\"child15\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent15"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"writing-mode"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"vertical-lr"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child15"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"writing-mode"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"horizontal-tb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d5b3"},"children":[{"type":"text","value":"/* display: inline; */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent15\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child15\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_16水平垂直居中-水平垂直居中-block-子元素定宽-父元素高度由子元素决定-paddingmargin"},"children":[{"type":"text","value":"16、水平垂直居中 + 水平垂直居中 + block 子元素定宽 + 父元素高度由子元素决定 + padding/margin"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent16 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n  }\n\n  .child16 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    width: 150px;\n    /* margin: auto; */\n    /* padding: 50px 0; */\n    margin: 50px auto;\n  }\n</style>\n<div class=\"parent16\">\n  <div class=\"child16\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent16"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child16"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"150px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d5b3"},"children":[{"type":"text","value":"/* margin: auto; */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d5b3"},"children":[{"type":"text","value":"/* padding: 50px 0; */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent16\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child16\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_17水平垂直居中-子元素不定宽高-父元素高度由子元素决定-line-height"},"children":[{"type":"text","value":"17、水平垂直居中 + 子元素不定宽高 + 父元素高度由子元素决定 + line-height"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent17 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    text-align: center;\n  }\n\n  .child17 {\n    border: 1px solid #000;\n    background-color: chartreuse;\n    font-size: 32px;\n    /* display: inline-block; */\n    display: inline;\n    line-height: 200px;\n  }\n</style>\n<div class=\"parent17\">\n  <div class=\"child17\">children 子元素</div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent17"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child17"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d5b3"},"children":[{"type":"text","value":"/* display: inline-block; */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"inline"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"line-height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent17\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child17\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"children 子元素"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_18正方形十字居中"},"children":[{"type":"text","value":"18、正方形十字居中"}]},{"type":"element","tag":"code","props":{"code":"<style>\n  .parent18 {\n    border: 1px solid #000;\n    background-color: rgb(214, 120, 52);\n    width: 20%;\n    position: relative;\n  }\n  .parent18::before {\n    content: '';\n    display: block;\n    width: 0;\n    height: 0;\n    padding: 50% 0;\n  }\n\n  .child18::before,\n  .child18::after {\n    content: '';\n    display: block;\n    position: absolute;\n    background-color: chartreuse;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n  .child18::before {\n    width: 50%;\n    height: 5%;\n  }\n  .child18::after {\n    height: 50%;\n    width: 5%;\n  }\n</style>\n<div class=\"parent18\">\n  <div class=\"child18\"></div>\n</div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent18"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"214"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"120"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"20%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"relative"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".parent18::before"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"block"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"padding"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child18::before"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child18::after"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"block"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"absolute"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"chartreuse"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"left"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"top"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6029f8"},"children":[{"type":"text","value":"translate"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"-50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"-50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child18::before"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"5%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2623cf"},"children":[{"type":"text","value":".child18::after"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"50%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-768e52"},"children":[{"type":"text","value":"5%"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"parent18\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-03c720"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b5e62"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-144de6"},"children":[{"type":"text","value":"\"child18\""}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c6ce45"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-82de16"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主要总结了一些日常遇到的 css 居中方法,其中列举的方法也可以组合使用,如果你有其他居中例子,欢迎留言分享"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b8d5b3{color:#6A9955}\n.ct-6029f8{color:#DCDCAA}\n.ct-144de6{color:#CE9178}\n.ct-768e52{color:#B5CEA8}\n.ct-03c720{color:#9CDCFE}\n.ct-2623cf{color:#D7BA7D}\n.ct-4b5e62{color:#D4D4D4}\n.ct-c6ce45{color:#569CD6}\n.ct-82de16{color:#808080}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":3,"text":"前言"},{"id":"_1水平居中-block-子元素定宽-margin","depth":3,"text":"1、水平居中 + block 子元素定宽 + margin"},{"id":"_2水平居中-inline-block-子元素不定宽-text-align","depth":3,"text":"2、水平居中 + inline-block 子元素不定宽 + text-align"},{"id":"_3水平居中-inline-block-子元素定宽-text-align","depth":3,"text":"3、水平居中 + inline-block 子元素定宽 + text-align"},{"id":"_4水平居中-inline-子元素不定宽-text-align","depth":3,"text":"4、水平居中 + inline 子元素不定宽 + text-align"},{"id":"_5水平垂直居中-flex-子元素不定宽高","depth":3,"text":"5、水平垂直居中 + flex + 子元素不定宽高"},{"id":"_6水平垂直居中-flex-子元素不定宽高-margin","depth":3,"text":"6、水平垂直居中 + flex + 子元素不定宽高 + margin"},{"id":"_7水平垂直居中-gird-子元素不定宽高","depth":3,"text":"7、水平垂直居中 + gird + 子元素不定宽高"},{"id":"_8水平垂直居中-gird-子元素不定宽高居中属性设置在子元素上","depth":3,"text":"8、水平垂直居中 + gird + 子元素不定宽高(居中属性设置在子元素上)"},{"id":"_9水平垂直居中-gird-子元素不定宽高-margin","depth":3,"text":"9、水平垂直居中 + gird + 子元素不定宽高 + margin"},{"id":"_10水平垂直居中-absolute-子元素定宽高-margin","depth":3,"text":"10、水平垂直居中 + absolute + 子元素定宽高 + margin"},{"id":"_11水平垂直居中-absolute-子元素不定宽高-margin","depth":3,"text":"11、水平垂直居中 + absolute + 子元素不定宽高 + margin"},{"id":"_12水平垂直居中-absolute-子元素不定宽高-transform","depth":3,"text":"12、水平垂直居中 + absolute + 子元素不定宽高 + transform"},{"id":"_13水平垂直居中-table-cell-子元素不定宽高-text-align-vertical-align","depth":3,"text":"13、水平垂直居中 + table-cell + 子元素不定宽高 + text-align + vertical-align"},{"id":"_14水平垂直居中-inlineinline-block-子元素不定宽高-vertical-align","depth":3,"text":"14、水平垂直居中 + inline/inline-block 子元素不定宽高 + vertical-align"},{"id":"_15水平垂直居中-writing-mode-inlineinline-block-子元素不定宽高-text-align","depth":3,"text":"15、水平垂直居中 + writing-mode + inline/inline-block 子元素不定宽高 + text-align"},{"id":"_16水平垂直居中-水平垂直居中-block-子元素定宽-父元素高度由子元素决定-paddingmargin","depth":3,"text":"16、水平垂直居中 + 水平垂直居中 + block 子元素定宽 + 父元素高度由子元素决定 + padding/margin"},{"id":"_17水平垂直居中-子元素不定宽高-父元素高度由子元素决定-line-height","depth":3,"text":"17、水平垂直居中 + 子元素不定宽高 + 父元素高度由子元素决定 + line-height"},{"id":"_18正方形十字居中","depth":3,"text":"18、正方形十字居中"},{"id":"总结","depth":3,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:css:CSSCenter.md","_source":"content","_file":"articles/css/CSSCenter.md","_extension":"md"},{"_path":"/articles/css/csspropertyatrule","_dir":"css","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"纯 css 实现数字自增的动画效果","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最近在群里摸鱼时,讨论到 css houdini 能提供哪些能力,其中有一些能力还在规范中,有一些能力已经被部分浏览器支持了。我于是找到其中一个新增的 at-rule css 规则 @property,并且写了这个例子,看一下能提供哪些之前 css 可能无法实现的功能。文中提到的一些概念都可以在参考链接中获取更详细的信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"废话不多说,直接上代码"}]},{"type":"element","tag":"h2","props":{"id":"html"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"code","props":{"code":"<body>\n  <div class=\"box\"></div>\n  <div class=\"box item2\"></div>\n</body>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-667e62"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-667e62"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"\"box\""}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-667e62"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-667e62"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"\"box item2\""}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-667e62"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-667e62"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-adb688"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"css"},"children":[{"type":"text","value":"css"}]},{"type":"element","tag":"code","props":{"code":"body {\n  margin: 0;\n  min-height: 100vh;\n  display: flex;\n}\n.box {\n  width: 200px;\n  height: 200px;\n  border: 10px solid #000;\n  background-color: rebeccapurple;\n  margin: auto;\n  font-size: 100px;\n  color: rgb(255, 255, 255);\n  text-align: center;\n  line-height: 200px;\n  position: relative;\n  --step: 0;\n  counter-reset: count var(--step);\n  z-index: var(--step);\n  transition: --step 10s;\n}\n.box::before {\n  content: counter(count);\n}\n.box.item2::before {\n  content: counter(count, cjk-heavenly-stem);\n}\n.box:hover {\n  --step: 100;\n}\n@property --step {\n  syntax: '<integer>';\n  inherits: true;\n  initial-value: 0;\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6f944f"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"min-height"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"100vh"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"flex"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-6f944f"},"children":[{"type":"text","value":".box"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"10px"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"#000"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"rebeccapurple"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"100px"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"line-height"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"relative"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"--step"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"counter-reset"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": count "}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"--step"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"z-index"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"--step"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"transition"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": --step "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"10s"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-6f944f"},"children":[{"type":"text","value":".box::before"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"counter"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-6f944f"},"children":[{"type":"text","value":".box.item2::before"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"counter"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"cjk-heavenly-stem"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-6f944f"},"children":[{"type":"text","value":".box:hover"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"--step"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-ba7f29"},"children":[{"type":"text","value":"@property"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" --step {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  syntax: '<integer>';\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  inherits: true;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-667e62"},"children":[{"type":"text","value":"initial-value"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": 0;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"效果"},"children":[{"type":"text","value":"效果"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"动画.gif","src":"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22dc659c0494462883a6c9e69a33a70f~tplv-k3u1fbpfcp-watermark.image"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"思路"},"children":[{"type":"text","value":"思路"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于是使用纯 css 实现,第一步就是把 css 设置的信息显示出来,这里使用了 content 配合伪元素,很多时候我们使用到 content 时,可能只提供一个 <string> 类型值,但是还可以设置其他值,例如 attr(), count() 等类型。因为这里要做动画,选择 <string> 类型自然是无法实现的,在 content 的语法中,找到了 count() 函数,这个函数可以读取计数器的值,而计数器值类型是 <integer> 类型,该类型可以从 counter-reset 属性支持的语法中知道,其语法是 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":" <custom-ident> <integer>?"}]},{"type":"text","value":"+ | none。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在前面我提到了类型和语法,这个我们在学 css 时可能不太会注意的东西,但是在这里必须要说一下,因为在 @property 中要用到。我们设置任何一个 css 属性的属性值时,这些属性值都是由不同的数据类型的值组合而成,比如 width: 10px,其中 10px 就是 <length> 类型,但是我们知道 width: auto 也是可以的,如果我们查看 mdn 文档就可以发现 width 的语法是"}]},{"type":"element","tag":"code","props":{"code":"[ <length> | <percentage> ] && [ border-box | content-box ]? | available | min-content | max-content | fit-content | auto\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[ <length> | <percentage> ] && [ border-box | content-box ]? | available | min-content | max-content | fit-content | auto"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过该语法就可以知道 width 可以支持设置哪些属性值,如果要读懂这些语法,需要了解 css 的属性值定义语法和 css 数据类型,通过下面的链接可以获取更多这些信息。有时我们发现 css 要记的属性和属性值太多太杂了,但是只要了解数据类型和语法,记忆的东西就可以大大减少,因为很多的语法和类型都可以复用的。例如 <position> 类型就可以用到 background-position 和 object-position 属性上。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"现在回归正题,如果要实现动画,自然要让计数器的值发生变化,这里使用了 hover 悬停触发改变,当然可以是其他的触发方法。如果使用"}]},{"type":"element","tag":"code","props":{"code":".box:hover {\n  counter-reset: count 100;\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6f944f"},"children":[{"type":"text","value":".box:hover"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"counter-reset"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":": count "}]},{"type":"element","tag":"span","props":{"class":"ct-99469d"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"是无法让过渡动画生效的,要让动画生效,需要对应的数据类型支持插值。counter-reset 中只有 <integer> 部分支持插值,整体是不支持插值的,具体哪些能插哪些不能插可以查询 css 数据类型中对每一个数据类型的介绍。如果要实现部分变化,可以使用 var() 函数, var() 函数可以读取自定义属性的值,只要让自定义属性发生变化就可以了。如果对自定义属性不了解的可以查看下面的链接。自定义属性必须前面添加 --,并且是区分大小写的,在使用上支持 var() 进行读取,而其余行为和样式属性是类似的,比如一样受级联影响。在没有设置 @property 规则时,自定义属性是可继承的属性,允许自定义属性设置任何类型的值。所以当设置 --setp: 0 时,会认为该自定义属性不支持插值,如果从 js 角度去看自定义属性"}]},{"type":"element","tag":"code","props":{"code":"document.querySelector('.box').computedStyleMap().get('--step');\n// CSSUnparsedValue {0: \" 0\", length: 1}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"querySelector"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"'.box'"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"computedStyleMap"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"'--step'"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-19f656"},"children":[{"type":"text","value":"// CSSUnparsedValue {0: \" 0\", length: 1}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"会返回 CSSUnparsedValue 对象,该对象是 cssom 规范中提供的对象,字面解释就是一个没有被解析的值,自然也不支持插值。这里提到的 cssom 表示 CSS 对象模型,有点类似 DOM,允许通过 js 的方式来操作 CSS, css houdini 为我们暴露了更多的底层接口,这也是其能力的一个方面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"到目前为止,如果没有设置 @property 规则,动画依然是不支持的,经过我之前的描述,可能大家都知道 @property 作用了。@property 提供了我们控制自定义属性的能力,比如 syntax 是用来限制自定义属性支持的数据类型的,设置为可以插值类型 <integer> 后再次通过 js 读取自定义属性"}]},{"type":"element","tag":"code","props":{"code":"document.querySelector('.box').computedStyleMap().get('--step');\n// CSSUnitValue {value: 0, unit: \"number\"}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-d154d3"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"querySelector"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"'.box'"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"computedStyleMap"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-a7215c"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5fd359"},"children":[{"type":"text","value":"'--step'"}]},{"type":"element","tag":"span","props":{"class":"ct-277d03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-19f656"},"children":[{"type":"text","value":"// CSSUnitValue {value: 0, unit: \"number\"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"已经不是一个没有被解释的对象了。而 inherits 属性是控制该自定义属性是否可以继承。initial-value 就是在 var() 读取不到自定义属性值时采用的默认值。"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这是一个非常简单的例子,但通过这个例子可以发散出其他有意思的实现,比如实现渐变动画,布局动画等等。更重要的是这里实现的能力只是 css houdini 的冰山一角,而且 css houdini 在性能上是非常出色的,期待 css houdini 的发展。"}]},{"type":"element","tag":"h2","props":{"id":"参考链接"},"children":[{"type":"text","value":"参考链接"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/@property","rel":["nofollow"]},"children":[{"type":"text","value":"@property CSS at-rule "}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/Guide/Houdini","rel":["nofollow"]},"children":[{"type":"text","value":"CSS Houdini 介绍"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/content","rel":["nofollow"]},"children":[{"type":"text","value":"content 属性"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/counter-reset","rel":["nofollow"]},"children":[{"type":"text","value":"counter-reset 属性"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/Value_definition_syntax","rel":["nofollow"]},"children":[{"type":"text","value":"属性值定义语法"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Types","rel":["nofollow"]},"children":[{"type":"text","value":"css 数据类型"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties","rel":["nofollow"]},"children":[{"type":"text","value":"css 自定义属性"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-19f656{color:#6A9955}\n.ct-ba7f29{color:#C586C0}\n.ct-a7215c{color:#DCDCAA}\n.ct-99469d{color:#B5CEA8}\n.ct-6f944f{color:#D7BA7D}\n.ct-5fd359{color:#CE9178}\n.ct-d154d3{color:#9CDCFE}\n.ct-277d03{color:#D4D4D4}\n.ct-667e62{color:#569CD6}\n.ct-adb688{color:#808080}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"html","depth":2,"text":"html"},{"id":"css","depth":2,"text":"css"},{"id":"效果","depth":2,"text":"效果"},{"id":"思路","depth":2,"text":"思路"},{"id":"总结","depth":2,"text":"总结"},{"id":"参考链接","depth":2,"text":"参考链接"}]}},"_type":"markdown","_id":"content:articles:css:CSSPropertyAtRule.md","_source":"content","_file":"articles/css/CSSPropertyAtRule.md","_extension":"md"},{"_path":"/articles/javascript/_dir","_dir":"javascript","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"JavaScript","_id":"content:articles:javaScript:_dir.yml","_type":"yaml","_source":"content","_file":"articles/javaScript/_dir.yml","_extension":"yml"},{"_path":"/articles/javascript/asyncawaitscene","_dir":"javascript","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"async/await 异步应用的常用场景","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"async/await 语法用看起来像写同步代码的方式来优雅地处理异步操作,但是我们也要明白一点,异步操作本来带有复杂性,像写同步代码的方式并不能降低本质上的复杂性,所以在处理上我们要更加谨慎, 稍有不慎就可能写出不是预期执行的代码,从而影响执行效率。下面将简单地描述一下一些日常常用场景,加深对 async/await 认识"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最普遍的异步操作就是请求,我们也可以用 setTimeOut 来简单模拟异步请求。"}]},{"type":"element","tag":"h2","props":{"id":"场景-1-一个请求接着一个请求"},"children":[{"type":"text","value":"场景 1. 一个请求接着一个请求"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"相信这个场景是最常遇到,后一个请求依赖前一个请求,下面以爬取一个网页内的图片为例子进行描述,使用了 superagent 请求模块, cheerio 页面分析模块,图片的地址需要分析网页内容得出,所以必须按顺序进行请求。"}]},{"type":"element","tag":"code","props":{"code":"const request = require('superagent')\nconst cheerio = require('cheerio')\n// 简单封装下请求,其他的类似\n\nfunction getHTML(url) {\n// 一些操作,比如设置一下请求头信息\nreturn superagent.get(url).set('referer', referer).set('user-agent', userAgent)\n}\n// 下面就请求一张图片\nasync function imageCrawler(url) {\n  let res = await getHTML(url)\n  let html = res.text\n  let $ = cheerio.load(html)\n  let $img = $(selector)[0]\n  let href = $img.attribs.src\n  res = await getImage(href)\n  retrun res.body\n}\nasync function handler(url) {\n  let img = await imageCrawler(url)\n  console.log(img) // buffer 格式的数据\n  // 处理图片\n}\nhandler(url)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68fdbe"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'superagent'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68fdbe"},"children":[{"type":"text","value":"cheerio"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'cheerio'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// 简单封装下请求,其他的类似\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getHTML"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// 一些操作,比如设置一下请求头信息\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"superagent"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'referer'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"referer"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'user-agent'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"userAgent"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// 下面就请求一张图片\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"imageCrawler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getHTML"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"text\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"cheerio"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"$img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"selector"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")["}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"$img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"attribs"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"src\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"retrun"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"body\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"handler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"imageCrawler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// buffer 格式的数据\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// 处理图片\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"handler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面就是一个简单的获取图片数据的场景,图片数据是加载进内存中,如果只是简单的存储数据,可以用流的形式进行存储,以防止消耗太多内存。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中 await getHTML 是必须的,如果省略了 await 程序就不能按预期得到结果。执行流程会先执行 await 后面的表达式,其实际返回的是一个处于 pending 状态的 promise,等到这个 promise 处于已决议状态后才会执行 await 后面的操作,其中的代码执行会跳出 async 函数,继续执行函数外面的其他代码,所以并不会阻塞后续代码的执行。"}]},{"type":"element","tag":"h2","props":{"id":"场景-2并发请求"},"children":[{"type":"text","value":"场景 2.并发请求"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有的时候我们并不需要等待一个请求回来才发出另一个请求,这样效率是很低的,所以这个时候就需要并发执行请求任务。下面以一个查询为例,先获取一个人的学校地址和家庭住址,再由这些信息获取详细的个人信息,学校地址和家庭住址是没有依赖关系的,后面的获取个人信息依赖于两者"}]},{"type":"element","tag":"code","props":{"code":"async function infoCrawler(url, name) {\n  let [schoolAdr, homeAdr] = await Promise.all([getSchoolAdr(name), getHomeAdr(name)]);\n  let info = await getInfo(url + `?schoolAdr=${schoolAdr}&homeAdr=${homeAdr}`);\n  return info;\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"infoCrawler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"schoolAdr"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"homeAdr"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"all"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getSchoolAdr"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getHomeAdr"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getInfo"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"`?schoolAdr="}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"schoolAdr"}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"&homeAdr="}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"homeAdr"}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面使用的 Promise.all 里面的异步请求都会并发执行,并等到数据都准备后返回相应的按数据顺序返回的数组,这里最后处理获取信息的时间,由并发请求中最慢的请求决定,例如 getSchoolAdr 迟迟不返回数据,那么后续操作只能等待,就算 getHomeAdr 已经提前返回了,当然以上场景必须是这么做,但是有的时候我们并不需要这么做。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面第一个场景中,我们只获取到一张图片,但是可能一个网页中不止一张图片,如果我们要把这些图片存储起来,其实是没有必要等待图片都并发请求回来后再处理,哪张图片早回来就存储哪张就行了"}]},{"type":"element","tag":"code","props":{"code":"let imageUrls = ['href1', 'href2', 'href3'];\nasync function saveImages(imageUrls) {\n  await Promise.all(\n    imageUrls.map(async (imageUrl) => {\n      let img = await getImage(imageUrl);\n      return await saveImage(img);\n    })\n  );\n  console.log('done');\n}\n// 如果我们连存储是否全部完成也不关心,也可以这么写\nlet imageUrls = ['href1', 'href2', 'href3'];\n// saveImages() 连 async 都省了\nfunction saveImages(imageUrls) {\n  imageUrls.forEach(async (imageUrl) => {\n    let img = await getImage(imageUrl);\n    saveImage(img);\n  });\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'href1'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'href2'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'href3'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"saveImages"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"all"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"saveImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// 如果我们连存储是否全部完成也不关心,也可以这么写\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'href1'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'href2'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'href3'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// saveImages() 连 async 都省了\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"saveImages"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"imageUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"saveImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可能有人会疑问 forEach 不是不能用于异步吗,这个说法我也在刚接触这个语法的时候就听说过,很明显 forEach 是可以处理异步的,只是是并发处理,map 也是并发处理,这个怎么用主要看你的实际场景,还要看你是否对结果感兴趣"}]},{"type":"element","tag":"h2","props":{"id":"场景-3错误处理"},"children":[{"type":"text","value":"场景 3.错误处理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个请求发出,可以会遇到各种问题,我们是无法保证一定成功的,报错是常有的事,所以处理错误有时很有必要, async/await 处理错误也非常直观, 使用 try/catch 直接捕获就可以了"}]},{"type":"element","tag":"code","props":{"code":"async function imageCrawler(url) {\n  try {\n    let img = await getImage(url);\n    return img;\n  } catch (error) {\n    console.log(error);\n  }\n}\n// imageCrawler 返回的是一个 promise 可以这样处理\nasync function imageCrawler(url) {\n  let img = await getImage(url);\n  return img;\n}\nimageCrawler(url).catch((err) => {\n  console.log(err);\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"imageCrawler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// imageCrawler 返回的是一个 promise 可以这样处理\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"imageCrawler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"imageCrawler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可能有人会有疑问,是不是要在每个请求中都 try/catch 一下,这个其实你在最外层 catch 一下就可以了,一些基于中间件的设计就喜欢在最外层捕获错误"}]},{"type":"element","tag":"code","props":{"code":"async function ctx(next) {\n  try {\n    await next();\n  } catch (error) {\n    console.log(error);\n  }\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"ctx"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"场景-4-超时处理"},"children":[{"type":"text","value":"场景 4. 超时处理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个请求发出,我们是无法确定什么时候返回的,也总不能一直傻傻的等,设置超时处理有时是很有必要的"}]},{"type":"element","tag":"code","props":{"code":"function timeOut(delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      reject(new Error('不用等了,别傻了'));\n    }, delay);\n  });\n}\n\nasync function imageCrawler(url, delay) {\n  try {\n    let img = await Promise.race([getImage(url), timeOut(delay)]);\n    return img;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"timeOut"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'不用等了,别傻了'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    }, "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"imageCrawler"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"race"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"timeOut"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里使用 Promise.race 处理超时,要注意的是,如果超时了,请求还是没有终止的,只是不再进行后续处理。当然也不用担心,后续处理会报错而导致重新处理出错信息, 因为 promise 的状态一经改变是不会再改变的"}]},{"type":"element","tag":"h2","props":{"id":"场景-5-并发限制"},"children":[{"type":"text","value":"场景 5. 并发限制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在并发请求的场景中,如果需要大量并发,必须要进行并发限制,不然会被网站屏蔽或者造成进程崩溃"}]},{"type":"element","tag":"code","props":{"code":"async function getImages(urls, limit) {\n  let running = 0;\n  let r;\n  let p = new Promise((resolve, reject) => {\n    r = resolve;\n  });\n  function run() {\n    if (running < limit && urls.length > 0) {\n      running++;\n      let url = urls.shift();\n      (async () => {\n        let img = await getImage(url);\n        running--;\n        console.log(img);\n        if (urls.length === 0 && running === 0) {\n          console.log('done');\n          return r('done');\n        } else {\n          run();\n        }\n      })();\n      run(); // 立即到并发上限\n    }\n  }\n  run();\n  return await p;\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImages"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"urls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"limit"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"running"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"running"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" < "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"limit"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"urls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" > "}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"running"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"++;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"urls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"shift"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      ("}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"getImage"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"running"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"--;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"urls"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"running"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        } "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      })();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(); "}]},{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// 立即到并发上限\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上列举了一些日常场景处理的代码片段,在遇到比较复杂场景时,可以结合以上的场景进行组合使用,如果场景过于复杂,最好的办法是使用相关的异步代码控制库。如果想更好地了解 async/await 可以先去了解 promise 和 generator, async/await 基本上是 generator 函数的语法糖,下面简单的描述了一下内部的原理。"}]},{"type":"element","tag":"code","props":{"code":"function delay(time) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n        resolve(time)\n    }, time)\n  })\n}\nfunction *createTime() {\n  let time1 = yield delay(1000)\n  let time2 = yield delay(2000)\n  let time3 = yield delay(3000)\n  console.log(time1, time2, time3)\n}\nlet iterator = createTime()\nconsole.log(iterator.next())\nconsole.log(iterator.next(1000))\nconsole.log(iterator.next(2000))\nconsole.log(iterator.next(3000))\n// 输出\n\n{ value: Promise { <pending> }, done: false }\n\n{ value: Promise { <pending> }, done: false }\n\n{ value: Promise { <pending> }, done: false }\n\n1000 2000 3000\n\n{ value: undefined, done: true }\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    }, "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"createTime"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"createTime"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f1019"},"children":[{"type":"text","value":"// 输出\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"{ "}]},{"type":"element","tag":"span","props":{"class":"ct-53349d"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-c26627"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"pending"}]},{"type":"element","tag":"span","props":{"class":"ct-c26627"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" }, done: false }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" { <pending> }, "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"done"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" { <pending> }, "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"done"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"1000 2000 3000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"done"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以看出每个 value 都是 Promise,并且通过手动传入参数到 next 就可以设置生成器内部的值,这里是手动传入,我只要写一个递归函数让其自动添进去就可以了"}]},{"type":"element","tag":"code","props":{"code":"function run(createTime) {\n  let iterator = createTime();\n  let result = iterator.next();\n  function autoRun() {\n    if (!result.done) {\n      Promise.resolve(result.value)\n        .then((time) => {\n          result = iterator.next(time);\n          autoRun();\n        })\n        .catch((err) => {\n          result = iterator.throw(err);\n          autoRun();\n        });\n    }\n  }\n  autoRun();\n}\nrun(createTime);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"createTime"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"createTime"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"autoRun"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" (!"}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"done"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"autoRun"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"autoRun"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"autoRun"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"createTime"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"promise.resove 保证返回的是一个 promise 对象 可迭代对象除了有 next 方法还有 throw 方法用于往生成器内部传入错误,只要生成内部能捕获该对象,生成器就可以继承运行,类似下面的代码"}]},{"type":"element","tag":"code","props":{"code":"function delay(time) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (time == 2000) {\n        reject('2000错误');\n      }\n      resolve(time);\n    }, time);\n  });\n}\nfunction* createTime() {\n  let time1 = yield delay(1000);\n  let time2;\n  try {\n    time2 = yield delay(2000);\n  } catch (error) {\n    time2 = error;\n  }\n  let time3 = yield delay(3000);\n  console.log(time1, time2, time3);\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07319e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" == "}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'2000错误'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    }, "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"createTime"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以看出生成器函数其实和 async/await 语法长得很像,只要改一下 async/await 代码片段就是生成器函数了"}]},{"type":"element","tag":"code","props":{"code":"async function createTime() {\n  let time1 = await delay(1000);\n  let time2;\n  try {\n    time2 = await delay(2000);\n  } catch (error) {\n    time2 = error;\n  }\n  let time3 = await delay(3000);\n  console.log(time1, time2, time3);\n}\n\nfunction transform(async) {\n  let str = async.toString();\n  str = str.replace(/async\\s+(function)\\s+/, '$1 *').replace(/await/g, 'yield');\n  return str;\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"createTime"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"delay"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8c289e"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-09b521"},"children":[{"type":"text","value":"/async\\s"}]},{"type":"element","tag":"span","props":{"class":"ct-7493a7"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-09b521"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-09b521"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"class":"ct-7493a7"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-09b521"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'$1 *'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-09dbf0"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-09b521"},"children":[{"type":"text","value":"/await/"}]},{"type":"element","tag":"span","props":{"class":"ct-8b2df0"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9f6c21"},"children":[{"type":"text","value":"'yield'"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d9b5ef"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-495453"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-da2a40"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-7493a7{color:#D7BA7D}\n.ct-09b521{color:#D16969}\n.ct-c26627{color:#808080}\n.ct-53349d{color:#C8C8C8}\n.ct-07319e{color:#4EC9B0}\n.ct-8c289e{color:#B5CEA8}\n.ct-d9b5ef{color:#C586C0}\n.ct-495453{color:#9CDCFE}\n.ct-5f1019{color:#6A9955}\n.ct-9f6c21{color:#CE9178}\n.ct-09dbf0{color:#DCDCAA}\n.ct-68fdbe{color:#4FC1FF}\n.ct-da2a40{color:#D4D4D4}\n.ct-8b2df0{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"场景-1-一个请求接着一个请求","depth":2,"text":"场景 1. 一个请求接着一个请求"},{"id":"场景-2并发请求","depth":2,"text":"场景 2.并发请求"},{"id":"场景-3错误处理","depth":2,"text":"场景 3.错误处理"},{"id":"场景-4-超时处理","depth":2,"text":"场景 4. 超时处理"},{"id":"场景-5-并发限制","depth":2,"text":"场景 5. 并发限制"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:javaScript:AsyncAwaitScene.md","_source":"content","_file":"articles/javaScript/AsyncAwaitScene.md","_extension":"md"},{"_path":"/articles/javascript/curryandasync","_dir":"javascript","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"柯里化在异步编程的应用","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"柯里化"},"children":[{"type":"text","value":"柯里化"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"js 中函数作为一等公民,函数执行中既可以作为函数的参数也可以作为函数的返回值,而这类执行函数叫做高阶函数,利用高阶函数的特性很容易就可以实现柯里化("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"柯里化(Currying)是把接受多个参数的函数变换成接受一个单一参数(最初函数的第一个参数)的函数，并且返回接受余下的参数且返回结果的新函数的技术"}]},{"type":"text","value":"),根据百科的理解大概就是下面的例子。"}]},{"type":"element","tag":"code","props":{"code":"function add(x, y) {\n  return x + y;\n}\nfunction curryind_add(x) {\n  return function (y) {\n    return x + y;\n  };\n}\nconst curried_add = curryind_add(1);\ncurried_add(2); // 3\ncurried_add(3); // 4\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curryind_add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"curried_add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curryind_add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curried_add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curried_add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 4"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从例子可以看出,柯里化有防止参数重复的作用,而且具有延迟执行的特征。下面利用柯里化的特征看看在异步编程的应用,在开始时先简单介绍一下 async/await 的原理。"}]},{"type":"element","tag":"h2","props":{"id":"generator-和-promise"},"children":[{"type":"text","value":"Generator 和 promise"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"async/await 语法其实是 Generator 和 promise 的语法糖。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Generator 函数执行时会返回一个生成器对象,该对象是一个特殊的迭代器对象,而且本身也是一个可迭代对象("},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol","rel":["nofollow"]},"children":[{"type":"text","value":"迭代器对象和可迭代对象"}]},{"type":"text","value":"),下面说说其特殊性。"}]},{"type":"element","tag":"code","props":{"code":"function* generator() {\n  const value = yield 1;\n  console.log(value);\n  try {\n    // 捕获错误\n    yield 2;\n  } catch (e) {\n    console.log(e);\n  }\n}\nconst iterator = generator();\niterator === iterator[Symbol.iterator](); // true 自身部署了可迭代接口,该接口返回自身\n[...iterator]; // [1, 2]\n\nconst iterator2 = generator(); // 迭代器对象是一次消耗的,需要重新起一个迭代器\niterator2.next(); // {value: 1, done: false}\niterator2.next(`value 的值`); // 利用 next 向生成器函数发送数据\niterator2.throw(new Error('error')); // 利用 throw 向生成器函数抛出错误\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"generator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 捕获错误\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"generator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"Symbol"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"](); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// true 自身部署了可迭代接口,该接口返回自身\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"[..."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"]; "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// [1, 2]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"iterator2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"generator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 迭代器对象是一次消耗的,需要重新起一个迭代器\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// {value: 1, done: false}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ebc3f8"},"children":[{"type":"text","value":"`value 的值`"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 利用 next 向生成器函数发送数据\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ebc3f8"},"children":[{"type":"text","value":"'error'"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 利用 throw 向生成器函数抛出错误"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从上面的例子可以看出,生成器对象,在迭代的过程中是可以和生成器函数进行通信的,如果用在 promise 中,只要把 promise 在状态改变后执行的回调结果回传到生成器函数内就可以实现类似 async/await 的效果。而迭代过程,可以实现一个执行器函数进行迭代,这个函数就类似于执行 async。"}]},{"type":"element","tag":"code","props":{"code":"function createDelayPromise(time) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(time);\n    }, time);\n  });\n}\n\nfunction* createIterator() {\n  const time1 = yield createDelayPromise(1000);\n  console.log(time1);\n  const time2 = yield createDelayPromise(2000);\n  console.log(time2);\n  const time3 = yield createDelayPromise(3000);\n  console.log(time3);\n  return time1 + time2 + time3;\n}\n\nfunction run(createIterator) {\n  const iterator = createIterator();\n  let result = iterator.next();\n  let r;\n  const p = new Promise((resolve) => {\n    r = resolve;\n  });\n  function next() {\n    if (result.done) {\n      r(result.value);\n    } else {\n      Promise.resolve(result.value)\n        .then((value) => {\n          result = iterator.next(value);\n          next();\n        })\n        .catch((err) => {\n          result = iterator.throw(err);\n          next();\n        });\n    }\n  }\n  next();\n  return p;\n}\n\nrun(createIterator).then((value) => {\n  console.log(value);\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80dc97"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    }, "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80dc97"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"done"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-80dc97"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面使用 createDelayPromise 封装了一个 promise 类型的异步任务,然后使用 next 方法去迭代这个迭代器对象。等待对应的异步任务有结果后就通过生成器对象的 next 和 throw 方法把结果回传到生成器函数中。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n上面是使用 promise 配合 generator 可以让异步代码以类似同步的形式写在生成器函数中,同样地对应柯里化后的函数,同样具有延迟执行的效果,也可以通过配合 generator 实现类似的效果。"}]},{"type":"element","tag":"h2","props":{"id":"generator-和-柯里化"},"children":[{"type":"text","value":"Generator 和 柯里化"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了一些接口是实现了 promise 化外,有很多比较久的接口依然是使用 callback 类型的接口,像 node 中的很多接口会把 callback 参数放在参数列表的末尾,并把 err 放在回调执行的第一个位置,类似这样"}]},{"type":"element","tag":"code","props":{"code":"function createDelayCurry(time, callback) {\n  setTimeout(() => {\n    callback(null, time);\n  }, time);\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayCurry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  }, "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面通过实现不同以上的 run 方法,结合柯里化实现以上的效果,这次 yield 后面不再是 promise 化后的对象,而是柯里化后的函数"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在开始之前先实现一个通用的 curry 函数"}]},{"type":"element","tag":"code","props":{"code":"const curry = (fn, ...args) =>\n  fn.length <= args.length ? fn(...args) : curry.bind(null, fn, ...args);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ..."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" <= "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ? "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(..."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") : "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"curry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"bind"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ..."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个 curry 函数的作用是等初始存入的函数的参数收集够就执行,如果不够就继续收集,下面会在迭代中补上回调参数,这样异步任务才可以执行。"}]},{"type":"element","tag":"code","props":{"code":"const curry = (fn, ...args) =>\n  fn.length <= args.length ? fn(...args) : curry.bind(null, fn, ...args);\n\nfunction createDelayCurry(time, callback) {\n  setTimeout(() => {\n    callback(null, time);\n  }, time);\n}\n\nconst curringDelay = curry(createDelayCurry);\n\nfunction* createIterator() {\n  const time1 = yield curringDelay(1000);\n  console.log(time1);\n  const time2 = yield curringDelay(2000);\n  console.log(time2);\n  const time3 = yield curringDelay(3000);\n  console.log(time3);\n  return time1 + time2 + time3;\n}\n\nfunction run(createIterator, callback) {\n  const iterator = createIterator();\n  let result = iterator.next();\n  function next() {\n    if (result.done) {\n      callback(null, result.value);\n    } else {\n      result.value((err, value) => {\n        // 补上最后 callback 参数启动任务\n        if (err) {\n          result = iterator.throw(err);\n          next();\n        } else {\n          result = iterator.next(value);\n          next();\n        }\n      });\n    }\n  }\n  next();\n}\n\nrun(createIterator, (err, value) => {\n  console.log(err, value);\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ..."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" <= "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ? "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(..."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") : "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"curry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"bind"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ..."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayCurry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  }, "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"curringDelay"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"createDelayCurry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curringDelay"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curringDelay"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curringDelay"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"done"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 补上最后 callback 参数启动任务\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        } "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行效果和 promise 版是差不多一样的。"}]},{"type":"element","tag":"h2","props":{"id":"并行"},"children":[{"type":"text","value":"并行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面是串行的版本,下面看看并行的实现"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n先看 promise 并行一般写法"}]},{"type":"element","tag":"code","props":{"code":"function* createIteratorParallel() {\n  const times = yield Promise.all([\n    createDelayPromise(1000),\n    createDelayPromise(2000),\n    createDelayPromise(3000)\n  ]);\n  return times;\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createIteratorParallel"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"times"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80dc97"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"all"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  ]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"times"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"相应的也实现一个 all 方法"}]},{"type":"element","tag":"code","props":{"code":"function curryAll(curries, callback) {\n  let len = curries.length;\n  let result = [];\n  let count = 0;\n  curries.forEach((curried, index) => {\n    curried((err, value) => {\n      if (err) {\n        callback(err);\n        return;\n      } else {\n        count++;\n        result[index] = value;\n        if (count == len) {\n          callback(null, result);\n        }\n      }\n    });\n  });\n}\n\nconst curriedAll = curry(curryAll);\n\nfunction* createIteratorParallel() {\n  const times = yield curriedAll([curringDelay(1000), curringDelay(2000), curringDelay(3000)]);\n  return times;\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curryAll"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"curries"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"curries"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = [];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"curries"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"curried"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curried"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      } "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"++;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" == "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"curriedAll"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"curryAll"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createIteratorParallel"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"times"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curriedAll"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curringDelay"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curringDelay"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"curringDelay"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":")]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"times"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"yield 后面依然是柯里化后的函数"}]},{"type":"element","tag":"h2","props":{"id":"es-新语法"},"children":[{"type":"text","value":"es 新语法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的方案要求异步任务的回调需要在参数的末尾位置,如果回调不在末尾,那么就需要修改 curry 函数的实现方式,但是有没有可能不用修改其实现方式,甚至不用写 curry 呢?"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ncurry 作为函数式编程的基本单元,最新的 es 规范实验性地从语法的角度提供了支持。"}]},{"type":"element","tag":"code","props":{"code":"function add(x, y) {\n  return x + y;\n}\n\nconst addOne = add(1, ?); // apply from the left\naddOne(2); // 3\n\nconst addTen = add(?, 10); // apply from the right\naddTen(2); // 12\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"addOne"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ?); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// apply from the left\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"addOne"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"addTen"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"(?, "}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// apply from the right\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"addTen"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-d313f0"},"children":[{"type":"text","value":"// 12"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上的 addOne addTen 就是一个柯里化后的函数,这个语法大部分浏览器都没有支持,如果要使用也很简单,使用一个 babel 插件就可以了 "},{"type":"element","tag":"code-inline","props":{"lang":"sh","class":"colored"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"babel "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc3f8"},"children":[{"type":"text","value":"--plugins"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc3f8"},"children":[{"type":"text","value":"@babel/plugin-proposal-partial-application"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc3f8"},"children":[{"type":"text","value":"script.js"}]}]},{"type":"text","value":"\n如果使用了上面的语法,可以不用引入 curry 函数"}]},{"type":"element","tag":"code","props":{"code":"function* createIterator() {\n  const time1 = yield createDelayCurry(1000, ?);\n  console.log(time1);\n  const time2 = yield createDelayCurry(2000, ?);\n  console.log(time2);\n  const time3 = yield createDelayCurry(3000, ?);\n  console.log(time3);\n  return time1 + time2 + time3;\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createIterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-674ed3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2698c"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayCurry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ?);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8b029e"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"createDelayCurry"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5af8e8"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":", ?);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b24de6"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-65bdf6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5f236"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62dfe1"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c7cf27"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-564d64"},"children":[{"type":"text","value":"createDelayCurry"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7e3f55"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":", ?);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-62dfe1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-564d64"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-62dfe1"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-62dfe1"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62dfe1"},"children":[{"type":"text","value":"time1"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-62dfe1"},"children":[{"type":"text","value":"time2"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-62dfe1"},"children":[{"type":"text","value":"time3"}]},{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e734c0"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果 callback 在前面,那么就把问号放在前面,实际上可以放在任何参数位置上,主要看具体的接口要求。"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"柯里化的应用非常广泛,上面只是举了一个简单的例子,通过这个例子,也了解了 async/await 基本实现原理,虽然 async/await 已经被广泛支持,promise 也被广泛使用,可能不再需要直接使用生成器函数了,但也不妨碍去简单地了解一下。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ffcc2b{color:#4EC9B0}\n.ct-44d35a{color:#CE9178}\n.ct-546d38{color:#6A9955}\n.ct-7e3f55{color:#B5CEA8}\n.ct-20c1ab{color:#4FC1FF}\n.ct-c7cf27{color:#C586C0}\n.ct-62dfe1{color:#9CDCFE}\n.ct-564d64{color:#DCDCAA}\n.ct-f5f236{color:#D4D4D4}\n.ct-674ed3{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"柯里化","depth":2,"text":"柯里化"},{"id":"generator-和-promise","depth":2,"text":"Generator 和 promise"},{"id":"generator-和-柯里化","depth":2,"text":"Generator 和 柯里化"},{"id":"并行","depth":2,"text":"并行"},{"id":"es-新语法","depth":2,"text":"es 新语法"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:javaScript:CurryAndAsync.md","_source":"content","_file":"articles/javaScript/CurryAndAsync.md","_extension":"md"},{"_path":"/articles/javascript/floatingpointlossprecision","_dir":"javascript","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"js 浮点数存储精度丢失原理","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"曾几何时我们惊讶于在控制台看到这样的情况"}]},{"type":"element","tag":"code","props":{"code":"0.1 + 0.2 === 0.3\nfalse\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0.1 + 0.2 === 0.3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"false"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而我们也得出一个原因,因为精度丢失所致。下面我将一步一步地以最简单的 0.1 为例告诉你们精度为什么丢失,什么时候开始丢失的,这里没有深奥的公式,也没有晦涩的概念,只要你知道进制转换就能看懂了。"}]},{"type":"element","tag":"h2","props":{"id":"_01-在内存中的样子"},"children":[{"type":"text","value":"0.1 在内存中的样子"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有一点我们是知道的,js 中一般的数值是以 64 位浮点数存储在内存中的,也就是这 64 个二进制数字映射着一个具体的数字,具体是按照 IEEE754 这个标准来的,这个标准权衡了精度和表示范围,也就是如何有效利用这 64 个二进制数字的前提下提出的。下面的所有流程都是按这个标准来的,其中把 64 位划分出了 3 个区域"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"区域 S 符号位 用 1 位表示 0 表示正数 1 表示负数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"区域 E 指数位 用 11 位表示 有正负范围,临界值是 1023 后面看转换过程就能看明白"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"区域 M 尾数位 用 52 位表示"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"S + E + M 刚好就等于 64 位"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在开始前先看看 0.1 在内存中是长什么样子的"}]},{"type":"element","tag":"code","props":{"code":"let bytes = new Float64Array(1); // 64位浮点数\nbytes[0] = 0.1; // 填充 0.1 进去\nlet view = new DataView(bytes.buffer);\nconsole.log(view.getUint8(0).toString(2)); // 10011010\nconsole.log(view.getUint8(1).toString(2)); // 10011001\nconsole.log(view.getUint8(2).toString(2)); // 10011001\nconsole.log(view.getUint8(3).toString(2)); // 10011001\nconsole.log(view.getUint8(4).toString(2)); // 10011001\nconsole.log(view.getUint8(5).toString(2)); // 10011001\nconsole.log(view.getUint8(6).toString(2)); // 10111001\nconsole.log(view.getUint8(7).toString(2)); // 00111111 这里补齐了8位\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e012a6"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"bytes"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-e012a6"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"Float64Array"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 64位浮点数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"bytes"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 填充 0.1 进去\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e012a6"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-e012a6"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"DataView"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"bytes"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"buffer"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 10011010\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 10011001\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 10011001\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 10011001\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 10011001\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 10011001\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 10111001\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1ecc2f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"getUint8"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-1ab214"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a52385"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-728232"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-d1de6e"},"children":[{"type":"text","value":"// 00111111 这里补齐了8位"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里的 bytes.buffer 代表的就是一串内存空间,为了方便大家理解我使用\nDataView 用无符号 8 位的格式一个一个地读取内存的数据再转为二进制格式。\n由于读取内存的顺序会受字节序的影响,可能在你们的电脑打印得到相反的顺序\n如果按 SEM 的排列,那么其二进制就像下面这样子的"}]},{"type":"element","tag":"code","props":{"code":"s(0)E(01111111011)M(1001100110011001100110011001100110011001100110011010)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"s(0)E(01111111011)M(1001100110011001100110011001100110011001100110011010)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"现在已经知道了 0.1 在内存的样子,下面就开始说说具体的转化过程,也就是精度丢失的过程"}]},{"type":"element","tag":"h2","props":{"id":"_01-精度丢失过程"},"children":[{"type":"text","value":"0.1 精度丢失过程"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"转换为二进制"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在转换之前,首先看十进制小数要如何转化为二进制数小数的,这也是理解精度丢失十分关键的步骤,这个网上也有很多资料,我下面简单写一下流程。"}]}]},{"type":"element","tag":"code","props":{"code":"0.1 => 0.2 => 0.4 => 0.8 => 1.6 => 1.2 => 0.4 => 0.8 => 1.6 => 1.2 => 0.4 => 0.8 => 1.6 => 1.2 => 0.4 ..............\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0.1 => 0.2 => 0.4 => 0.8 => 1.6 => 1.2 => 0.4 => 0.8 => 1.6 => 1.2 => 0.4 => 0.8 => 1.6 => 1.2 => 0.4 .............."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"就是小数部分不断乘以 2,并取整数部分的值,直到小数部分为 0 为止,应该也是很好理解的,可以看出这样下去是一个无限循环的过程,转化后是这样子的"}]},{"type":"element","tag":"code","props":{"code":"0.00011001100110011001100110011001100110011001100110011001100110011001.....\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0.00011001100110011001100110011001100110011001100110011001100110011001....."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有限空间传入无限的数很明显是不可能,那么应该怎么做呢"}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"转换为二进制指数格式"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"转换为指数格式其实就是移动小数点,让小数点前面出现的是第一个为 1 的值,不同的二进制数据,可能是前移可能是右移,对应的是指数的正负范围,转换后是这样子的"}]}]},{"type":"element","tag":"code","props":{"code":"1.1001100110011001100110011001100110011001100110011001100110011001..... * 2 ^ -4\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1.1001100110011001100110011001100110011001100110011001100110011001..... * 2 ^ -4"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提取数据,进行数值截取,导致精度丢失"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"这里可以看到向右移动了 4 位,这个数据会保存在指数区域 E 内,在没有移位的情况下指数区域的值是 1023,向左移动几位就加几位,向右移动几位就减几位,所以这里是"}]}]},{"type":"element","tag":"code","props":{"code":"1023 - 4 = 1019\n1019 转二进制并补齐 11 位  01111111011\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1023 - 4 = 1019\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1019 转二进制并补齐 11 位  01111111011"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也就是 E 为 01111111011\n由于尾数位最多只有 52 位,所以小数点后面的 52 位全部提取到尾数位,其中要注意的是,类似四舍五入,如果末位后是 1 会产生进位,这里就产生了进位"}]},{"type":"element","tag":"code","props":{"code":"1001100110011001100110011001100110011001100110011001100110011001.....\n1001100110011001100110011001100110011001100110011001 100110011001.....\n进位后截取\n1001100110011001100110011001100110011001100110011010\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1001100110011001100110011001100110011001100110011001100110011001.....\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1001100110011001100110011001100110011001100110011001 100110011001.....\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"进位后截取\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1001100110011001100110011001100110011001100110011010"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也就是 M 为 1001100110011001100110011001100110011001100110011010"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里由于丢掉了部分数据,所以导致精度丢失"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于 0.1 是正数,所以 S 为 0"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"到此整个 js 浮点数存储过程就结束了,为了表示我不是忽悠大家的,大家可以对照第一部分输出的数据值。下面将顺便介绍一下怎么转回十进制"}]},{"type":"element","tag":"h2","props":{"id":"丢失精度的数据转回十进制"},"children":[{"type":"text","value":"丢失精度的数据转回十进制"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提取尾数位数据"}]}]},{"type":"element","tag":"code","props":{"code":"1001100110011001100110011001100110011001100110011010\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1001100110011001100110011001100110011001100110011010"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"先前添加 1. 恢复为指数格式 并提取指数位"}]}]},{"type":"element","tag":"code","props":{"code":"1.1001100110011001100110011001100110011001100110011010\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1.1001100110011001100110011001100110011001100110011010"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"01111111011 => 1019\n1019 - 1023 = -4\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"01111111011 => 1019\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1019 - 1023 = -4"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"1.1001100110011001100110011001100110011001100110011010 * 2 ^ -4\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1.1001100110011001100110011001100110011001100110011010 * 2 ^ -4"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"移位"}]}]},{"type":"element","tag":"code","props":{"code":"0.00011001100110011001100110011001100110011001100110011010\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0.00011001100110011001100110011001100110011001100110011010"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二进制转化为十进制\n小数的二进制转化为十进制网上的资料也有很多,我也简单介绍一下过程,以 0.0111 为例子"}]}]},{"type":"element","tag":"code","props":{"code":" 0.0111 小数点后一位 0 / 2^1   0\n        小数点后 2 位 1 / 2^2    0.25\n        小数点后 3 位 1 / 2^3    0.125\n        小数点后 4 位 1 / 2^4    0.0625\n        然后相加 0 + 0.25 + 0.125 + 0.0625 = 0.4375\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":" 0.0111 小数点后一位 0 / 2^1   0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        小数点后 2 位 1 / 2^2    0.25\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        小数点后 3 位 1 / 2^3    0.125\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        小数点后 4 位 1 / 2^4    0.0625\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        然后相加 0 + 0.25 + 0.125 + 0.0625 = 0.4375"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"按以上方法进行装换"}]},{"type":"element","tag":"code","props":{"code":"0.00011001100110011001100110011001100110011001100110011010 =>\n0.100000000000000005551\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0.00011001100110011001100110011001100110011001100110011010 =>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0.100000000000000005551"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于最后这个输出值其实也是不精确的，因为我就是用 js 计算的,如果大家有更准确的计算方法可以帮我算一下,精确的值末尾数应该是 5 才对。但是你试一下在控制台中计算下面的表达式"}]},{"type":"element","tag":"code","props":{"code":"0.1.toPrecision(21)\n\"0.100000000000000005551\"\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0.1.toPrecision(21)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\"0.100000000000000005551\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个也证明了上述的推理过程是正确的"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"相信到这里你已经知道为什么精度会丢失了,很多人都说 js 做浮点数计算很坑,其实也只是遵守标准而已,如果是坑的话,这个坑就不止是 js 了。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d1de6e{color:#6A9955}\n.ct-a52385{color:#B5CEA8}\n.ct-1ab214{color:#DCDCAA}\n.ct-1ecc2f{color:#9CDCFE}\n.ct-728232{color:#D4D4D4}\n.ct-e012a6{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"_01-在内存中的样子","depth":2,"text":"0.1 在内存中的样子"},{"id":"_01-精度丢失过程","depth":2,"text":"0.1 精度丢失过程"},{"id":"丢失精度的数据转回十进制","depth":2,"text":"丢失精度的数据转回十进制"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:javaScript:FloatingPointLossPrecision.md","_source":"content","_file":"articles/javaScript/FloatingPointLossPrecision.md","_extension":"md"},{"_path":"/articles/javascript/proxyandreflect","_dir":"javascript","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"es6 深入理解 Proxy 和 Reflect 这对影子兄弟","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vue3.0 使用了 Proxy 对象做响应式系统,让很多人都认识了 Proxy 对象,vue3.0 中的响应式数据甚至是组件实例,其实都是 Proxy 对象。但是这篇文章不是说 Proxy 对象在 vue3.0 是怎样发挥作用的,而是说说其影子兄弟 Reflect。既然是影子,自然是相映相随的。Reflect 中文解释可以是映射,也正好说明其设计初衷。简单来说 Proxy 对象代理并拦截目标对象特定行为,而这些行为都有其默认行为,而 Reflect 对象就是方便可以实现这些默认行为,Proxy 有多少拦截类型,Reflect 就实现了多少对应类型的映射函数("},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy","rel":["nofollow"]},"children":[{"type":"text","value":"Proxy 对象的拦截类型"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect","rel":["nofollow"]},"children":[{"type":"text","value":"Reflect 对象的映射 API"}]},{"type":"text","value":" 如果对这个两个对象还不是很了解,可以先看看上面链接中对这两个对象的介绍)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n可能你会想,我都知道默认行为了,自已实现不就可以了,为什么还需要 Reflect,为了说明这个问题,下文将针对 set 这个常用拦截类型去说明,如果不用 Reflect 去实现你将遇到多少问题,才能成功实现其默认行为。"}]},{"type":"element","tag":"h2","props":{"id":"存取器属性搭上-receiver-参数"},"children":[{"type":"text","value":"存取器属性搭上 receiver 参数"}]},{"type":"element","tag":"h3","props":{"id":"基础实现"},"children":[{"type":"text","value":"基础实现"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面先定义基础的代码"}]},{"type":"element","tag":"code","props":{"code":"const target = {\n  _name: '目标对象',\n  get name() {\n    return this._name;\n  },\n  set name(name) {\n    this._name = name;\n  },\n  age: 18\n};\nconst defaultProxy = new Proxy(target, {});\nconst customProxy = new Proxy(target, {\n  set(target, key, value, receiver) {\n    target[key] = value;\n  }\n});\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"_name:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'目标对象'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"存取器属性"},"children":[{"type":"text","value":"存取器属性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先看设置的 target 对象,也就是代理的目标对象,先看 name 属性,可以看到该属性前面有 get set 标识,这类属性叫存取器属性,在访问值和设置值时才会惰性执行对应的 getter setter 函数。\n每一个普通对象属性都有一个对应属性描述对象,下面是其属性描述符对象"}]},{"type":"element","tag":"code","props":{"code":"Object.getOwnPropertyDescriptor(target, 'name')\n{enumerable: true, configurable: true, get: ƒ, set: ƒ}\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"enumerable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"configurable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"ƒ"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"ƒ"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"age 属性是一个数据属性,其属性描述符对象是"}]},{"type":"element","tag":"code","props":{"code":"Object.getOwnPropertyDescriptor(target, 'age')\n{value: 18, writable: true, enumerable: true, configurable: true}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'age'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"writable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"enumerable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"configurable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果要让一个属性变为只读可以把数据属性的 writable 设置为 false,或者把存取器属性的 set 设置为 undefined,具体怎么设置属性的描述符对象下文会有提及,以上只是稍微说一下基础的知识,下面回归正题"}]},{"type":"element","tag":"h3","props":{"id":"触发-set-拦截的行为"},"children":[{"type":"text","value":"触发 set 拦截的行为"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"defaultProxy 是一个默认的代理对象,没有设置任何拦截行为,接着设置了一个 customProxy 对象并设置了 set 拦截行为,这个方法具有 4 个参数,比较有疑惑的可能是 receiver 参数,下面通过例子就可以知道该参数的作用了。set 方法内部的代码就是要实现 set 拦截的默认行为,如果不用 Reflect 对象,实现其默认行为要遇到多少问题,就是下面要详细说明的内容。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在开始前先根据文档列出了能触发 set 拦截行为的操作"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Property assignment: proxy"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"foo"}]},{"type":"text","value":" = bar and proxy.foo = bar"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Inherited property assignment: Object.create(proxy)"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"foo"}]},{"type":"text","value":" = bar 代理对象位于原型链上,在这种情况下拦截函数的 receiver 指向子类实例对象"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Reflect.set() 准确来说是 Reflect.set(proxy, key, value, receiver?) 注意第一个参数是代理对象不是目标对象,receiver 是可选值,不存在时指向第一个参数"}]}]},{"type":"element","tag":"h3","props":{"id":"基础实现的问题"},"children":[{"type":"text","value":"基础实现的问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先从最容易的实现开始"}]},{"type":"element","tag":"code","props":{"code":"target[key] = value;\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先看默认行为,这里是控制台输出"}]},{"type":"element","tag":"code","props":{"code":"defaultProxy.name = 'hello world';\n('hello world');\ntarget.name;\n('hello world');\ndefaultProxy.age = 3;\n3;\ntarget.age;\n3;\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"再看实现的默认行为"}]},{"type":"element","tag":"code","props":{"code":"customProxy.name = 'hello world';\n('hello world');\ncustomProxy.name;\n('hello world');\ncustomProxy.age = 3;\n3;\ncustomProxy.age;\n3;\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"看似都一样,是不是就已经成功了?下面我们把 set name 修改一下,让其读出 this"}]},{"type":"element","tag":"code","props":{"code":"set name(name) {\n  console.log(this)\n  this._name = name\n},\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"},"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaultProxy.name = 'hello world'"}]},{"type":"text","value":" this 的输出是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Proxy {_name: \"hello world\", age: 18}"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"customProxy.name = 'hello world'"}]},{"type":"text","value":" this 的输出是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{_name: \"目标对象\", age: 18}"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaultProxy.name = 'hello world'"}]},{"type":"text","value":" this 的输出是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Proxy {_name: \"hello world\", age: 18}"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Reflect.set(defaultProxy, 'name', 'hello world')"}]},{"type":"text","value":" this 的输出是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Proxy {_name: \"hello world\", age: 18}"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Reflect.set(defaultProxy, 'name', 'hello world', { a: 1})"}]},{"type":"text","value":" this 的输出是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{a: 1}"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Reflect.set(customProxy, 'name', 'hello world', { a: 1})"}]},{"type":"text","value":" this 的输出是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{_name: \"hello world\", age: 18}"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n可以看出使用 cunstomProxy 其 this 值总是指向目标对象,因为我们的实现就是简单的对象属性赋值,this 自然就指向目标对象。而默认行为中,this 是指向代理对象的,而通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Reflect.set(defaultProxy, 'name', 'hello world', { a: 1})"}]},{"type":"text","value":"可以看出 this 更严格来说是指向 receiver 参数,在没有传入时就取第一个参数的值。"}]},{"type":"element","tag":"h3","props":{"id":"修复存取器属性"},"children":[{"type":"text","value":"修复存取器属性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"很明显这里实现的默认行为是有问题的,针对这类问题可以修复为"}]},{"type":"element","tag":"code","props":{"code":"set(target, key, value, receiver) {\n  const descriptor = Object.getOwnPropertyDescriptor(target, key)\n  if(descriptor.hasOwnProperty('set')) {\n    const setter = descriptor.set\n    if(typeof setter === 'function' ) {\n      setter.call(receiver, value)\n    }\n  } else {\n    target[key] = value\n  }\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'set'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后按上面的测试方法,测试了一番,发现都满足默认行为了,但是到这步只解决了存取器属性的问题,还有数据属性的还没有解决,下面看看数据属性你会遇到什么问题。"}]},{"type":"element","tag":"h2","props":{"id":"隐匿的-defineproperty-陷阱拦截"},"children":[{"type":"text","value":"隐匿的 defineProperty 陷阱拦截"}]},{"type":"element","tag":"h3","props":{"id":"增加-defineproperty-拦截"},"children":[{"type":"text","value":"增加 defineProperty 拦截"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在开始介绍这个问题前,先增加默认代理对象和实现代理对象一个 defineProperty 拦截,由于是针对 set 拦截实现默认行为,为了不引入其他问题,直接就使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"return Reflect.defineProperty(target, property, descriptor)"}]},{"type":"text","value":" 实现 defineProperty 拦截的默认行为"}]},{"type":"element","tag":"code","props":{"code":"const defaultProxy = new Proxy(target, {\n  defineProperty(target, property, descriptor) {\n    console.log(`defaultProxy defineProperty 拦截触发`, target, property, descriptor);\n    return Reflect.defineProperty(target, property, descriptor);\n  }\n});\nconst customProxy = new Proxy(target, {\n  set(target, key, value, receiver) {\n    const descriptor = Object.getOwnPropertyDescriptor(target, key);\n    if (descriptor.hasOwnProperty('set')) {\n      const setter = descriptor.set;\n      if (typeof setter === 'function') {\n        setter.call(receiver, value);\n      }\n    } else {\n      target[key] = value;\n    }\n  },\n  defineProperty(target, property, descriptor) {\n    console.log(`cunstomProxy defineProperty 拦截触发`, target, property, descriptor);\n    return Reflect.defineProperty(target, property, descriptor);\n  }\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"`defaultProxy defineProperty 拦截触发`"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Reflect"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'set'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"`cunstomProxy defineProperty 拦截触发`"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Reflect"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"property"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"分析拦截逻辑"},"children":[{"type":"text","value":"分析拦截逻辑"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面执行默认行为"}]},{"type":"element","tag":"code","props":{"code":"defaultProxy.name = 'hello world'\nProxy {_name: \"目标对象\", age: 18}\ndefaultProxy defineProperty 拦截触发 {_name: \"目标对象\", age: 18} _name {value: \"hello world\"}\n\"hello world\"\ndefaultProxy.age = 3\ndefaultProxy defineProperty 拦截触发 {_name: \"hello world\", age: 18} age {value: 3}\n3\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"目标对象\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"拦截触发"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"目标对象\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hello world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"拦截触发"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面执行实现行为"}]},{"type":"element","tag":"code","props":{"code":"customProxy.name = 'hello world'\nProxy {_name: \"目标对象\", age: 18}\n\"hello world\"\ncustomProxy.age = 3\n3\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"目标对象\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hello world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以看出默认的代理行为在设置属性时会触发 defineProperty 拦截,而查看文档你会发现,触发 defineProperty 拦截的行为有"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Object.defineProperty()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Reflect.defineProperty()"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这里没有提到对象属性赋值也会触发 defineProperty 拦截,那这个触发行为应该是 set 默认行为所触发,如果要实现该默认行为也需要在 set 拦截中去实现。\n仔细分析以上的输出可以发现,触发 defineProperty 拦截的属性是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_name"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"age"}]},{"type":"text","value":",并没有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"name"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_name"}]},{"type":"text","value":" 是因为在设置 name 属性时在对应的 setter 函数执行时进行赋值的,从而执行对应的拦截函数,也就是在设置数据属性时会触发 defineProperty 拦截,而设置存取性属性时并不会触发 defineProperty 拦截。"}]}]},{"type":"element","tag":"h3","props":{"id":"修复数据属性"},"children":[{"type":"text","value":"修复数据属性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基于上面的分析,让 set 拦截触发 defineProperty 拦截"}]},{"type":"element","tag":"code","props":{"code":"set(target, key, value, receiver) {\n  const descriptor = Object.getOwnPropertyDescriptor(target, key)\n  if(descriptor.hasOwnProperty('set')) {\n    const setter = descriptor.set\n    if(typeof setter === 'function' ) {\n      setter.call(receiver, value)\n    }\n  } else {\n    Object.defineProperty(receiver, key, {\n      value: value\n    })\n  }\n},\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'set'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"},"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"再次运行测试"}]},{"type":"element","tag":"code","props":{"code":"customProxy.name = 'hello world'\nProxy {_name: \"目标对象\", age: 18}\ncunstomProxy defineProperty 拦截触发 {_name: \"目标对象\", age: 18} _name {value: \"hello world\"}\n\"hello world\"\ncustomProxy.age = 3\ncunstomProxy defineProperty 拦截触发 {_name: \"hello world\", age: 18} age {value: 3}\n3\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"目标对象\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"cunstomProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"拦截触发"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"目标对象\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hello world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"cunstomProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"拦截触发"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上的测试都是在修改已经存在的属性,如果增加属性, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object.getOwnPropertyDescriptor(target, key)"}]},{"type":"text","value":" 会返回 undefined,执行 hasOwnProperty 方法是会报错的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n当一个属性使用对象属性赋值的方式设置时,会默认设置为数据属性,而且是可枚举可配置和可写的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n而且还有一点 Object.defineProperty 这个方法设置属性时,如果属性是新属性,那些忽略设置的描述属性都默认为 false 或者是 undefined,如果是已经存在的属性,忽略设置的描述属性取原来的值,例如"}]},{"type":"element","tag":"code","props":{"code":"let o = {}\nObject.defineProperty(o, 'value', { value: '2'})\n{value: \"2\"}\nObject.getOwnPropertyDescriptor(o, 'value')\n{value: \"2\", writable: false, enumerable: false, configurable: false}\no.name = 'hh'\n\"hh\"\nObject.getOwnPropertyDescriptor(o, 'name')\n{value: \"hh\", writable: true, enumerable: true, configurable: true}configurable: trueenumerable: truevalue: \"hh\"writable: true__proto__: Object\nObject.defineProperty(o, 'name', { value: '3', enumerable: false})\n{value: \"2\", name: \"3\"}\nObject.getOwnPropertyDescriptor(o, 'name')\n{value: \"3\", writable: true, enumerable: false, configurable: true}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'value'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'2'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"2\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'value'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"2\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"writable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"enumerable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"configurable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hh'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hh\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hh\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"writable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"enumerable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"configurable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"configurable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"trueenumerable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"truevalue"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"hh\""}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"writable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"true__proto__"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'3'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"enumerable:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"2\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"3\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"3\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"writable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"enumerable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"configurable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基于这些要求重新修改 set 实现"}]},{"type":"element","tag":"code","props":{"code":"set(target, key, value, receiver) {\n  const descriptor = Object.getOwnPropertyDescriptor(target, key)\n  if(descriptor && descriptor.hasOwnProperty('set')) {\n    const setter = descriptor.set\n    if(typeof setter === 'function' ) {\n      setter.call(receiver, value)\n    }\n  } else {\n    Object.defineProperty(receiver, key, descriptor ? {\n      value: value, // 为保持和默认行为一致,不能修改 descriptor.value 后把 descriptor 返回\n    } : {\n      value: value,\n      writable: true,\n      enumerable: true,\n      configurable: true\n    })\n  }\n},\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'set'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ? {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 为保持和默认行为一致,不能修改 descriptor.value 后把 descriptor 返回\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    } : {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"writable:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"enumerable:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"configurable:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"},"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"defineproperty-拦截的作用"},"children":[{"type":"text","value":"defineProperty 拦截的作用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基于上面的实现,也实现了在代理对象作用原型对象时,把数据属性设置在子类实例身上。\n看下面的例子"}]},{"type":"element","tag":"code","props":{"code":"const children = Object.create(target);\nchildren.name = 'hello world';\nconsole.log(children.hasOwnProperty('name')); // false\nconsole.log(children.hasOwnProperty('_name')); // true\nchildren.age = 3;\nconsole.log(children.hasOwnProperty('age')); // true\nconsole.log(children.age); // 3\nconsole.log(target.age); // 18\n\nconst children2 = Object.create(defaultProxy);\nchildren.name = 'hello world';\nconsole.log(children.hasOwnProperty('name')); // false\nconsole.log(children.hasOwnProperty('_name')); // true\nchildren.age = 3;\nconsole.log(children.hasOwnProperty('age')); // true\nconsole.log(children.age); // 3\nconsole.log(target.age); // 18\n\nconst children3 = Object.create(customProxy);\nchildren.name = 'hello world';\nconsole.log(children.hasOwnProperty('name')); // false\nconsole.log(children.hasOwnProperty('_name')); // true\nchildren.age = 3;\nconsole.log(children.hasOwnProperty('age')); // true\nconsole.log(children.age); // 3\nconsole.log(target.age); // 18\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'_name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'age'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 18\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"children2"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'_name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'age'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 18\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"children3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'_name'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'age'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 18"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当代理对象在原型链上时,子类实例设置属性时,一样会触发代理的拦截行为,这个时候 receiver 参数的值表示的是子类实例,也就是这里的 children,如果 children 设置的属性是存取器属性默认会调用原型链对象中对应属性的 getter setter 函数,而并不会设置在 children 身上。如果是新属性或者是数据属性,那么会设置在自身身上,并不会修改原型链上的属性。如果不采用 defineProperty 进行设置,直接通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":" receiver[key] = value"}]},{"type":"text","value":" 来实现,就会出现无限递归。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n数据属性和存取器属性都修复了,还有什么问题吗"}]},{"type":"element","tag":"h2","props":{"id":"invariants"},"children":[{"type":"text","value":"Invariants"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你有看文档,你会发现每一个拦截操作中都有一个 Invariants,中文翻译为不变式。我的理解就是对拦截行为的限制,如果你的拦截行为超出了限制,就会报 TypeError"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n先来看看 set 拦截的限制"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Cannot change the value of a property to be different from the value of the corresponding target object property if the corresponding target object property is a non-writable, non-configurable data property.\n这条限制是针对数据属性的,如果设置的对象属性是非可配置和非可读的,那么拦截函数不能返回 true"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Cannot set the value of a property if the corresponding target object property is a non-configurable accessor property that has undefined as its [[Set]] attribute\n这条限制是针对存取器属性的,如果设置的对象属性是非可配置且 set 为 undefined,,那么拦截函数不能返回 true"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"In strict mode, a false return value from the set() handler will throw a TypeError exception.\n前两条都表明该属性如果是只读属性,就应该是不能修改的,最后一条就是在严格模式下如果返回 false 会触发报错"}]}]},{"type":"element","tag":"code","props":{"code":"const o = {};\nObject.defineProperty(o, 'level', {\n  value: 5 // 没有设置的描述属性均为 false\n});\nObject.defineProperty(o, 'grade', {\n  set: undefined // 没有设置的描述属性均为 false, get 为 undefined\n});\nconst proxy = new Proxy(o, {\n  set() {\n    return true; // 强行认为可以修改,就会触发拦截行为限制错误\n  }\n});\n// proxy.level = 666 // Uncaught TypeError: 'set' on proxy: trap returned truish for property 'level' which exists in the proxy target as a non-configurable and non-writable data property with a different value\n// proxy.grade = 666 // Uncaught TypeError: 'set' on proxy: trap returned truish for property 'grade' which exists in the proxy target as a non-configurable and non-writable accessor property without a setter\n\nvoid (function () {\n  'use strict';\n  const proxy2 = new Proxy(o, {\n    set() {\n      return false;\n    }\n  });\n  proxy2.a = 1;\n  console.log(o); // Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'a'\n})();\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = {};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'level'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 没有设置的描述属性均为 false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'grade'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 没有设置的描述属性均为 false, get 为 undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 强行认为可以修改,就会触发拦截行为限制错误\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// proxy.level = 666 // Uncaught TypeError: 'set' on proxy: trap returned truish for property 'level' which exists in the proxy target as a non-configurable and non-writable data property with a different value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// proxy.grade = 666 // Uncaught TypeError: 'set' on proxy: trap returned truish for property 'grade' which exists in the proxy target as a non-configurable and non-writable accessor property without a setter\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'use strict'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"proxy2"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"proxy2"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'a'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"})();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果要正确触发这类默认行为,那么在实现中需要正确 return 设置是否成功的信息,这里可能有点难理解,可以看看这个例子"}]},{"type":"element","tag":"code","props":{"code":"const o = {};\nObject.defineProperty(o, 'level', {\n  value: 5 // 没有设置的描述属性均为 false\n});\nconst proxy = new Proxy(o, {});\nproxy.level = 6;\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = {};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'level'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 没有设置的描述属性均为 false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"o"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"level"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个并不会报错,因为默认行为知道了这个是不能设置的,因此默认拦截函数就返回了 false,因此你如果要实现默认行为,也需要返回一个正确设置与否的信息。不能设置就应该返回 false,可以设置就应该返回 true。"}]},{"type":"element","tag":"h3","props":{"id":"返回设置信息"},"children":[{"type":"text","value":"返回设置信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基于这点我们再来看看有返回时的实现"}]},{"type":"element","tag":"code","props":{"code":"set(target, key, value, receiver) {\nconst descriptor = Object.getOwnPropertyDescriptor(target, key)\nif (typeof descriptor === 'object') {\n  if(descriptor.configurable === 'false' && (descriptor.writable === 'false' || descriptor.set === 'undefined')) {\n    return false\n  }\n}\nif(descriptor && descriptor.hasOwnProperty('set')) {\n  const setter = descriptor.set\n  if(typeof setter === 'function' ) {\n    setter.call(receiver, value)\n    return true\n  }\n} else {\n  Object.defineProperty(receiver, key, descriptor ? {\n  value: value, // 为保持和默认行为一致,不能修改 descriptor.value 后把 descriptor 返回\n  } : {\n    value: value,\n    writable: true,\n    enumerable: true,\n    configurable: true\n  })\n  return true\n}\n},\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"getOwnPropertyDescriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'object'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"configurable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'false'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" && ("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"writable"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'false'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" || "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'undefined'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'set'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51f61d"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"set\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"setter"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"descriptor"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ? {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// 为保持和默认行为一致,不能修改 descriptor.value 后把 descriptor 返回\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  } : {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"writable:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"enumerable:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"configurable:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"},"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面测试一下"}]},{"type":"element","tag":"code","props":{"code":"Object.defineProperty(target, 'level', {\n  value: 5\n});\nvoid (function () {\n  'use strict';\n  defaultProxy.level = 6; //Uncaught TypeError: Cannot assign to read only property 'level' of object '[object Object]'\n})();\nvoid (function () {\n  'use strict';\n  customProxy.level = 6; // Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'level'\n})();\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'level'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"5\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'use strict'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"level"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"//Uncaught TypeError: Cannot assign to read only property 'level' of object '[object Object]'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"})();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'use strict'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"customProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"level"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-a4d1ca"},"children":[{"type":"text","value":"// Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'level'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"})();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"虽然都按期望那样报错了,但是报错的内容不同,很明显默认行为还执行了其他的操作。"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后,其实还是没有实现 set 的真实默认行为,但是通过这个例子,也可以清楚了解到,要模拟真实的默认拦截行为是很复杂的,而 Reflect 设计出来就是为了解决这样的难题。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n下面就是正确的实现"}]},{"type":"element","tag":"code","props":{"code":"set(target, key, value, receiver) {\n  return Reflect.set(target, key, value, receiver)\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-349ae0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Reflect"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"receiver"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果使用了拦截函数,并需要执行默认行为,如果要保持代码的健壮性,传入的参数都需要全部传入到 Reflect 对象内,如果漏掉 receiver, receiver 会被当做第一个参数,这样就不会触发 defineProperty 拦截,这个就违背了默认行为"}]},{"type":"element","tag":"code","props":{"code":"Reflect.set(target, 'age', 3)\ntrue\nReflect.set(target, 'age', 3, defaultProxy)\ndefaultProxy defineProperty 拦截触发 {_name: \"目标对象\", age: 3} age {value: 3}\ntrue\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Reflect"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'age'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"Reflect"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3fcd78"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"'age'"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defaultProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"拦截触发"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6de3d4"},"children":[{"type":"text","value":"\"目标对象\""}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-6082a2"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-4472c1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c27d2f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-17f48a"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1c35"},"children":[{"type":"text","value":"true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还需要注意的是需要 return 该返回值,不然不会正确触发 Invariants 的限制行为"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里举的是 set 拦截的例子,其他的拦截例子,如果需要调用默认行为也都是同样的操作,注意两点"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Reflect 中传入全部参数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"return Reflect 的执行结果"}]}]},{"type":"element","tag":"h2","props":{"id":"参考"},"children":[{"type":"text","value":"参考"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set","rel":["nofollow"]},"children":[{"type":"text","value":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set","rel":["nofollow"]},"children":[{"type":"text","value":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a4d1ca{color:#6A9955}\n.ct-4472c1{color:#C8C8C8}\n.ct-c27d2f{color:#B5CEA8}\n.ct-349ae0{color:#C586C0}\n.ct-3fcd78{color:#DCDCAA}\n.ct-6de3d4{color:#CE9178}\n.ct-6082a2{color:#9CDCFE}\n.ct-51f61d{color:#4FC1FF}\n.ct-17f48a{color:#D4D4D4}\n.ct-ea1c35{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"存取器属性搭上-receiver-参数","depth":2,"text":"存取器属性搭上 receiver 参数","children":[{"id":"基础实现","depth":3,"text":"基础实现"},{"id":"存取器属性","depth":3,"text":"存取器属性"},{"id":"触发-set-拦截的行为","depth":3,"text":"触发 set 拦截的行为"},{"id":"基础实现的问题","depth":3,"text":"基础实现的问题"},{"id":"修复存取器属性","depth":3,"text":"修复存取器属性"}]},{"id":"隐匿的-defineproperty-陷阱拦截","depth":2,"text":"隐匿的 defineProperty 陷阱拦截","children":[{"id":"增加-defineproperty-拦截","depth":3,"text":"增加 defineProperty 拦截"},{"id":"分析拦截逻辑","depth":3,"text":"分析拦截逻辑"},{"id":"修复数据属性","depth":3,"text":"修复数据属性"},{"id":"defineproperty-拦截的作用","depth":3,"text":"defineProperty 拦截的作用"}]},{"id":"invariants","depth":2,"text":"Invariants","children":[{"id":"返回设置信息","depth":3,"text":"返回设置信息"}]},{"id":"总结","depth":2,"text":"总结"},{"id":"参考","depth":2,"text":"参考"}]}},"_type":"markdown","_id":"content:articles:javaScript:ProxyAndReflect.md","_source":"content","_file":"articles/javaScript/ProxyAndReflect.md","_extension":"md"},{"_path":"/articles/mobile/_dir","_dir":"mobile","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"移动端","_id":"content:articles:mobile:_dir.yml","_type":"yaml","_source":"content","_file":"articles/mobile/_dir.yml","_extension":"yml"},{"_path":"/articles/mobile/selfadaptiveanddpr","_dir":"mobile","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"真的，移动端尺寸自适应与 dpr 无关","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"做移动端自适应时可能很多人都对自适应和 dpr 之间的关系产生疑问,也有一些人会疑虑比如我的自适应方案没有加 dpr 会不会出问题,针对这些疑问我说一下我的见解,希望能解除你的担忧。"}]},{"type":"element","tag":"h2","props":{"id":"_1-什么是尺寸自适应"},"children":[{"type":"text","value":"1. 什么是尺寸自适应"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先说到自适应,可能在不同人眼里理解不同，特别与响应式的关系,在这里说一下我所理解的自适应,和其与响应式的区别。先说响应式设计,响应式设计表示在不同的屏幕尺寸下,都有良好的布局和内容表现,简单一点的说,就是一个页面可以适配多种不同尺寸的屏幕,而且看上去还是设计良好的。为了实现这个目的,可能会利用 js 或者 css 去动态改变布局的尺寸,在这个过程中会伴随元素尺寸的改变,布局的改变,甚至会把元素隐藏,比如在 pc 端显示的页面转到移动端就会这样。而自适应往往考虑的是另一个方面,就是希望页面的设计与设计稿的设计比例一致,这个也是做自适应的目的,在这个过程中针对不同的屏幕宽度元素的尺寸也会改变,但是一般不会有布局改变,和元素的隐藏,因为设计稿就这样。所以按照我以上的说法,那些按照 css 媒体查询写的自适应严格来说不叫自适应,因为断点之间会造成比例误差,而让误差少一点就得多插值。很明显使用 css 媒体查询并不是做自适应的好方法,我们需要一种准确的方法来做这个事,这个时候 js 就出来了,下面将会列举坊间流传甚广的淘宝方案和网易方案。"}]},{"type":"element","tag":"h2","props":{"id":"_2-淘宝方案"},"children":[{"type":"text","value":"2. 淘宝方案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"点这里可以看到淘宝方案具体的代码"},{"type":"element","tag":"a","props":{"href":"https://github.com/huainanhai/flexible/blob/master/public/js/frame/flexible.debug.js","rel":["nofollow"]},"children":[{"type":"text","value":"flexible"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当然具体的代码是做了很多的边界处理和兼容处理的,但是核心可以浓缩为以下代码"}]},{"type":"element","tag":"code","props":{"code":"(function () {\n  var dpr = window.devicePixelRatio;\n  var meta = document.createElement('meta');\n  var scale = 1 / dpr;\n  meta.setAttribute('name', 'viewport');\n  meta.setAttribute(\n    'content',\n    'width=device-width, user-scalable=no, initial-scale=' +\n      scale +\n      ', maximum-scale=' +\n      scale +\n      ', minimum-scale=' +\n      scale\n  );\n  document.getElementsByTagName('head')[0].appendChild(meta);\n  // 动态设置的缩放大小会影响布局视口的尺寸\n  function resize() {\n    var deviceWidth = document.documentElement.clientWidth;\n    document.documentElement.style.fontSize = deviceWidth / 10 + 'px';\n  }\n  resize();\n  window.onresize = resize;\n})();\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"devicePixelRatio"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"createElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'meta'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"scale"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"setAttribute"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'viewport'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"setAttribute"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'content'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'width=device-width, user-scalable=no, initial-scale='"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"scale"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"', maximum-scale='"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"scale"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"', minimum-scale='"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"scale\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"getElementsByTagName"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'head'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":")["}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"]."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"appendChild"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-63e80d"},"children":[{"type":"text","value":"// 动态设置的缩放大小会影响布局视口的尺寸\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"deviceWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"documentElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"clientWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"documentElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"fontSize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"deviceWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'px'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"onresize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"})();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这段代码放在浏览器上就能做到自适应了,他的过程是先获取设备的 dpr,所谓的 dpr 就是设备像素比,什么是设备像素比呢,就是单位尺寸内,设备物理像素的个数除以设备独立像素的大小,物理像素就是手机屏幕上一个一个的发光的点,大小是固定的,独立像素也叫做逻辑像素,css 设置的像素大小就是逻辑像素,对于 dpr 等于 2 的手机屏幕,设置 css 宽度为 1px,其实覆盖的是 2 个设备物理像素。回到正题,拿到 dpr 后,通过动态设置 meta 的 viewport 值,进行对布局的缩放操作。这里有一个关键,就是设置 width=device-width 和 initial-scale 的大小,在描述两者的作用之前我们先要理解一个概念就是布局视口,布局视口在之前有一个别名叫做初始包含块,而在比较早的文献中初始包含块也叫做画布。理解画布可能比理解布局视口更简单,如果你按比例绘图,很多时候就要参照你所用画布的大小,比如设计师在 750px 画了一个 200px 的正方形,如果你要在一张大小是 100cm 的纸上画,你可能就要这样计算正方形的宽度了 100cm * 200 / 750,可以看到这个计算中是没有用到 dpr,你的笔触跨过多少个纸张分子,多少个原子根本就不影响我的绘图比例。我们的画画的过程就相当于设置 css 的过程,css 的尺寸依赖的就是布局视口的大小,而网页的布局视口大小在标准模式下可以这样获取"}]},{"type":"element","tag":"code","props":{"code":"document.documentElement.clientWidth;\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"documentElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"clientWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而两个关键的元素设置 width=device-width,initial-scale = scale,做的事情就是先把布局视口放大 dpr 倍,然后整体缩放相应倍数以适应设备尺寸。这个也很容易验证在控制台打印布局视口大小就行了"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"图片","src":"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444eb6cffc5c8b~tplv-t2oaga2asx-image.image"},"children":[]},{"type":"text","value":"\n这是按照 640px 设计规范,设计图上标注 200px 元素大小,可以看出布局视口放大了 3 倍,然后再整体缩放到设备屏幕大小,由于这里是证明这个过程其实与 dpr 无关,我现在把 scale 的大小分别设置为\n0.1 和 0.5"}]},{"type":"element","tag":"code","props":{"code":"var meta = document.createElement('meta');\nvar scale = 0.1;\nmeta.setAttribute('name', 'viewport');\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"createElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'meta'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"scale"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"0.1"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"setAttribute"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'viewport'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"0.1","src":"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444ed132e70696~tplv-t2oaga2asx-image.image"},"children":[]}]},{"type":"element","tag":"code","props":{"code":"var meta = document.createElement('meta');\nvar scale = 0.5;\nmeta.setAttribute('name', 'viewport');\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"createElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'meta'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"scale"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"0.5"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"setAttribute"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'viewport'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"0.5","src":"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444edd6d16eb1c~tplv-t2oaga2asx-image.image"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里可以看到就算我设置 scale 不等于 1 / drp 的大小也不妨碍我按设计图的比例画出元素\n这里要注意两点,因为我是用 chrome 模拟的,设置的时候发现几个问题"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"scale 的值如果小于 0.1 布局视口也只能放大 10 倍,也就是布局视口最多放大 10 倍"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当 scale 的值大于 1 时布局视口并不会缩小,而且布局视口不再匹配设备宽度,这种情况实际不会出现。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果你引入了 flexible.js 进行测试,要注意删除边界条件,因为缩放影响了布局视口大小,相应的边界条件会触发,导致误认为 dpr 与自适应有关"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要做到自适应关键是让元素的尺寸与布局视口绑定关系,在这里虽然布局视口放大了,但并不影响这种绑定关系,这里淘宝方案把布局视口的宽度分割了十等份,每份的大小相当于布局宽度的十分之一,而把每份的大小分配给根元素的字体大小,元素尺寸就可以设置 rem 单位来与布局视口绑定关系,以 200px 尺寸为例,他们比例映射是这样的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"200px : 640px => xrem : 10rem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里的 10rem 就是布局视口宽度,元素尺寸只要维持这个比例关系就行了,与 dpr 是没有关系的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"x= 10 * 200 / 640 = 3.125rem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里的计算可能会费一点时间,也有一些插件可以辅助把 px 转为 rem 的\n但是方案是死的,人是活的,你只要把淘宝固有的十等分改一下就行了,比如设计稿是 640px 的\n改一下"}]},{"type":"element","tag":"code","props":{"code":"document.documentElement.style.fontSize = deviceWidth / 6.4 + 'px';\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"documentElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"fontSize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"deviceWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"6.4"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'px'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"分了 6.4 等份"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"200px : 640px => xrem : 6.4rem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"x 一看就知道是 2rem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"流程： rem => 根元素字体大小 => 布局视口"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当然也可以分割为 100 等份,这样方便为以后使用 vw 单位进行过渡"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么为什么淘宝要引入 dpr,把布局放大再缩小呢,其中一点就是这个方案可以很好地解决 1px 边框的问题,对于高清屏来说设置 1px 像素大小,其实横跨的是 dpr 个设备像素,这样看起来线条不够细,与设计稿就产生出入,而通过布局放大再缩小的方案刚好就弥补了这个问题。但是随之而来也带来一个问题,看上面的截图我们看到字体大小发生了改变,在 scale 设置为 0.1 时基本就看不见了,原因是一般我们的字体大小的设置不会使用 rem,而是使用 px 单位,这里的字体大小没有随布局视口的放大而增大,却随页面的整体缩放而缩小了,这里就得要针对不同的 dpr 做响应的处理,在淘宝的代码中我们可以看到"}]},{"type":"element","tag":"code","props":{"code":"docEl.setAttribute('data-dpr', dpr);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"docEl"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"setAttribute"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'data-dpr'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"就是通过在根元素上挂载 dpr 信息,然后设置相应的 css 属性例如"}]},{"type":"element","tag":"code","props":{"code":"[data-dpr='2'] div {\n  font-size: 32px;\n}\n[data-dpr='3'] div {\n  font-size: 48px;\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"data-dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'2'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-7fda25"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"32px"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"data-dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'3'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-7fda25"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"48px"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"特别对于安卓手机,各种神奇的 dpr,如果每个都这样设置将会是灾难\n所以淘宝非常聪明"}]},{"type":"element","tag":"code","props":{"code":"var isAndroid = win.navigator.appVersion.match(/android/gi);\nvar isIPhone = win.navigator.appVersion.match(/iphone/gi);\nvar devicePixelRatio = win.devicePixelRatio;\nif (isIPhone) {\n  // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n  if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\n    dpr = 3;\n  } else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {\n    dpr = 2;\n  } else {\n    dpr = 1;\n  }\n} else {\n  // 其他设备下，仍旧使用1倍的方案\n  dpr = 1;\n}\nscale = 1 / dpr;\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"isAndroid"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"win"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"appVersion"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"match"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5ca2e0"},"children":[{"type":"text","value":"/android/"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"gi"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"isIPhone"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"win"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"appVersion"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"match"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5ca2e0"},"children":[{"type":"text","value":"/iphone/"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"gi"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"devicePixelRatio"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"win"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"devicePixelRatio"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-97066b"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"isIPhone"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-63e80d"},"children":[{"type":"text","value":"// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-97066b"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"devicePixelRatio"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" >= "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" && (!"}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" || "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" >= "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-97066b"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97066b"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"devicePixelRatio"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" >= "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" && (!"}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" || "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" >= "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-97066b"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-97066b"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-63e80d"},"children":[{"type":"text","value":"// 其他设备下，仍旧使用1倍的方案\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"scale"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"够简单直接,安卓高清屏是不存在的, 但是其实影响也不大,就是安卓屏的 1px 线条粗一点而已"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果除了要做自适应还要做响应式,那也得像上面设置字体一样一个一个设置,因为 css 媒体查询也是针对布局视口尺寸的。对于淘宝他们来说,肯定有一套工程化的方案来解决这种技术难题,对于遇到这个坑的伙伴估计得自已想办法了,预处理器是必不可少的。\n从前面可以知道淘宝引入 dpr 并不是为了做自适应的,而是为了解决 1px 问题的,当然也引入了其他难题,既然如此,放弃解决 1px 问题,不就简单得多,网易方案就是这么做的。"}]},{"type":"element","tag":"h2","props":{"id":"_3网易方案"},"children":[{"type":"text","value":"3.网易方案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"去除了边界处理和兼容处理，由于没有动态设置 meta 所以要在 head 中引入"}]},{"type":"element","tag":"code","props":{"code":"<meta\n  name=\"viewport\"\n  content=\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\"\n/>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"meta\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"viewport\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"/>"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"(function () {\n  var dpr = window.devicePixelRatio;\n  function resize() {\n    var deviceWidth = document.documentElement.clientWidth;\n    document.documentElement.style.fontSize = deviceWidth / 6.4 + 'px';\n  }\n  resize();\n  window.onresize = resize;\n})();\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"devicePixelRatio"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"deviceWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"documentElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"clientWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"documentElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"fontSize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"deviceWidth"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"6.4"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'px'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-fbcb71"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"onresize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"})();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"网易方案没有引入 dpr 相关的,这也说明了移动端自适应与 dpr 是无关的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"0.6","src":"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444f837fa7be33~tplv-t2oaga2asx-image.image"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从图片中可以看出和淘宝方案的区别,布局视口没有放大,整个页面也没有缩放,但是并不影响与设计图的比例"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"200px : 640px => xrem : 6.4rem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"x= 2rem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"流程: rem => 根元素的大小 => 布局视口"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"既然自适应与 dpr 无关那么就可以扩展出很多方案了"}]},{"type":"element","tag":"h2","props":{"id":"_4-其他方案"},"children":[{"type":"text","value":"4. 其他方案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.在布局视口等于设备宽度时,直接把根元素字体大小绑定到设备宽度大小上"}]},{"type":"element","tag":"code","props":{"code":"document.documentElement.style.fontSize = screen.width / 6.4 + 'px';\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"documentElement"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"fontSize"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"screen"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"6.4"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"'px'"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里有关相关的文章 "},{"type":"element","tag":"a","props":{"href":"https://www.zhangxinxu.com/wordpress/2016/06/pseudo-response-layout-base-on-screen-width/","rel":["nofollow"]},"children":[{"type":"text","value":"基于 screen.width 的伪响应式开发"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.直接定死布局视口"}]},{"type":"element","tag":"code","props":{"code":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n    <meta name=\"viewport\" content=\"width=640, user-scalable=no\" />\n    //定死为设计稿的尺寸\n    <meta name=\"renderer\" content=\"webkit\" />\n    <title>定死布局视口</title>\n    <style>\n      html,\n      body {\n        margin: 0;\n      }\n      div {\n        width: 200px;\n        height: 200px;\n        background: red;\n      }\n\n      body {\n        background: blue;\n      }\n    </style>\n    <script></script>\n  </head>\n  <body>\n    <div id=\"size200px\">元素大小200px</div>\n  </body>\n</html>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<!"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"DOCTYPE"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"zh-CN\""}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"charset"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"UTF-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"http-equiv"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"X-UA-Compatible\""}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"ie=edge\""}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"viewport\""}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"width=640, user-scalable=no\""}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    //定死为设计稿的尺寸\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"renderer\""}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"webkit\""}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"title"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"定死布局视口"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"title"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7fda25"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7fda25"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7fda25"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bcb038"},"children":[{"type":"text","value":"200px"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"background"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"red"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7fda25"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"background"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"blue"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8b985"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3bd228"},"children":[{"type":"text","value":"\"size200px\""}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"元素大小200px"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-e19922"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-85aa4c"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-39759d"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"0.001","src":"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444fac35b57970~tplv-t2oaga2asx-image.image"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不用 rem 单位,不用设置 js,但是布局视口定死后,就不能用 css 媒体查询做响应式了,从这里也可以看出 viewport 属性的作用,就是让布局视口通过缩放来适配屏幕宽度,width=device.width 仅仅是让布局视口初始大小等于设备宽度,后面设置的 initial-scale 是用来缩放布局视口大小,而且默认是布局视口初始大小等于设备宽度,也就是所谓的理想视口,换个说法就是如果你设置了 initial-scale 你可以不用设置 width=device.width 了,淘宝方案你把 width=device.width 去掉,并不会影响自适应过程,加上主要是防止一些不按规范的浏览器出现兼容问题。如果还不能理解 viewport 的作用,那么可以参考 svg 中的 viewport 和 viewBox 的关系，原理是一样的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3.使用新出单位 vw, vw 就是专门为自适应而出现的,100vw 就是布局视口的宽度,非常厉害,你也不用设置 js 了"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"200px: 640px => xvw : 100vw"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"x=200 * 100 / 640 = 31.25vw"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"流程: vw => 布局视口"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"看一下兼容性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444fc469953bd0~tplv-t2oaga2asx-image.image"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"兼容还可以,这里也有相关的资料"},{"type":"element","tag":"a","props":{"href":"https://www.w3cplus.com/css/taobao-2018-year.html","rel":["nofollow"]},"children":[{"type":"text","value":" 分享手淘过年项目中采用到的前端技术"}]}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"移动端尺寸自适应与 dpr 无关,除了淘宝方案外,其他方案都得处理 1px 的问题,但也减少针对不同 dpr 设备做响应式处理的麻烦,而且其中也没有一种一劳永逸的方案能解决全部问题。而作为新出来的单位 vw,是时候该入坑了"}]},{"type":"element","tag":"h2","props":{"id":"参考文章"},"children":[{"type":"text","value":"参考文章"}]},{"type":"element","tag":"code","props":{"code":"1. 张鑫旭 [基于 screen.width 的伪响应式开发](https://www.zhangxinxu.com/wordpress/2016/06/pseudo-response-layout-base-on-screen-width/)\n\n2. 大漠 [分享手淘过年项目中采用到的前端技术](https://www.w3cplus.com/css/taobao-2018-year.html)\n\n3. [fleible](https://github.com/huainanhai/flexible/blob/master/public/js/frame/flexible.debug.js)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1. 张鑫旭 [基于 screen.width 的伪响应式开发](https://www.zhangxinxu.com/wordpress/2016/06/pseudo-response-layout-base-on-screen-width/)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"2. 大漠 [分享手淘过年项目中采用到的前端技术](https://www.w3cplus.com/css/taobao-2018-year.html)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"3. [fleible](https://github.com/huainanhai/flexible/blob/master/public/js/frame/flexible.debug.js)"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-39759d{color:#808080}\n.ct-97066b{color:#C586C0}\n.ct-5ca2e0{color:#D16969}\n.ct-7fda25{color:#D7BA7D}\n.ct-63e80d{color:#6A9955}\n.ct-bcb038{color:#B5CEA8}\n.ct-3bd228{color:#CE9178}\n.ct-fbcb71{color:#DCDCAA}\n.ct-f8b985{color:#9CDCFE}\n.ct-85aa4c{color:#569CD6}\n.ct-e19922{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"_1-什么是尺寸自适应","depth":2,"text":"1. 什么是尺寸自适应"},{"id":"_2-淘宝方案","depth":2,"text":"2. 淘宝方案"},{"id":"_3网易方案","depth":2,"text":"3.网易方案"},{"id":"_4-其他方案","depth":2,"text":"4. 其他方案"},{"id":"总结","depth":2,"text":"总结"},{"id":"参考文章","depth":2,"text":"参考文章"}]}},"_type":"markdown","_id":"content:articles:mobile:SelfAdaptiveAndDPR.md","_source":"content","_file":"articles/mobile/SelfAdaptiveAndDPR.md","_extension":"md"},{"_path":"/browser_plugins/_dir","_dir":"browser_plugins","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"浏览器插件","_id":"content:browser_plugins:_dir.yml","_type":"yaml","_source":"content","_file":"browser_plugins/_dir.yml","_extension":"yml"},{"_path":"/browser_plugins/modifyingwebdata/_dir","_dir":"modifyingwebdata","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"修改网页信息","_id":"content:browser_plugins:ModifyingWebData:_dir.yml","_type":"yaml","_source":"content","_file":"browser_plugins/ModifyingWebData/_dir.yml","_extension":"yml"},{"_path":"/browser_plugins/modifyingwebdata/install","_dir":"modifyingwebdata","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"安装","description":"","body":{"type":"root","children":[{"type":"element","tag":"browser-plugin-install","props":{":versionInfos":"[{\"version\":\"1.0.1\",\"downUrl\":\"https://mp-917a92df-900c-4e77-9276-d84f453106f8.cdn.bspapp.com/cloudstorage/83d5d2cc-f9c5-4d8b-aeed-894c901d0a78.crx\",\"filename\":\"修改网页信息\",\"MD5\":\"82C49A244A521CD90E966FFDBDB2171A\"}]","name":"修改网页信息"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:browser_plugins:ModifyingWebData:install.md","_source":"content","_file":"browser_plugins/ModifyingWebData/install.md","_extension":"md"},{"_path":"/browser_plugins/modifyingwebdata/readme","_dir":"modifyingwebdata","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"使用说明","description":"","body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"使用"},"children":[{"type":"text","value":"使用"}]}]},{"type":"element","tag":"code","props":{"code":"把[修改网页信息]目录下的的文件保存到本地,点击浏览器右上角的扩展程序 -> 扩展程序管理,勾选开发者模式,然后点击加载已经解压的扩展程序,选择包含之前下载文件的目录就可以了。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"把[修改网页信息]目录下的的文件保存到本地,点击浏览器右上角的扩展程序 -> 扩展程序管理,勾选开发者模式,然后点击加载已经解压的扩展程序,选择包含之前下载文件的目录就可以了。"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"功能"},"children":[{"type":"text","value":"功能"}]}]},{"type":"element","tag":"code","props":{"code":"可以通过右键点击节点让节点处于可修改状态,修改信息后,信息会被保存,再次刷新时会让之前保存的信息替换原来的信息\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"可以通过右键点击节点让节点处于可修改状态,修改信息后,信息会被保存,再次刷新时会让之前保存的信息替换原来的信息"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"原理"},"children":[{"type":"text","value":"原理"}]}]},{"type":"element","tag":"code","props":{"code":"使用 XPath 来对节点进行定位,因此会依赖节点的渲染顺序\n\n使用 MutationObserver 对节点信息插入进行拦截,因为 MutationObserver 的监听回调的执行时机早于浏览器的渲染时机,所以替换时一般不会出现内容闪烁。而对于使用客户端渲染的页面,渲染顺序可能会有变化导致结构不确定,这个时候使用轮询的方式进行替换,会出现稍微的内容闪烁。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"使用 XPath 来对节点进行定位,因此会依赖节点的渲染顺序\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"使用 MutationObserver 对节点信息插入进行拦截,因为 MutationObserver 的监听回调的执行时机早于浏览器的渲染时机,所以替换时一般不会出现内容闪烁。而对于使用客户端渲染的页面,渲染顺序可能会有变化导致结构不确定,这个时候使用轮询的方式进行替换,会出现稍微的内容闪烁。"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"配置"},"children":[{"type":"text","value":"配置"}]}]},{"type":"element","tag":"code","props":{"code":"点击扩展图标,可以对扩展进行配置\n\n启动切换: 禁止后,节点不能进入可修改状态,但是之前已经处于可修改状态的节点依然可以修改,再次刷新后数据依然会被覆盖,如果希望数据不会被覆盖,可以在扩展程序管理中暂时禁用该扩展\n\nurl 设置: 默认不设置会拦截所有的网页。支持通配符设置,例如 http?://*.baidu.com/*。支持正则设置,例如 https?://\\w*.baidu.com/\\w*\n\n清除缓存: 删除所有记录的网页修改数据\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"点击扩展图标,可以对扩展进行配置\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"启动切换: 禁止后,节点不能进入可修改状态,但是之前已经处于可修改状态的节点依然可以修改,再次刷新后数据依然会被覆盖,如果希望数据不会被覆盖,可以在扩展程序管理中暂时禁用该扩展\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"url 设置: 默认不设置会拦截所有的网页。支持通配符设置,例如 http?://*.baidu.com/*。支持正则设置,例如 https?://\\w*.baidu.com/\\w*\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"清除缓存: 删除所有记录的网页修改数据"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"限制"},"children":[{"type":"text","value":"限制"}]}]},{"type":"element","tag":"code","props":{"code":"该扩展使用的是 v3 协议,要求 chrome 的内核版本是 88 及以上。因为大部分浏览器都使用了 chrome 内核,因此可支持大部分浏览器。可以按 F12 打开浏览器控制台,输入 navigator.userAgent,假如输出是 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36',那么这个是 102 版本的,可以支持\n\n如果网页的文档结构是类似这样的\n<div>\n    hello world\n    <div>你好</div>\n</div>\nhello world 有兄弟节点,但是自身没有被元素节点包围,hello world 文本将不能被修改,因为如果可以修改,在修改过程中容易导致节点的结构发生更改,导致后续的替换失败。\n\n因为是使用 MutationObserver 配合 XPath 定位来拦截节点渲染,如果页面结构是不停变化的,例如滚动列表,对这些节点修改后的刷新替换会失效。\n\n替换目前是一次性的,如果找到目标节点就会进行替换,如果目标节点是先渲染节点结构,但是要等比较长的时间才渲染内容,会造成已替换内容被后出现数据所覆盖。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"该扩展使用的是 v3 协议,要求 chrome 的内核版本是 88 及以上。因为大部分浏览器都使用了 chrome 内核,因此可支持大部分浏览器。可以按 F12 打开浏览器控制台,输入 navigator.userAgent,假如输出是 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36',那么这个是 102 版本的,可以支持\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"如果网页的文档结构是类似这样的\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<div>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    hello world\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    <div>你好</div>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"</div>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hello world 有兄弟节点,但是自身没有被元素节点包围,hello world 文本将不能被修改,因为如果可以修改,在修改过程中容易导致节点的结构发生更改,导致后续的替换失败。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"因为是使用 MutationObserver 配合 XPath 定位来拦截节点渲染,如果页面结构是不停变化的,例如滚动列表,对这些节点修改后的刷新替换会失效。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"替换目前是一次性的,如果找到目标节点就会进行替换,如果目标节点是先渲染节点结构,但是要等比较长的时间才渲染内容,会造成已替换内容被后出现数据所覆盖。"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"开源地址"},"children":[{"type":"text","value":"开源地址"}]}]},{"type":"element","tag":"code","props":{"code":"https://gitee.com/changlishe/browser-plugins\n浏览器插件\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"https://gitee.com/changlishe/browser-plugins\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"浏览器插件"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"使用","depth":3,"text":"使用"},{"id":"功能","depth":3,"text":"功能"},{"id":"原理","depth":3,"text":"原理"},{"id":"配置","depth":3,"text":"配置"},{"id":"限制","depth":3,"text":"限制"},{"id":"开源地址","depth":3,"text":"开源地址"}]}},"_type":"markdown","_id":"content:browser_plugins:ModifyingWebData:readme.md","_source":"content","_file":"browser_plugins/ModifyingWebData/readme.md","_extension":"md"},{"_path":"/browser_plugins/universaltextrecognition/_dir","_dir":"universaltextrecognition","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"通用文字识别","_id":"content:browser_plugins:UniversalTextRecognition:_dir.yml","_type":"yaml","_source":"content","_file":"browser_plugins/UniversalTextRecognition/_dir.yml","_extension":"yml"},{"_path":"/browser_plugins/universaltextrecognition/install","_dir":"universaltextrecognition","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"安装","description":"","body":{"type":"root","children":[{"type":"element","tag":"browser-plugin-install","props":{":versionInfos":"[{\"version\":\"1.0.1\",\"downUrl\":\"https://mp-917a92df-900c-4e77-9276-d84f453106f8.cdn.bspapp.com/cloudstorage/2295ad20-dfec-4f43-92af-cc103e3b9b9f.crx\",\"filename\":\"通用文字识别\",\"MD5\":\"98DFDA9B8045F6CCF9A3E5115C52090A\"}]","name":"通用文字识别"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:browser_plugins:UniversalTextRecognition:install.md","_source":"content","_file":"browser_plugins/UniversalTextRecognition/install.md","_extension":"md"},{"_path":"/browser_plugins/universaltextrecognition/readme","_dir":"universaltextrecognition","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"使用说明","description":"","body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"使用"},"children":[{"type":"text","value":"使用"}]}]},{"type":"element","tag":"code","props":{"code":"需要注册相应平台的账号,并把获取的 key 等信息填入到配置中,可以查看[#相关链接]获取到对应平台的注册入口。\n\n启动后,聚焦窗口,然后按住 ctrl + alt 键然后点击鼠标并拖动鼠标来框选要识别的区域\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"需要注册相应平台的账号,并把获取的 key 等信息填入到配置中,可以查看[#相关链接]获取到对应平台的注册入口。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"启动后,聚焦窗口,然后按住 ctrl + alt 键然后点击鼠标并拖动鼠标来框选要识别的区域"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"功能"},"children":[{"type":"text","value":"功能"}]}]},{"type":"element","tag":"code","props":{"code":"通过人工智能平台,对浏览器区域内的图像数据进行通用的文本字体识别\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"通过人工智能平台,对浏览器区域内的图像数据进行通用的文本字体识别"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"配置"},"children":[{"type":"text","value":"配置"}]}]},{"type":"element","tag":"code","props":{"code":"点击扩展图标,可以对扩展进行配置\n\n启动切换: 禁止后,将不能进行框选操作\n\nkey 设置: 设置对应平台的 key 信息,点击不同的平台,会让该平台处于活跃状态,并使用对应的 api 发起请求。\n\n打开文本窗口: 将打开文本窗口\n  * 重试: 对之前框选的图像数据再次发送请求\n\n  * 复制: 复制文本框中的内容,如果没有选中任何内容,那么将复制全部的内容\n\n  * 复制并关闭: 复制后关闭文本框\n\n清除 key 信息: 清除对应平台的 key 信息\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"点击扩展图标,可以对扩展进行配置\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"启动切换: 禁止后,将不能进行框选操作\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"key 设置: 设置对应平台的 key 信息,点击不同的平台,会让该平台处于活跃状态,并使用对应的 api 发起请求。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"打开文本窗口: 将打开文本窗口\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  * 重试: 对之前框选的图像数据再次发送请求\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  * 复制: 复制文本框中的内容,如果没有选中任何内容,那么将复制全部的内容\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  * 复制并关闭: 复制后关闭文本框\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"清除 key 信息: 清除对应平台的 key 信息"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"限制"},"children":[{"type":"text","value":"限制"}]}]},{"type":"element","tag":"code","props":{"code":"该扩展使用的是 v3 协议,要求 chrome 的内核版本是 88 及以上。因为大部分浏览器都使用了 chrome 内核,因此可支持大部分浏览器。可以按 F12 打开浏览器控制台,输入 navigator.userAgent,假如输出是 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36',那么这个是 102 版本的,可以支持\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"该扩展使用的是 v3 协议,要求 chrome 的内核版本是 88 及以上。因为大部分浏览器都使用了 chrome 内核,因此可支持大部分浏览器。可以按 F12 打开浏览器控制台,输入 navigator.userAgent,假如输出是 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36',那么这个是 102 版本的,可以支持"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"相关链接"},"children":[{"type":"text","value":"相关链接"}]}]},{"type":"element","tag":"code","props":{"code":"https://console.bce.baidu.com/ai/#/ai/ocr/overview/index\n百度智能云服务概览\n\nhttps://console.bce.baidu.com/ai/#/ai/ocr/overview/resource/getFree\n百度智能云领取免费资源\n\nhttps://console.bce.baidu.com/ai/#/ai/ocr/app/list\n百度智能云查看 API Key 和 Secret Key\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"https://console.bce.baidu.com/ai/#/ai/ocr/overview/index\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"百度智能云服务概览\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"https://console.bce.baidu.com/ai/#/ai/ocr/overview/resource/getFree\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"百度智能云领取免费资源\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"https://console.bce.baidu.com/ai/#/ai/ocr/app/list\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"百度智能云查看 API Key 和 Secret Key"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"开源地址"},"children":[{"type":"text","value":"开源地址"}]}]},{"type":"element","tag":"code","props":{"code":"https://gitee.com/changlishe/browser-plugins\n浏览器插件\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"https://gitee.com/changlishe/browser-plugins\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"浏览器插件"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"使用","depth":3,"text":"使用"},{"id":"功能","depth":3,"text":"功能"},{"id":"配置","depth":3,"text":"配置"},{"id":"限制","depth":3,"text":"限制"},{"id":"相关链接","depth":3,"text":"相关链接"},{"id":"开源地址","depth":3,"text":"开源地址"}]}},"_type":"markdown","_id":"content:browser_plugins:UniversalTextRecognition:readme.md","_source":"content","_file":"browser_plugins/UniversalTextRecognition/readme.md","_extension":"md"},{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"首页","description":"changlishe 的个人博客","body":{"type":"root","children":[{"type":"element","tag":"home","props":{},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:index.md","_source":"content","_file":"index.md","_extension":"md"},{"_path":"/test","_dir":"","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"markdown","description":"","body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"标题"},"children":[{"type":"text","value":"标题"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"标题-1"},"children":[{"type":"text","value":"标题"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h1","props":{"id":"标题-2"},"children":[{"type":"text","value":"标题"}]}]},{"type":"element","tag":"h3","props":{"id":"标题-3"},"children":[{"type":"text","value":"标题"}]},{"type":"element","tag":"h2","props":{"id":"标题-4"},"children":[{"type":"text","value":"标题"}]},{"type":"element","tag":"h1","props":{"id":"标题-5"},"children":[{"type":"text","value":"标题"}]},{"type":"element","tag":"h2","props":{"id":"标题-6"},"children":[{"type":"text","value":"标题"}]},{"type":"element","tag":"h3","props":{"id":"标题-7"},"children":[{"type":"text","value":"标题"}]},{"type":"element","tag":"h4","props":{"id":"标题-8"},"children":[{"type":"text","value":"标题"}]},{"type":"element","tag":"code","props":{"code":"hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello worldddsdafasdf\n\nhello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world\n\n[百度](https://www.baidu.com)\n\n[相关链接](/browser_plugins/universaltextrecognition/readme#相关链接)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello worldddsdafasdf\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[百度](https://www.baidu.com)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[相关链接](/browser_plugins/universaltextrecognition/readme#相关链接)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world 你好"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world hello world hello world hello worldhello world hello world"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"进入"},{"type":"element","tag":"a","props":{"href":"https://www.baidu.com","rel":["nofollow"]},"children":[{"type":"text","value":"百度"}]},{"type":"text","value":"外部网页"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.baidu.com","rel":["nofollow"]},"children":[{"type":"text","value":"百度"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"进入"},{"type":"element","tag":"a","props":{"href":"/about"},"children":[{"type":"text","value":"关于"}]},{"type":"text","value":"内部网页"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"进入"},{"type":"element","tag":"a","props":{"href":"/about2"},"children":[{"type":"text","value":"关于"}]},{"type":"text","value":"内部网页"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"进入"},{"type":"element","tag":"a","props":{"href":"#%E6%A0%87%E9%A2%98"},"children":[{"type":"text","value":"标题"}]},{"type":"text","value":"内部网页"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/browser_plugins/universaltextrecognition/readme#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5"},"children":[{"type":"text","value":"相关链接"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.baidu.com","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.baidu.com"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内联脚本 "},{"type":"element","tag":"code-inline","props":{"lang":"js","class":"colored"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"'hello world'"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":")"}]}]}]},{"type":"element","tag":"code","props":{"code":"import { useRuntimeConfig } from '#imports';\ndefineProps<{ id?: string }>();\nconst heading = 3;\nconst { anchorLinks } = useRuntimeConfig().public.content;\nconst generate = anchorLinks?.depth >= heading && !anchorLinks?.exclude.includes(heading);\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"useRuntimeConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"'#imports'"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"defineProps"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"<{ "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"?: "}]},{"type":"element","tag":"span","props":{"class":"ct-642cb1"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" }>();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65786d"},"children":[{"type":"text","value":"heading"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-65786d"},"children":[{"type":"text","value":"anchorLinks"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" } = "}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"useRuntimeConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"content"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65786d"},"children":[{"type":"text","value":"generate"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"anchorLinks"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"depth"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" >= "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"heading"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" && !"}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"anchorLinks"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"exclude"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"includes"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"heading"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<script>\nimport { defineComponent } from '#imports';\nexport default defineComponent({\n  props: {\n    code: {\n      type: String,\n      default: ''\n    },\n    language: {\n      type: String,\n      default: null\n    },\n    filename: {\n      type: String,\n      default: null\n    },\n    highlights: {\n      type: Array,\n      default: () => []\n    },\n    meta: {\n      type: String,\n      default: null\n    }\n  }\n});\n</script>\n\n<template>\n  <div :class=\"language ? 'lang' : 'no-lang'\">\n    <slot />\n  </div>\n</template>\n\n<style lang=\"scss\">\n.lang,\n.no-lang {\n  width: 100%;\n  padding: 0 1em;\n  box-sizing: border-box;\n}\npre code {\n  display: inline-block;\n  border: 1px solid var(--blog-border-color-3);\n  padding: 1em;\n  border-radius: var(--blog-radius-2);\n  white-space: normal;\n  box-sizing: border-box;\n  width: 100%;\n}\npre code .line {\n  display: block;\n  min-height: 1rem;\n}\n.no-lang pre {\n  font-family: inherit;\n}\n.no-lang pre code {\n  font-family: inherit;\n  background-color: var(--blog-gray-light-5);\n}\n.dark .no-lang pre code {\n  background-color: var(--blog-black-pure);\n}\n.lang pre code {\n  background-color: #1e1e1e;\n  overflow: auto;\n  white-space: pre;\n  .line {\n    white-space: nowrap;\n  }\n}\n</style>\n","filename":"example.vue","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"defineComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"'#imports'"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"defineComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"props:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"code:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"default:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"''\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"language:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"default:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"filename:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"default:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"highlights:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"Array"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"meta:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"default:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":":class"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"\"language ? 'lang' : 'no-lang'\""}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"slot"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-06a5b2"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"\"scss\""}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".lang"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".no-lang"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"padding"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"1em"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"box-sizing"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"border-box"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"1px"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"--blog-border-color-3"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"padding"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"1em"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"border-radius"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"--blog-radius-2"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"white-space"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"normal"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"box-sizing"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"border-box"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".line"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"block"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"min-height"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"1rem"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".no-lang"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"font-family"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"inherit"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".no-lang"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"font-family"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"inherit"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"--blog-gray-light-5"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".dark"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".no-lang"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"--blog-black-pure"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".lang"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"background-color"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"#1e1e1e"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"overflow"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"white-space"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ed2370"},"children":[{"type":"text","value":".line"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"white-space"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"nowrap"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"style"}]},{"type":"element","tag":"span","props":{"class":"ct-95fdc0"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"import { useRuntimeConfig } from '#imports';\ndefineProps<{ id?: string }>();\nconst a = {\n  b: 2\n};\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"useRuntimeConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e0364"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d04e0"},"children":[{"type":"text","value":"'#imports'"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e2d3c"},"children":[{"type":"text","value":"defineProps"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"<{ "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"?: "}]},{"type":"element","tag":"span","props":{"class":"ct-642cb1"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" }>();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9d0c8d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65786d"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-aa6ea1"},"children":[{"type":"text","value":"b:"}]},{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-842ff4"},"children":[{"type":"text","value":"2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-604512"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"123456"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"123456"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"123456s"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ndaf"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"123456"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"heloo d\nd\nasdfsd\nsfas\ndf\nsd\nf"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"el-支持的事件设置"},"children":[{"type":"text","value":"el- 支持的事件设置"}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"方法名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"参数"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"方法名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"参数"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"方法名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"参数"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"方法名"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"参数"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdfffffffffffffffff ffffffffffffffffff"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdfffffffffffffffffffffffffffffffffff"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdfffffffffffffffffffffffffffffffffff"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdfffffffffffffffffffffffffffffffffff"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"kk"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"asdf"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"display-属性描述"},"children":[{"type":"text","value":"display 属性描述"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"定义"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"值"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Initial value"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"inline"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Applies to"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"all elements"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Inherited"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Computed value"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"as the specified value, except for positioned and floating elements and the root element. In both cases the computed value may be a keyword other than the one specified."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Animation type"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"discrete"}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ed2370{color:#D7BA7D}\n.ct-06a5b2{color:#F44747}\n.ct-95fdc0{color:#808080}\n.ct-842ff4{color:#B5CEA8}\n.ct-65786d{color:#4FC1FF}\n.ct-9d0c8d{color:#569CD6}\n.ct-642cb1{color:#4EC9B0}\n.ct-1e2d3c{color:#DCDCAA}\n.ct-8d04e0{color:#CE9178}\n.ct-aa6ea1{color:#9CDCFE}\n.ct-604512{color:#D4D4D4}\n.ct-2e0364{color:#C586C0}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"标题","depth":3,"text":"标题"},{"id":"标题-1","depth":2,"text":"标题","children":[{"id":"标题-3","depth":3,"text":"标题"}]},{"id":"标题-4","depth":2,"text":"标题"},{"id":"标题-6","depth":2,"text":"标题","children":[{"id":"标题-7","depth":3,"text":"标题"},{"id":"el-支持的事件设置","depth":3,"text":"el- 支持的事件设置"},{"id":"display-属性描述","depth":3,"text":"display 属性描述"}]}]}},"_type":"markdown","_id":"content:test.md","_source":"content","_file":"test.md","_extension":"md"},{"_path":"/tools/_dir","_dir":"tools","_draft":false,"_partial":true,"_locale":"zh-Hans","title":"工具","_id":"content:tools:_dir.yml","_type":"yaml","_source":"content","_file":"tools/_dir.yml","_extension":"yml"},{"_path":"/tools/douyin","_dir":"tools","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"抖音评论爬取","description":"抖音评论爬取","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"抖音评论爬取"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:tools:douyin.md","_source":"content","_file":"tools/douyin.md","_extension":"md"},{"_path":"/tools/unicodesearch","_dir":"tools","_draft":false,"_partial":false,"_locale":"zh-Hans","_empty":false,"title":"unicode 字符查询","description":"","body":{"type":"root","children":[{"type":"element","tag":"unicode-search","props":{},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:tools:unicodeSearch.md","_source":"content","_file":"tools/unicodeSearch.md","_extension":"md"}],"navigation":[{"title":"文章","_path":"/articles","children":[{"title":"Css","_path":"/articles/css","children":[{"title":"BFC,层叠上下文,级联层","_path":"/articles/css/bfcstackcascading"},{"title":"css 各种居中方法总结","_path":"/articles/css/csscenter"},{"title":"纯 css 实现数字自增的动画效果","_path":"/articles/css/csspropertyatrule"}]},{"title":"JavaScript","_path":"/articles/javascript","children":[{"title":"async/await 异步应用的常用场景","_path":"/articles/javascript/asyncawaitscene"},{"title":"柯里化在异步编程的应用","_path":"/articles/javascript/curryandasync"},{"title":"js 浮点数存储精度丢失原理","_path":"/articles/javascript/floatingpointlossprecision"},{"title":"es6 深入理解 Proxy 和 Reflect 这对影子兄弟","_path":"/articles/javascript/proxyandreflect"}]},{"title":"移动端","_path":"/articles/mobile","children":[{"title":"真的，移动端尺寸自适应与 dpr 无关","_path":"/articles/mobile/selfadaptiveanddpr"}]}]},{"title":"浏览器插件","_path":"/browser_plugins","children":[{"title":"修改网页信息","_path":"/browser_plugins/modifyingwebdata","children":[{"title":"安装","_path":"/browser_plugins/modifyingwebdata/install"},{"title":"使用说明","_path":"/browser_plugins/modifyingwebdata/readme"}]},{"title":"通用文字识别","_path":"/browser_plugins/universaltextrecognition","children":[{"title":"安装","_path":"/browser_plugins/universaltextrecognition/install"},{"title":"使用说明","_path":"/browser_plugins/universaltextrecognition/readme"}]}]},{"title":"首页","_path":"/"},{"title":"markdown","_path":"/test"},{"title":"工具","_path":"/tools","children":[{"title":"抖音评论爬取","_path":"/tools/douyin"},{"title":"unicode 字符查询","_path":"/tools/unicodesearch"}]}]}