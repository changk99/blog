<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>真的，移动端尺寸自适应与 dpr 无关</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="/js/theme.js"></script>
    <meta property="og:title" content="真的，移动端尺寸自适应与 dpr 无关" />
    <link rel="modulepreload" href="/articles/mobile/selfadaptiveanddpr/_payload.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.73671b33.js" />
    <link rel="preload" as="style" href="/_nuxt/entry.e02d53dd.css" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/AsideNav.3d22093b.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...slug_.271cc710.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentDoc.75602f47.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.d2a8361e.js" />
    <link
      rel="modulepreload"
      as="script"
      crossorigin
      href="/_nuxt/ContentRendererMarkdown.49e93fa9.js"
    />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.a7d28ec3.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.c5e878fe.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.d7b038e6.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.bb312eaf.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/Link.6c7650ab.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.5d71fd77.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.a4f2a55c.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.e75f8d62.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.7cb8d9b6.js" />
    <link rel="prefetch" as="image" type="image/jpeg" href="/_nuxt/changlishe.0913a958.jpg" />
    <link rel="prefetch" as="script" crossorigin href="/_nuxt/client-db.491a3b48.js" />
    <link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.e137027b.js" />
    <link rel="stylesheet" href="/_nuxt/entry.e02d53dd.css" />
    <style>
      .header {
        -webkit-box-pack: end;
        -ms-flex-pack: end;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        background-color: var(--blog-bg);
        background-image: linear-gradient(
          0deg,
          var(--blog-divider-light),
          var(--blog-divider-light) 1px,
          transparent 1px,
          transparent
        );
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        height: var(--window-top);
        justify-content: flex-end;
        position: sticky;
        top: 0;
        z-index: 100;
      }
      .header .item {
        cursor: pointer;
        margin-right: 12px;
      }
      @supports ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
        .header {
          -webkit-backdrop-filter: blur(6px);
          backdrop-filter: blur(6px);
          background-color: transparent;
        }
      }
      .container {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        min-height: calc(100% - var(--window-top));
      }
      .aside {
        background-color: var(--blog-bg);
        min-width: var(--aside-min-width);
      }
      .aside-stick {
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        max-height: calc(100vh - 64px);
        overflow: auto;
        padding-bottom: 50px;
        position: sticky;
        top: var(--window-top);
      }
      .main {
        -webkit-box-flex: 1;
        -ms-flex-positive: 1;
        flex-grow: 1;
        min-width: 0;
        padding: 1.5em;
      }
      .fade-enter-active,
      .fade-leave-active {
        -webkit-transition: all 0.2s;
        transition: all 0.2s;
      }
      .fade-enter-from,
      .fade-leave-to {
        opacity: 0;
      }
      .slide-enter-active {
        -webkit-transition: all 0.4s;
        transition: all 0.4s;
      }
      .slide-leave-active {
        -webkit-transition: all 0.2s;
        transition: all 0.2s;
      }
      .slide-enter-from {
        -webkit-transform: translateX(100%);
        transform: translateX(100%);
      }
      .slide-leave-to {
        -webkit-transform: translateX(-100%);
        transform: translateX(-100%);
      }
      #__nuxt {
        background-color: var(--blog-bg-soft);
      }
    </style>
    <style>
      .nav[data-v-7b359261] {
        cursor: auto;
        margin-top: -3px;
      }
      .nav-list[data-v-7b359261] {
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        justify-content: center;
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .nav-list a[data-v-7b359261] {
        color: var(--blog-text-1);
        font-size: 14px;
        text-decoration: none;
        white-space: nowrap;
      }
      .nav-item[data-v-7b359261] {
        margin: 0;
        padding: 0.1em 0.3em;
        position: relative;
      }
      .nav-item.active[data-v-7b359261],
      .nav-item[data-v-7b359261]:hover {
        color: var(--blog-brand-light);
      }
      .nav-item a[data-v-7b359261] {
        color: inherit;
      }
      .nav-item[data-v-7b359261]:before {
        border-bottom: 2px solid var(--blog-brand-light);
        content: '';
        height: 100%;
        left: 100%;
        position: absolute;
        top: 0;
        -webkit-transition: all 0.2s linear;
        transition: all 0.2s linear;
        width: 0;
        z-index: -1;
      }
      .nav-item[data-v-7b359261]:hover:before {
        left: 0;
        width: 100%;
      }
      .nav-item:hover ~ .nav-item[data-v-7b359261]:before {
        left: 0;
      }
    </style>
    <style>
      .theme-change[data-v-eea72278] {
        font-size: 0;
      }
      .theme-change .switch[data-v-eea72278] {
        background: var(--blog-bg-soft);
        border: 1px solid var(--blog-border-color-1);
        border-radius: 10px;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        cursor: pointer;
        display: inline-block;
        font-size: 16px;
        height: 20px;
        margin: 0;
        outline: none;
        position: relative;
        -webkit-transition: border-color var(--transition-duration),
          background-color var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration) !important;
        width: 40px;
      }
      .theme-change .switch[data-v-eea72278]:hover {
        border-color: var(--blog-border-color-3);
      }
      .theme-change .switch__action[data-v-eea72278] {
        background-color: var(--blog-bg);
        border-radius: 50%;
        color: var(--blog-text-1);
        left: 1px;
        position: absolute;
        top: 1px;
        -webkit-transform: translate(0);
        transform: translate(0);
        -webkit-transition: border-color var(--transition-duration),
          background-color var(--transition-duration), -webkit-transform var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration), -webkit-transform var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration), transform var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration), transform var(--transition-duration),
          -webkit-transform var(--transition-duration) !important;
      }
      .theme-change .switch__action[data-v-eea72278],
      .theme-change .switch__icon[data-v-eea72278] {
        height: 16px;
        width: 16px;
      }
      .theme-change .switch__icon[data-v-eea72278] {
        position: relative;
      }
      .theme-change .icon[data-v-eea72278] {
        left: 0;
        position: absolute;
        top: 0;
        -webkit-transition: color var(--transition-duration), opacity var(--transition-duration) !important;
        transition: color var(--transition-duration), opacity var(--transition-duration) !important;
      }
      .theme-change .dark-icon[data-v-eea72278] {
        opacity: 0;
      }
      .dark .switch__action[data-v-eea72278] {
        -webkit-transform: translate(20px);
        transform: translate(20px);
      }
      .dark .dark-icon[data-v-eea72278] {
        opacity: 1;
      }
      .dark .light-icon[data-v-eea72278] {
        opacity: 0;
      }
    </style>
    <style>
      .icon[data-v-d05f474b] {
        fill: currentColor;
      }
    </style>
    <style>
      .icon[data-v-8b73f5d5] {
        fill: currentColor;
      }
    </style>
    <style>
      .icon[data-v-1664b317] {
        display: inline-block;
        vertical-align: middle;
      }
    </style>
    <style>
      .aside-nav {
        --el-menu-item-height: 44px;
        --el-menu-base-level-padding: 20px;
        --el-menu-level-padding: 1em;
        --el-menu-sub-item-height: calc(var(--el-menu-item-height) - 6px);
        padding-top: 1em;
      }
      .aside-nav a {
        color: var(--blog-text-2);
        overflow: hidden;
        text-decoration: none;
        text-overflow: ellipsis;
      }
      .aside-nav a:hover {
        color: var(--blog-text-1);
      }
      .aside-nav a.router-link-active {
        color: var(--blog-brand-light);
      }
      .aside-nav .el-menu-item {
        cursor: auto;
        font-size: 12px;
        margin: 0;
      }
      .aside-nav .el-divider--horizontal {
        margin: 12px 0;
      }
    </style>
    <style>
      .content-doc[data-v-dfb18308] {
        padding-bottom: 4em;
      }
      .nav[data-v-dfb18308] {
        -webkit-box-pack: justify;
        -ms-flex-pack: justify;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        justify-content: space-between;
      }
      .nav .link[data-v-dfb18308] {
        color: var(--blog-brand-light);
        font-weight: bolder;
        line-height: 1.6;
        text-decoration: none;
        vertical-align: baseline;
        white-space: nowrap;
      }
      .nav .link .title[data-v-dfb18308] {
        display: inline-block;
        vertical-align: middle;
        white-space: normal;
      }
      .nav .link[data-v-dfb18308]:hover {
        color: var(--blog-brand-highlight);
      }
      .nav .link[data-v-dfb18308]:active {
        color: var(--blog-brand-light);
      }
      .nav .nav-item-before[data-v-dfb18308] {
        padding-right: 2em;
      }
      .nav .dir-title[data-v-dfb18308] {
        color: var(--blog-text-2);
        font-size: 14px;
      }
      .nav .nav-item-after .dir-title[data-v-dfb18308] {
        margin-right: 1em;
        text-align: right;
      }
      .nav .nav-item-before .dir-title[data-v-dfb18308] {
        margin-left: 1em;
      }
    </style>
    <style>
      .title[data-v-98ff1997] {
        color: var(--blog-text-h);
        font-size: var(--blog-font-size-h2);
        margin: 0.2em 0;
        padding-left: 0.2em;
      }
      .link[data-v-98ff1997] {
        color: inherit;
        text-decoration: none;
      }
      .symbol[data-v-98ff1997] {
        color: var(--blog-brand-light);
        opacity: 0;
      }
      .title:hover .symbol[data-v-98ff1997] {
        opacity: 1;
      }
    </style>
    <style>
      .prose-p[data-v-4aba2c1d] {
        padding: 0;
      }
    </style>
    <style>
      .prose-a {
        border-bottom: 1px dashed;
        font-weight: bolder;
        line-height: 1.6;
        padding: 0 0.2em 0.2em;
        position: relative;
        text-decoration: none;
        vertical-align: baseline;
      }
      .prose-a,
      .prose-a:visited {
        color: var(--blog-brand-light);
      }
      .prose-a:hover {
        color: var(--blog-brand-highlight);
      }
      .prose-a:active {
        color: var(--blog-brand-light);
      }
      .prose-a .external-icon {
        margin-left: -0.8em;
        opacity: 0;
        -webkit-transform: translate(0.8em, -0.8em);
        transform: translate(0.8em, -0.8em);
      }
      .prose-a:hover .external-icon {
        opacity: 1;
      }
    </style>
    <style>
      .icon[data-v-b5945cb7] {
        fill: currentColor;
      }
    </style>
    <style>
      .prose-code {
        background-color: var(--blog-gray-light-5);
        border: 1px solid var(--blog-border-color-3);
        border-radius: var(--blog-radius-2);
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        margin: 1em 0;
        padding: 1em;
        position: relative;
      }
      .prose-code.lang {
        background-color: var(--blog-black-regular);
        padding-bottom: 0;
        padding-right: 1.6em;
        padding-top: 1.8em;
      }
      .prose-code.lang .file-info {
        color: var(--blog-text-dark-2);
        font-size: 12px;
        position: absolute;
        right: 1em;
        top: 0.5em;
      }
      .prose-code.lang pre code {
        word-wrap: normal;
        white-space: pre;
      }
      .prose-code.no-lang {
        padding-bottom: 0.2em;
        padding-top: 1.2em;
      }
      .prose-code.no-lang pre {
        font-family: inherit;
      }
      .prose-code.no-lang pre code {
        font-family: inherit;
        padding-bottom: 0.8em;
        white-space: pre-wrap;
      }
      .prose-code.no-lang a {
        padding: 0 0.2em;
        position: relative;
        text-decoration: none;
        vertical-align: baseline;
      }
      .prose-code.no-lang a,
      .prose-code.no-lang a:visited {
        color: var(--blog-brand-light);
      }
      .prose-code.no-lang a:hover {
        color: var(--blog-brand-highlight);
      }
      .prose-code.no-lang a:active {
        color: var(--blog-brand-light);
      }
      .prose-code pre {
        margin: 0;
      }
      .prose-code pre code {
        display: inline-block;
        overflow: auto;
        padding-bottom: 1.5em;
        white-space: normal;
        width: 100%;
      }
      .prose-code .copy {
        bottom: 0.5em;
        color: var(--blog-text-dark-1);
        cursor: pointer;
        opacity: 0.5;
        position: absolute;
        right: 0.5em;
      }
      .prose-code:hover .copy {
        opacity: 1;
      }
      pre code .line {
        display: block;
        line-height: 1.6;
        min-height: 1rem;
      }
      .dark .prose-code.no-lang {
        background-color: var(--blog-black-regular);
      }
      .el-message--success.copy {
        --el-message-bg-color: var(--blog-bg-soft);
        --el-message-border-color: var(--blog-border-color-2);
        --el-message-text-color: var(--blog-text-2);
        white-space: nowrap;
        width: auto;
      }
      .prose-code ::-webkit-scrollbar {
        height: 8px;
        width: 10px;
      }
      .prose-code ::-webkit-scrollbar-track {
        background: var(--blog-black-soft);
        border-radius: 10px;
      }
      .prose-code ::-webkit-scrollbar-thumb {
        background: var(--blog-black-mute);
        border-radius: 10px;
      }
      .prose-code ::-webkit-scrollbar-thumb:hover {
        background: #646464;
        border-radius: 10px;
      }
      .prose-code ::-webkit-scrollbar-thumb:active {
        background: #444;
        border-radius: 10px;
      }
      @media screen and (max-width: 768px) {
        .prose-code ::-webkit-scrollbar {
          height: 2px;
          width: 2px;
        }
      }
    </style>
  </head>
  <body>
    <div id="__nuxt">
      <!--[-->
      <header class="header">
        <nav class="nav item" data-v-7b359261>
          <!--[-->
          <ul class="nav-list" data-v-7b359261>
            <!--[-->
            <li class="active nav-item" data-v-7b359261>
              <a href="/articles/css/bfcstackcascading" class="" data-v-7b359261>文章</a>
            </li>
            <li class="nav-item" data-v-7b359261>
              <a href="/browser_plugins/modifyingwebdata/install" class="" data-v-7b359261
                >浏览器插件</a
              >
            </li>
            <!--]-->
          </ul>
          <!--]-->
        </nav>
        <div class="theme-change item" title="切换主题" data-v-eea72278>
          <button
            role="switch"
            aria-label="切换暗色主题"
            aria-checked="false"
            class="switch"
            data-v-eea72278
          >
            <div class="switch__action" data-v-eea72278>
              <div class="switch__icon" data-v-eea72278>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="1em"
                  height="1em"
                  aria-hidden="true"
                  focusable="false"
                  viewbox="0 0 24 24"
                  class="icon dark-icon icon"
                  data-v-eea72278
                  data-v-d05f474b
                >
                  <path
                    d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"
                    data-v-d05f474b
                  ></path></svg
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="1em"
                  height="1em"
                  aria-hidden="true"
                  focusable="false"
                  viewbox="0 0 24 24"
                  class="icon light-icon icon"
                  data-v-eea72278
                  data-v-8b73f5d5
                >
                  <path
                    d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"
                    data-v-8b73f5d5
                  ></path>
                </svg>
              </div>
            </div>
          </button>
        </div>
        <div title="github 仓库" class="item">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            aria-hidden="true"
            role="img"
            class="icon"
            style=""
            width="1.8em"
            height="1.8em"
            viewBox="0 0 24 24"
            data-v-1664b317
          >
            <path
              fill="currentColor"
              d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"
            />
          </svg>
        </div>
        <span
          class="el-avatar el-avatar--circle avatar-home item"
          style="--el-avatar-size: 26px"
          title="首页"
          ><img src="/_nuxt/changlishe.0913a958.jpg" alt="首页" style="object-fit: cover"
        /></span>
      </header>
      <div class="container">
        <aside class="aside" style="">
          <div class="aside-stick">
            <nav class="nav">
              <ul
                role="menubar"
                style="--el-menu-level: 0"
                class="el-menu el-menu--vertical aside-nav"
              >
                <!--[--><!--]-->
                <div
                  class="el-divider el-divider--horizontal"
                  style="--el-border-style: solid"
                  role="separator"
                >
                  <!--v-if-->
                </div>
                <li class="el-menu-item" role="menuitem" tabindex="-1">
                  <!--[--><!--[--><a href="/test" class="">markdown</a
                  ><!--]--><!--[--><!--]--><!--]-->
                </li>
              </ul>
            </nav>
          </div>
        </aside>
        <main class="main">
          <div class="content-doc" data-v-dfb18308>
            <!--[-->
            <div>
              <h3 class="title" id="前言" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/mobile/selfadaptiveanddpr#前言"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->前言<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->做移动端自适应时可能很多人都对自适应和 dpr
                之间的关系产生疑问,也有一些人会疑虑比如我的自适应方案没有加 dpr
                会不会出问题,针对这些疑问我说一下我的见解,希望能解除你的担忧。<!--]-->
              </p>
              <h3 class="title" id="_1-什么是尺寸自适应" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/mobile/selfadaptiveanddpr#_1-什么是尺寸自适应"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->1. 什么是尺寸自适应<!--]--><span class="symbol" data-v-98ff1997
                    >#</span
                  ></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->首先说到自适应,可能在不同人眼里理解不同，特别与响应式的关系,在这里说一下我所理解的自适应,和其与响应式的区别。先说响应式设计,响应式设计表示在不同的屏幕尺寸下,都有良好的布局和内容表现,简单一点的说,就是一个页面可以适配多种不同尺寸的屏幕,而且看上去还是设计良好的。为了实现这个目的,可能会利用
                js 或者 css
                去动态改变布局的尺寸,在这个过程中会伴随元素尺寸的改变,布局的改变,甚至会把元素隐藏,比如在
                pc
                端显示的页面转到移动端就会这样。而自适应往往考虑的是另一个方面,就是希望页面的设计与设计稿的设计比例一致,这个也是做自适应的目的,在这个过程中针对不同的屏幕宽度元素的尺寸也会改变,但是一般不会有布局改变,和元素的隐藏,因为设计稿就这样。所以按照我以上的说法,那些按照
                css
                媒体查询写的自适应严格来说不叫自适应,因为断点之间会造成比例误差,而让误差少一点就得多插值。很明显使用
                css 媒体查询并不是做自适应的好方法,我们需要一种准确的方法来做这个事,这个时候 js
                就出来了,下面将会列举坊间流传甚广的淘宝方案和网易方案。<!--]-->
              </p>
              <h3 class="title" id="_2-淘宝方案" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/mobile/selfadaptiveanddpr#_2-淘宝方案"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->2. 淘宝方案<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->点这里可以看到淘宝方案具体的代码<a
                  href="https://github.com/huainanhai/flexible/blob/master/public/js/frame/flexible.debug.js"
                  rel="nofollow"
                  target="_blank"
                  class="prose-a"
                  ><!--[-->flexible<!--]--><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="0.8em"
                    height="0.8em"
                    aria-hidden="true"
                    focusable="false"
                    viewbox="0 0 24 24"
                    class="icon external-icon"
                    data-v-b5945cb7
                  >
                    <path
                      fill="currentColor"
                      d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z"
                      data-v-b5945cb7
                    ></path></svg></a
                ><!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->当然具体的代码是做了很多的边界处理和兼容处理的,但是核心可以浓缩为以下代码<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-17181c">(</span><span class="ct-8e84bc">function</span><span class="ct-17181c"> () {
</span></span><span class="line" line="2"><span class="ct-17181c">    </span><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">dpr</span><span class="ct-17181c"> = </span><span class="ct-089647">window</span><span class="ct-17181c">.</span><span class="ct-089647">devicePixelRatio</span><span class="ct-17181c">;
</span></span><span class="line" line="3"><span class="ct-17181c">    </span><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">meta</span><span class="ct-17181c"> = </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-e45a34">createElement</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;meta&#39;</span><span class="ct-17181c">);
</span></span><span class="line" line="4"><span class="ct-17181c">    </span><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">scale</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">1</span><span class="ct-17181c"> / </span><span class="ct-089647">dpr</span><span class="ct-17181c">;
</span></span><span class="line" line="5"><span class="ct-17181c">    </span><span class="ct-089647">meta</span><span class="ct-17181c">.</span><span class="ct-e45a34">setAttribute</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;name&#39;</span><span class="ct-17181c">, </span><span class="ct-d9ac8a">&#39;viewport&#39;</span><span class="ct-17181c">);
</span></span><span class="line" line="6"><span class="ct-17181c">    </span><span class="ct-089647">meta</span><span class="ct-17181c">.</span><span class="ct-e45a34">setAttribute</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;content&#39;</span><span class="ct-17181c">, </span><span class="ct-d9ac8a">&#39;width=device-width, user-scalable=no, initial-scale=&#39;</span><span class="ct-17181c"> + </span><span class="ct-089647">scale</span><span class="ct-17181c"> + </span><span class="ct-d9ac8a">&#39;, maximum-scale=&#39;</span><span class="ct-17181c"> + </span><span class="ct-089647">scale</span><span class="ct-17181c"> + </span><span class="ct-d9ac8a">&#39;, minimum-scale=&#39;</span><span class="ct-17181c"> + </span><span class="ct-089647">scale</span><span class="ct-17181c">);
</span></span><span class="line" line="7"><span class="ct-17181c">    </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-e45a34">getElementsByTagName</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;head&#39;</span><span class="ct-17181c">)[</span><span class="ct-4cd5ea">0</span><span class="ct-17181c">].</span><span class="ct-e45a34">appendChild</span><span class="ct-17181c">(</span><span class="ct-089647">meta</span><span class="ct-17181c">);
</span></span><span class="line" line="8"><span class="ct-17181c">    </span><span class="ct-650c9b">// 动态设置的缩放大小会影响布局视口的尺寸
</span></span><span class="line" line="9"><span class="ct-17181c">      </span><span class="ct-8e84bc">function</span><span class="ct-17181c"> </span><span class="ct-e45a34">resize</span><span class="ct-17181c">() {
</span></span><span class="line" line="10"><span class="ct-17181c">      </span><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">deviceWidth</span><span class="ct-17181c">  = </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-089647">documentElement</span><span class="ct-17181c">.</span><span class="ct-089647">clientWidth</span><span class="ct-17181c">;
</span></span><span class="line" line="11"><span class="ct-17181c">      </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-089647">documentElement</span><span class="ct-17181c">.</span><span class="ct-089647">style</span><span class="ct-17181c">.</span><span class="ct-089647">fontSize</span><span class="ct-17181c"> = (</span><span class="ct-089647">deviceWidth</span><span class="ct-17181c"> / </span><span class="ct-4cd5ea">10</span><span class="ct-17181c">) +</span><span class="ct-d9ac8a">&#39;px&#39;</span><span class="ct-17181c">;
</span></span><span class="line" line="12"><span class="ct-17181c">         }
</span></span><span class="line" line="13"><span class="ct-17181c">    </span><span class="ct-e45a34">resize</span><span class="ct-17181c">();
</span></span><span class="line" line="14"><span class="ct-17181c">    </span><span class="ct-089647">window</span><span class="ct-17181c">.</span><span class="ct-089647">onresize</span><span class="ct-17181c"> = </span><span class="ct-089647">resize</span><span class="ct-17181c">;
</span></span><span class="line" line="15"><span class="ct-17181c">  })()</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->这段代码放在浏览器上就能做到自适应了,他的过程是先获取设备的 dpr,所谓的 dpr
                就是设备像素比,什么是设备像素比呢,就是单位尺寸内,设备物理像素的个数除以设备独立像素的大小,物理像素就是手机屏幕上一个一个的发光的点,大小是固定的,独立像素也叫做逻辑像素,css
                设置的像素大小就是逻辑像素,对于 dpr 等于 2 的手机屏幕,设置 css 宽度为
                1px,其实覆盖的是 2 个设备物理像素。回到正题,拿到 dpr 后,通过动态设置 meta 的
                viewport 值,进行对布局的缩放操作。这里有一个关键,就是设置 width=device-width 和
                initial-scale
                的大小,在描述两者的作用之前我们先要理解一个概念就是布局视口,布局视口在之前有一个别名叫做初始包含块,而在比较早的文献中初始包含块也叫做画布。理解画布可能比理解布局视口更简单,如果你按比例绘图,很多时候就要参照你所用画布的大小,比如设计师在
                750px 画了一个 200px 的正方形,如果你要在一张大小是 100cm
                的纸上画,你可能就要这样计算正方形的宽度了 100cm * 200 /
                750,可以看到这个计算中是没有用到
                dpr,你的笔触跨过多少个纸张分子,多少个原子根本就不影响我的绘图比例。我们的画画的过程就相当于设置
                css 的过程,css
                的尺寸依赖的就是布局视口的大小,而网页的布局视口大小在标准模式下可以这样获取<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-089647">documentElement</span><span class="ct-17181c">.</span><span class="ct-089647">clientWidth</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->而两个关键的元素设置 width=device-width,initial-scale =
                scale,做的事情就是先把布局视口放大 dpr
                倍,然后整体缩放相应倍数以适应设备尺寸。这个也很容易验证在控制台打印布局视口大小就行了<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[--><img
                  src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444eb6cffc5c8b~tplv-t2oaga2asx-image.image"
                  alt="图片"
                />
                这是按照 640px 设计规范,设计图上标注 200px 元素大小,可以看出布局视口放大了 3
                倍,然后再整体缩放到设备屏幕大小,由于这里是证明这个过程其实与 dpr 无关,我现在把 scale
                的大小分别设置为 0.1 和 0.5<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">meta</span><span class="ct-17181c"> = </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-e45a34">createElement</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;meta&#39;</span><span class="ct-17181c">);
</span></span><span class="line" line="2"><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">scale</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">0.1</span><span class="ct-17181c">;
</span></span><span class="line" line="3"><span class="ct-089647">meta</span><span class="ct-17181c">.</span><span class="ct-e45a34">setAttribute</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;name&#39;</span><span class="ct-17181c">, </span><span class="ct-d9ac8a">&#39;viewport&#39;</span><span class="ct-17181c">);</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[--><img
                  src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444ed132e70696~tplv-t2oaga2asx-image.image"
                  alt="0.1"
                /><!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">meta</span><span class="ct-17181c"> = </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-e45a34">createElement</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;meta&#39;</span><span class="ct-17181c">);
</span></span><span class="line" line="2"><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">scale</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">0.5</span><span class="ct-17181c">;
</span></span><span class="line" line="3"><span class="ct-089647">meta</span><span class="ct-17181c">.</span><span class="ct-e45a34">setAttribute</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;name&#39;</span><span class="ct-17181c">, </span><span class="ct-d9ac8a">&#39;viewport&#39;</span><span class="ct-17181c">);</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[--><img
                  src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444edd6d16eb1c~tplv-t2oaga2asx-image.image"
                  alt="0.5"
                /><!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->这里可以看到就算我设置 scale 不等于 1 / drp
                的大小也不妨碍我按设计图的比例画出元素 这里要注意两点,因为我是用 chrome
                模拟的,设置的时候发现几个问题<!--]-->
              </p>
              <ol>
                <!--[-->
                <li>
                  <!--[-->scale 的值如果小于 0.1 布局视口也只能放大 10 倍,也就是布局视口最多放大 10
                  倍<!--]-->
                </li>
                <li>
                  <!--[-->当 scale 的值大于 1
                  时布局视口并不会缩小,而且布局视口不再匹配设备宽度,这种情况实际不会出现。<!--]-->
                </li>
                <li>
                  <!--[-->如果你引入了 flexible.js
                  进行测试,要注意删除边界条件,因为缩放影响了布局视口大小,相应的边界条件会触发,导致误认为
                  dpr 与自适应有关<!--]-->
                </li>
                <!--]-->
              </ol>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->要做到自适应关键是让元素的尺寸与布局视口绑定关系,在这里虽然布局视口放大了,但并不影响这种绑定关系,这里淘宝方案把布局视口的宽度分割了十等份,每份的大小相当于布局宽度的十分之一,而把每份的大小分配给根元素的字体大小,元素尺寸就可以设置
                rem 单位来与布局视口绑定关系,以 200px 尺寸为例,他们比例映射是这样的<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->200px : 640px =&gt; xrem : 10rem<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->这里的 10rem 就是布局视口宽度,元素尺寸只要维持这个比例关系就行了,与 dpr
                是没有关系的<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->x= 10 * 200 / 640 = 3.125rem<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->这里的计算可能会费一点时间,也有一些插件可以辅助把 px 转为 rem 的
                但是方案是死的,人是活的,你只要把淘宝固有的十等分改一下就行了,比如设计稿是 640px 的
                改一下<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-089647">documentElement</span><span class="ct-17181c">.</span><span class="ct-089647">style</span><span class="ct-17181c">.</span><span class="ct-089647">fontSize</span><span class="ct-17181c"> = (</span><span class="ct-089647">deviceWidth</span><span class="ct-17181c"> / </span><span class="ct-4cd5ea">6.4</span><span class="ct-17181c">) +</span><span class="ct-d9ac8a">&#39;px&#39;</span><span class="ct-17181c">;</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d><!--[-->分了 6.4 等份<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->200px : 640px =&gt; xrem : 6.4rem<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->x 一看就知道是 2rem<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->流程： rem =&gt; 根元素字体大小 =&gt; 布局视口<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->当然也可以分割为 100 等份,这样方便为以后使用 vw 单位进行过渡<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->那么为什么淘宝要引入
                dpr,把布局放大再缩小呢,其中一点就是这个方案可以很好地解决 1px
                边框的问题,对于高清屏来说设置 1px 像素大小,其实横跨的是 dpr
                个设备像素,这样看起来线条不够细,与设计稿就产生出入,而通过布局放大再缩小的方案刚好就弥补了这个问题。但是随之而来也带来一个问题,看上面的截图我们看到字体大小发生了改变,在
                scale 设置为 0.1 时基本就看不见了,原因是一般我们的字体大小的设置不会使用
                rem,而是使用 px
                单位,这里的字体大小没有随布局视口的放大而增大,却随页面的整体缩放而缩小了,这里就得要针对不同的
                dpr 做响应的处理,在淘宝的代码中我们可以看到<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-089647">docEl</span><span class="ct-17181c">.</span><span class="ct-e45a34">setAttribute</span><span class="ct-17181c">(</span><span class="ct-d9ac8a">&#39;data-dpr&#39;</span><span class="ct-17181c">, </span><span class="ct-089647">dpr</span><span class="ct-17181c">);</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->就是通过在根元素上挂载 dpr 信息,然后设置相应的 css 属性例如<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">css</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-17181c">[</span><span class="ct-089647">data-dpr</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">2</span><span class="ct-17181c">] </span><span class="ct-248c30">div</span><span class="ct-17181c">{
</span></span><span class="line" line="2"><span class="ct-17181c">    </span><span class="ct-089647">font-size</span><span class="ct-17181c">: </span><span class="ct-4cd5ea">32px
</span></span><span class="line" line="3"><span class="ct-17181c">}
</span></span><span class="line" line="4"><span class="ct-17181c">[</span><span class="ct-089647">data-dpr</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">3</span><span class="ct-17181c">] </span><span class="ct-248c30">div</span><span class="ct-17181c">{
</span></span><span class="line" line="5"><span class="ct-17181c">    </span><span class="ct-089647">font-size</span><span class="ct-17181c">: </span><span class="ct-4cd5ea">48px
</span></span><span class="line" line="6"><span class="ct-17181c">}</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->特别对于安卓手机,各种神奇的 dpr,如果每个都这样设置将会是灾难
                所以淘宝非常聪明<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-17181c"> </span><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">isAndroid</span><span class="ct-17181c"> = </span><span class="ct-089647">win</span><span class="ct-17181c">.</span><span class="ct-089647">navigator</span><span class="ct-17181c">.</span><span class="ct-089647">appVersion</span><span class="ct-17181c">.</span><span class="ct-e45a34">match</span><span class="ct-17181c">(</span><span class="ct-a84f25">/android/</span><span class="ct-8e84bc">gi</span><span class="ct-17181c">);
</span></span><span class="line" line="2"><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">isIPhone</span><span class="ct-17181c"> = </span><span class="ct-089647">win</span><span class="ct-17181c">.</span><span class="ct-089647">navigator</span><span class="ct-17181c">.</span><span class="ct-089647">appVersion</span><span class="ct-17181c">.</span><span class="ct-e45a34">match</span><span class="ct-17181c">(</span><span class="ct-a84f25">/iphone/</span><span class="ct-8e84bc">gi</span><span class="ct-17181c">);
</span></span><span class="line" line="3"><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">devicePixelRatio</span><span class="ct-17181c"> = </span><span class="ct-089647">win</span><span class="ct-17181c">.</span><span class="ct-089647">devicePixelRatio</span><span class="ct-17181c">;
</span></span><span class="line" line="4"><span class="ct-c7e5ec">if</span><span class="ct-17181c"> (</span><span class="ct-089647">isIPhone</span><span class="ct-17181c">) {
</span></span><span class="line" line="5"><span class="ct-17181c">    </span><span class="ct-650c9b">// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案
</span></span><span class="line" line="6"><span class="ct-17181c">    </span><span class="ct-c7e5ec">if</span><span class="ct-17181c"> (</span><span class="ct-089647">devicePixelRatio</span><span class="ct-17181c"> &gt;= </span><span class="ct-4cd5ea">3</span><span class="ct-17181c"> &amp;&amp; (!</span><span class="ct-089647">dpr</span><span class="ct-17181c"> || </span><span class="ct-089647">dpr</span><span class="ct-17181c"> &gt;= </span><span class="ct-4cd5ea">3</span><span class="ct-17181c">)) {                
</span></span><span class="line" line="7"><span class="ct-17181c">        </span><span class="ct-089647">dpr</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">3</span><span class="ct-17181c">;
</span></span><span class="line" line="8"><span class="ct-17181c">    } </span><span class="ct-c7e5ec">else</span><span class="ct-17181c"> </span><span class="ct-c7e5ec">if</span><span class="ct-17181c"> (</span><span class="ct-089647">devicePixelRatio</span><span class="ct-17181c"> &gt;= </span><span class="ct-4cd5ea">2</span><span class="ct-17181c"> &amp;&amp; (!</span><span class="ct-089647">dpr</span><span class="ct-17181c"> || </span><span class="ct-089647">dpr</span><span class="ct-17181c"> &gt;= </span><span class="ct-4cd5ea">2</span><span class="ct-17181c">)){
</span></span><span class="line" line="9"><span class="ct-17181c">        </span><span class="ct-089647">dpr</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">2</span><span class="ct-17181c">;
</span></span><span class="line" line="10"><span class="ct-17181c">    } </span><span class="ct-c7e5ec">else</span><span class="ct-17181c"> {
</span></span><span class="line" line="11"><span class="ct-17181c">        </span><span class="ct-089647">dpr</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">1</span><span class="ct-17181c">;
</span></span><span class="line" line="12"><span class="ct-17181c">    }
</span></span><span class="line" line="13"><span class="ct-17181c">} </span><span class="ct-c7e5ec">else</span><span class="ct-17181c"> {
</span></span><span class="line" line="14"><span class="ct-17181c">    </span><span class="ct-650c9b">// 其他设备下，仍旧使用1倍的方案
</span></span><span class="line" line="15"><span class="ct-17181c">    </span><span class="ct-089647">dpr</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">1</span><span class="ct-17181c">;
</span></span><span class="line" line="16"><span class="ct-17181c">}
</span></span><span class="line" line="17"><span class="ct-089647">scale</span><span class="ct-17181c"> = </span><span class="ct-4cd5ea">1</span><span class="ct-17181c"> / </span><span class="ct-089647">dpr</span><span class="ct-17181c">;</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->够简单直接,安卓高清屏是不存在的, 但是其实影响也不大,就是安卓屏的 1px
                线条粗一点而已<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->如果除了要做自适应还要做响应式,那也得像上面设置字体一样一个一个设置,因为 css
                媒体查询也是针对布局视口尺寸的。对于淘宝他们来说,肯定有一套工程化的方案来解决这种技术难题,对于遇到这个坑的伙伴估计得自已想办法了,预处理器是必不可少的。
                从前面可以知道淘宝引入 dpr 并不是为了做自适应的,而是为了解决 1px
                问题的,当然也引入了其他难题,既然如此,放弃解决 1px
                问题,不就简单得多,网易方案就是这么做的。<!--]-->
              </p>
              <h3 class="title" id="_3网易方案" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/mobile/selfadaptiveanddpr#_3网易方案"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->3.网易方案<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->去除了边界处理和兼容处理，由于没有动态设置 meta 所以要在 head 中引入<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">html</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-17181c"> </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">meta</span><span class="ct-17181c"> </span><span class="ct-089647">name</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;viewport&quot;</span><span class="ct-17181c"> </span><span class="ct-089647">content</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span><span class="ct-26d87a">&gt;</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-17181c"> (</span><span class="ct-8e84bc">function</span><span class="ct-17181c"> () {
</span></span><span class="line" line="2"><span class="ct-17181c">    </span><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">dpr</span><span class="ct-17181c"> = </span><span class="ct-089647">window</span><span class="ct-17181c">.</span><span class="ct-089647">devicePixelRatio</span><span class="ct-17181c">;
</span></span><span class="line" line="3"><span class="ct-17181c">    </span><span class="ct-8e84bc">function</span><span class="ct-17181c"> </span><span class="ct-e45a34">resize</span><span class="ct-17181c">() {
</span></span><span class="line" line="4"><span class="ct-17181c">    </span><span class="ct-8e84bc">var</span><span class="ct-17181c"> </span><span class="ct-089647">deviceWidth</span><span class="ct-17181c"> = </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-089647">documentElement</span><span class="ct-17181c">.</span><span class="ct-089647">clientWidth</span><span class="ct-17181c">;
</span></span><span class="line" line="5"><span class="ct-17181c">    </span><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-089647">documentElement</span><span class="ct-17181c">.</span><span class="ct-089647">style</span><span class="ct-17181c">.</span><span class="ct-089647">fontSize</span><span class="ct-17181c"> = (</span><span class="ct-089647">deviceWidth</span><span class="ct-17181c"> / </span><span class="ct-4cd5ea">6.4</span><span class="ct-17181c">) +</span><span class="ct-d9ac8a">&#39;px&#39;</span><span class="ct-17181c">;
</span></span><span class="line" line="6"><span class="ct-17181c">   }
</span></span><span class="line" line="7"><span class="ct-17181c">    </span><span class="ct-e45a34">resize</span><span class="ct-17181c">();
</span></span><span class="line" line="8"><span class="ct-17181c">    </span><span class="ct-089647">window</span><span class="ct-17181c">.</span><span class="ct-089647">onresize</span><span class="ct-17181c"> = </span><span class="ct-089647">resize</span><span class="ct-17181c">;
</span></span><span class="line" line="9"><span class="ct-17181c">  })()</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->网易方案没有引入 dpr 相关的,这也说明了移动端自适应与 dpr 是无关的<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[--><img
                  src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444f837fa7be33~tplv-t2oaga2asx-image.image"
                  alt="0.6"
                /><!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->从图片中可以看出和淘宝方案的区别,布局视口没有放大,整个页面也没有缩放,但是并不影响与设计图的比例<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->200px : 640px =&gt; xrem : 6.4rem<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->x= 2rem<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->流程: rem =&gt; 根元素的大小 =&gt; 布局视口<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->既然自适应与 dpr 无关那么就可以扩展出很多方案了<!--]-->
              </p>
              <h3 class="title" id="_4-其他方案" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/mobile/selfadaptiveanddpr#_4-其他方案"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->4. 其他方案<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->1.在布局视口等于设备宽度时,直接把根元素字体大小绑定到设备宽度大小上<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-089647">document</span><span class="ct-17181c">.</span><span class="ct-089647">documentElement</span><span class="ct-17181c">.</span><span class="ct-089647">style</span><span class="ct-17181c">.</span><span class="ct-089647">fontSize</span><span class="ct-17181c"> = (</span><span class="ct-089647">screen</span><span class="ct-17181c">.</span><span class="ct-089647">width</span><span class="ct-17181c">/ </span><span class="ct-4cd5ea">6.4</span><span class="ct-17181c">) +</span><span class="ct-d9ac8a">&#39;px&#39;</span><span class="ct-17181c">;</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->这里有关相关的文章
                <a
                  href="https://www.zhangxinxu.com/wordpress/2016/06/pseudo-response-layout-base-on-screen-width/"
                  rel="nofollow"
                  target="_blank"
                  class="prose-a"
                  ><!--[-->基于screen.width的伪响应式开发<!--]--><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="0.8em"
                    height="0.8em"
                    aria-hidden="true"
                    focusable="false"
                    viewbox="0 0 24 24"
                    class="icon external-icon"
                    data-v-b5945cb7
                  >
                    <path
                      fill="currentColor"
                      d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z"
                      data-v-b5945cb7
                    ></path></svg></a
                ><!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->2.直接定死布局视口<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">html</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-26d87a">&lt;!</span><span class="ct-8e84bc">DOCTYPE</span><span class="ct-17181c"> </span><span class="ct-089647">html</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="2"><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">html</span><span class="ct-17181c"> </span><span class="ct-089647">lang</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;zh-CN&quot;</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="3"><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">head</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="4"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">meta</span><span class="ct-17181c"> </span><span class="ct-089647">charset</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;UTF-8&quot;</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="5"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">meta</span><span class="ct-17181c"> </span><span class="ct-089647">http-equiv</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;X-UA-Compatible&quot;</span><span class="ct-17181c"> </span><span class="ct-089647">content</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;ie=edge&quot;</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="6"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">meta</span><span class="ct-17181c"> </span><span class="ct-089647">name</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;viewport&quot;</span><span class="ct-17181c"> </span><span class="ct-089647">content</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;width=640, user-scalable=no&quot;</span><span class="ct-26d87a">&gt;</span><span class="ct-17181c">//定死为设计稿的尺寸
</span></span><span class="line" line="7"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">meta</span><span class="ct-17181c"> </span><span class="ct-089647">name</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;renderer&quot;</span><span class="ct-17181c"> </span><span class="ct-089647">content</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;webkit&quot;</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="8"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">title</span><span class="ct-26d87a">&gt;</span><span class="ct-17181c">定死布局视口</span><span class="ct-26d87a">&lt;/</span><span class="ct-8e84bc">title</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="9"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">style</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="10"><span class="ct-17181c">    </span><span class="ct-248c30">html</span><span class="ct-17181c">, </span><span class="ct-248c30">body</span><span class="ct-17181c"> {
</span></span><span class="line" line="11"><span class="ct-17181c">      </span><span class="ct-089647">margin</span><span class="ct-17181c">: </span><span class="ct-4cd5ea">0
</span></span><span class="line" line="12"><span class="ct-17181c">    }
</span></span><span class="line" line="13"><span class="ct-17181c">    </span><span class="ct-248c30">div</span><span class="ct-17181c"> {
</span></span><span class="line" line="14"><span class="ct-17181c">      </span><span class="ct-089647">width</span><span class="ct-17181c">: </span><span class="ct-4cd5ea">200px</span><span class="ct-17181c">;
</span></span><span class="line" line="15"><span class="ct-17181c">      </span><span class="ct-089647">height</span><span class="ct-17181c">: </span><span class="ct-4cd5ea">200px</span><span class="ct-17181c">;
</span></span><span class="line" line="16"><span class="ct-17181c">      </span><span class="ct-089647">background</span><span class="ct-17181c">: </span><span class="ct-d9ac8a">red</span><span class="ct-17181c">;
</span></span><span class="line" line="17"><span class="ct-17181c">    }
</span></span><span class="line" line="18"><span>
</span></span><span class="line" line="19"><span class="ct-17181c">    </span><span class="ct-248c30">body</span><span class="ct-17181c"> {
</span></span><span class="line" line="20"><span class="ct-17181c">      </span><span class="ct-089647">background</span><span class="ct-17181c">: </span><span class="ct-d9ac8a">blue</span><span class="ct-17181c">;
</span></span><span class="line" line="21"><span class="ct-17181c">    }
</span></span><span class="line" line="22"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;/</span><span class="ct-8e84bc">style</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="23"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">script</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="24"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;/</span><span class="ct-8e84bc">script</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="25"><span class="ct-26d87a">&lt;/</span><span class="ct-8e84bc">head</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="26"><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">body</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="27"><span class="ct-17181c">  </span><span class="ct-26d87a">&lt;</span><span class="ct-8e84bc">div</span><span class="ct-17181c"> </span><span class="ct-089647">id</span><span class="ct-17181c">=</span><span class="ct-d9ac8a">&quot;size200px&quot;</span><span class="ct-26d87a">&gt;</span><span class="ct-17181c">元素大小200px</span><span class="ct-26d87a">&lt;/</span><span class="ct-8e84bc">div</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="28"><span class="ct-26d87a">&lt;/</span><span class="ct-8e84bc">body</span><span class="ct-26d87a">&gt;
</span></span><span class="line" line="29"><span>
</span></span><span class="line" line="30"><span class="ct-26d87a">&lt;/</span><span class="ct-8e84bc">html</span><span class="ct-26d87a">&gt;</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[--><img
                  src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444fac35b57970~tplv-t2oaga2asx-image.image"
                  alt="0.001"
                /><!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->不用 rem 单位,不用设置 js,但是布局视口定死后,就不能用 css
                媒体查询做响应式了,从这里也可以看出 viewport
                属性的作用,就是让布局视口通过缩放来适配屏幕宽度,width=device.width
                仅仅是让布局视口初始大小等于设备宽度,后面设置的initial-scale
                是用来缩放布局视口大小,而且默认是布局视口初始大小等于设备宽度,也就是所谓的理想视口,换个说法就是如果你设置了
                initial-scale 你可以不用设置 width=device.width 了,淘宝方案你把 width=device.width
                去掉,并不会影响自适应过程,加上主要是防止一些不按规范的浏览器出现兼容问题。如果还不能理解
                viewport 的作用,那么可以参考 svg 中的 viewport 和 viewBox 的关系，原理是一样的。<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->3.使用新出单位 vw, vw 就是专门为自适应而出现的,100vw
                就是布局视口的宽度,非常厉害,你也不用设置 js 了<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->200px: 640px =&gt; xvw : 100vw<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->x=200 * 100 / 640 = 31.25vw<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->流程: vw =&gt; 布局视口<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d><!--[-->看一下兼容性<!--]--></p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[--><img
                  src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444fc469953bd0~tplv-t2oaga2asx-image.image"
                  alt
                /><!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->兼容还可以,这里也有相关的资料<a
                  href="https://www.w3cplus.com/css/taobao-2018-year.html"
                  rel="nofollow"
                  target="_blank"
                  class="prose-a"
                  ><!--[-->
                  分享手淘过年项目中采用到的前端技术<!--]--><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="0.8em"
                    height="0.8em"
                    aria-hidden="true"
                    focusable="false"
                    viewbox="0 0 24 24"
                    class="icon external-icon"
                    data-v-b5945cb7
                  >
                    <path
                      fill="currentColor"
                      d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z"
                      data-v-b5945cb7
                    ></path></svg></a
                ><!--]-->
              </p>
              <h3 class="title" id="总结" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/mobile/selfadaptiveanddpr#总结"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->总结<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->移动端尺寸自适应与 dpr 无关,除了淘宝方案外,其他方案都得处理 1px
                的问题,但也减少针对不同 dpr
                设备做响应式处理的麻烦,而且其中也没有一种一劳永逸的方案能解决全部问题。而作为新出来的单位
                vw,是时候该入坑了<!--]-->
              </p>
              <h3 class="title" id="参考文章" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/mobile/selfadaptiveanddpr#参考文章"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->参考文章<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <div class="no-lang prose-code">
                <div class="file-info"></div>
                <!--[-->
                <pre><code><span class="line" line="1"><span>1. 张鑫旭 [基于 screen.width 的伪响应式开发](https://www.zhangxinxu.com/wordpress/2016/06/pseudo-response-layout-base-on-screen-width/)
</span></span><span class="line" line="2"><span>
</span></span><span class="line" line="3"><span>2. 大漠 [分享手淘过年项目中采用到的前端技术](https://www.w3cplus.com/css/taobao-2018-year.html)
</span></span><span class="line" line="4"><span>
</span></span><span class="line" line="5"><span>3. [fleible](https://github.com/huainanhai/flexible/blob/master/public/js/frame/flexible.debug.js)</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <style>
                .ct-26d87a {
                  color: #808080;
                }
                .ct-c7e5ec {
                  color: #c586c0;
                }
                .ct-a84f25 {
                  color: #d16969;
                }
                .ct-248c30 {
                  color: #d7ba7d;
                }
                .ct-650c9b {
                  color: #6a9955;
                }
                .ct-4cd5ea {
                  color: #b5cea8;
                }
                .ct-d9ac8a {
                  color: #ce9178;
                }
                .ct-e45a34 {
                  color: #dcdcaa;
                }
                .ct-089647 {
                  color: #9cdcfe;
                }
                .ct-8e84bc {
                  color: #569cd6;
                }
                .ct-17181c {
                  color: #d4d4d4;
                }
              </style>
            </div>
            <!--]-->
            <nav class="nav" data-v-dfb18308>
              <div class="nav-item nav-item-before" data-v-dfb18308>
                <div class="dir-title" data-v-dfb18308></div>
                <a href="/articles/javascript/proxyandreflect" class="link" data-v-dfb18308
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    data-v-dfb18308
                    style="transform: scale(-1, 1)"
                    width="1em"
                    height="1em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="m12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"
                    /></svg
                  ><span class="title" data-v-dfb18308
                    >es6 深入理解 Proxy 和 Reflect 这对影子兄弟</span
                  ></a
                >
              </div>
              <div class="nav-item nav-item-after" data-v-dfb18308>
                <div class="dir-title" data-v-dfb18308></div>
                <!---->
              </div>
            </nav>
          </div>
        </main>
      </div>
      <div
        class="nuxt-loading-indicator"
        style="
          position: fixed;
          top: 0;
          right: 0;
          left: 0;
          pointer-events: none;
          width: auto;
          height: 3px;
          opacity: 0;
          background: repeating-linear-gradient(to right, #00dc82 0%, #34cdfe 50%, #0047e1 100%);
          background-size: Infinity% auto;
          transform: scaleX(0%);
          transform-origin: left;
          transition: transform 0.1s, height 0.4s, opacity 0.4s;
          z-index: 999999;
        "
      ></div>
      <!--]-->
    </div>
    <script type="module">
      import p from '/articles/mobile/selfadaptiveanddpr/_payload.js';
      window.__NUXT__ = {
        ...p,
        ...(function (a, b, c, d, e, f) {
          return {
            state: {
              $sicons: {
                'mdi:github': {
                  left: b,
                  top: b,
                  width: c,
                  height: c,
                  rotate: b,
                  vFlip: a,
                  hFlip: a,
                  body: '\u003Cpath fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"\u002F\u003E'
                },
                'ic:baseline-arrow-forward': {
                  left: b,
                  top: b,
                  width: c,
                  height: c,
                  rotate: b,
                  vFlip: a,
                  hFlip: a,
                  body: '\u003Cpath fill="currentColor" d="m12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"\u002F\u003E'
                },
                'material-symbols:copy-all-rounded': {
                  left: b,
                  top: b,
                  width: c,
                  height: c,
                  rotate: b,
                  vFlip: a,
                  hFlip: a,
                  body: '\u003Cpath fill="currentColor" d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"\u002F\u003E'
                }
              }
            },
            _errors: { 'content-navigation-8C37fagqQL': e, 'content-query-3Vt2u4kWb1': e },
            serverRendered: true,
            prerenderedAt: 1685447131064,
            config: {
              public: {
                content: {
                  locales: [f],
                  defaultLocale: f,
                  integrity: 1685446921222,
                  experimental: { stripQueryParameters: a, clientDB: a, advancedIgnoresPattern: a },
                  api: { baseURL: '\u002Fapi\u002F_content' },
                  navigation: { fields: [] },
                  tags: {
                    p: 'prose-p',
                    a: 'prose-a',
                    blockquote: 'prose-blockquote',
                    'code-inline': 'prose-code-inline',
                    code: 'prose-code',
                    em: 'prose-em',
                    h1: 'prose-h1',
                    h2: 'prose-h2',
                    h3: 'prose-h3',
                    h4: 'prose-h4',
                    h5: 'prose-h5',
                    h6: 'prose-h6',
                    hr: 'prose-hr',
                    img: 'prose-img',
                    ul: 'prose-ul',
                    ol: 'prose-ol',
                    li: 'prose-li',
                    strong: 'prose-strong',
                    table: 'prose-table',
                    thead: 'prose-thead',
                    tbody: 'prose-tbody',
                    td: 'prose-td',
                    th: 'prose-th',
                    tr: 'prose-tr'
                  },
                  highlight: { theme: 'dark-plus' },
                  wsUrl: d,
                  documentDriven: a,
                  host: d,
                  trailingSlash: a,
                  anchorLinks: { depth: 4, exclude: [1] }
                }
              },
              app: { baseURL: '\u002F', buildAssetsDir: '\u002F_nuxt\u002F', cdnURL: d }
            }
          };
        })(false, 0, 24, '', null, 'zh-Hans')
      };
    </script>
    <script type="module" src="/_nuxt/entry.73671b33.js" crossorigin></script>
  </body>
</html>
