<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>es6 深入理解 Proxy 和 Reflect 这对影子兄弟</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="/js/theme.js"></script>
    <meta property="og:title" content="es6 深入理解 Proxy 和 Reflect 这对影子兄弟" />
    <link rel="modulepreload" href="/articles/javascript/proxyandreflect/_payload.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.73671b33.js" />
    <link rel="preload" as="style" href="/_nuxt/entry.e02d53dd.css" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/AsideNav.3d22093b.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...slug_.271cc710.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentDoc.75602f47.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.d2a8361e.js" />
    <link
      rel="modulepreload"
      as="script"
      crossorigin
      href="/_nuxt/ContentRendererMarkdown.49e93fa9.js"
    />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.a7d28ec3.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.c5e878fe.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.d7b038e6.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.bb312eaf.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/Link.6c7650ab.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.4424a51d.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.5d71fd77.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.b2f1f237.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.7cb8d9b6.js" />
    <link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.e095d925.js" />
    <link rel="prefetch" as="image" type="image/jpeg" href="/_nuxt/changlishe.0913a958.jpg" />
    <link rel="prefetch" as="script" crossorigin href="/_nuxt/client-db.491a3b48.js" />
    <link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.e137027b.js" />
    <link rel="stylesheet" href="/_nuxt/entry.e02d53dd.css" />
    <style>
      .header {
        -webkit-box-pack: end;
        -ms-flex-pack: end;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        background-color: var(--blog-bg);
        background-image: linear-gradient(
          0deg,
          var(--blog-divider-light),
          var(--blog-divider-light) 1px,
          transparent 1px,
          transparent
        );
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        height: var(--window-top);
        justify-content: flex-end;
        position: sticky;
        top: 0;
        z-index: 100;
      }
      .header .item {
        cursor: pointer;
        margin-right: 12px;
      }
      @supports ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
        .header {
          -webkit-backdrop-filter: blur(6px);
          backdrop-filter: blur(6px);
          background-color: transparent;
        }
      }
      .container {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        min-height: calc(100% - var(--window-top));
      }
      .aside {
        background-color: var(--blog-bg);
        min-width: var(--aside-min-width);
      }
      .aside-stick {
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        max-height: calc(100vh - 64px);
        overflow: auto;
        padding-bottom: 50px;
        position: sticky;
        top: var(--window-top);
      }
      .main {
        -webkit-box-flex: 1;
        -ms-flex-positive: 1;
        flex-grow: 1;
        min-width: 0;
        padding: 1.5em;
      }
      .fade-enter-active,
      .fade-leave-active {
        -webkit-transition: all 0.2s;
        transition: all 0.2s;
      }
      .fade-enter-from,
      .fade-leave-to {
        opacity: 0;
      }
      .slide-enter-active {
        -webkit-transition: all 0.4s;
        transition: all 0.4s;
      }
      .slide-leave-active {
        -webkit-transition: all 0.2s;
        transition: all 0.2s;
      }
      .slide-enter-from {
        -webkit-transform: translateX(100%);
        transform: translateX(100%);
      }
      .slide-leave-to {
        -webkit-transform: translateX(-100%);
        transform: translateX(-100%);
      }
      #__nuxt {
        background-color: var(--blog-bg-soft);
      }
    </style>
    <style>
      .nav[data-v-7b359261] {
        cursor: auto;
        margin-top: -3px;
      }
      .nav-list[data-v-7b359261] {
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        justify-content: center;
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .nav-list a[data-v-7b359261] {
        color: var(--blog-text-1);
        font-size: 14px;
        text-decoration: none;
        white-space: nowrap;
      }
      .nav-item[data-v-7b359261] {
        margin: 0;
        padding: 0.1em 0.3em;
        position: relative;
      }
      .nav-item.active[data-v-7b359261],
      .nav-item[data-v-7b359261]:hover {
        color: var(--blog-brand-light);
      }
      .nav-item a[data-v-7b359261] {
        color: inherit;
      }
      .nav-item[data-v-7b359261]:before {
        border-bottom: 2px solid var(--blog-brand-light);
        content: '';
        height: 100%;
        left: 100%;
        position: absolute;
        top: 0;
        -webkit-transition: all 0.2s linear;
        transition: all 0.2s linear;
        width: 0;
        z-index: -1;
      }
      .nav-item[data-v-7b359261]:hover:before {
        left: 0;
        width: 100%;
      }
      .nav-item:hover ~ .nav-item[data-v-7b359261]:before {
        left: 0;
      }
    </style>
    <style>
      .theme-change[data-v-eea72278] {
        font-size: 0;
      }
      .theme-change .switch[data-v-eea72278] {
        background: var(--blog-bg-soft);
        border: 1px solid var(--blog-border-color-1);
        border-radius: 10px;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        cursor: pointer;
        display: inline-block;
        font-size: 16px;
        height: 20px;
        margin: 0;
        outline: none;
        position: relative;
        -webkit-transition: border-color var(--transition-duration),
          background-color var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration) !important;
        width: 40px;
      }
      .theme-change .switch[data-v-eea72278]:hover {
        border-color: var(--blog-border-color-3);
      }
      .theme-change .switch__action[data-v-eea72278] {
        background-color: var(--blog-bg);
        border-radius: 50%;
        color: var(--blog-text-1);
        left: 1px;
        position: absolute;
        top: 1px;
        -webkit-transform: translate(0);
        transform: translate(0);
        -webkit-transition: border-color var(--transition-duration),
          background-color var(--transition-duration), -webkit-transform var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration), -webkit-transform var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration), transform var(--transition-duration) !important;
        transition: border-color var(--transition-duration),
          background-color var(--transition-duration), transform var(--transition-duration),
          -webkit-transform var(--transition-duration) !important;
      }
      .theme-change .switch__action[data-v-eea72278],
      .theme-change .switch__icon[data-v-eea72278] {
        height: 16px;
        width: 16px;
      }
      .theme-change .switch__icon[data-v-eea72278] {
        position: relative;
      }
      .theme-change .icon[data-v-eea72278] {
        left: 0;
        position: absolute;
        top: 0;
        -webkit-transition: color var(--transition-duration), opacity var(--transition-duration) !important;
        transition: color var(--transition-duration), opacity var(--transition-duration) !important;
      }
      .theme-change .dark-icon[data-v-eea72278] {
        opacity: 0;
      }
      .dark .switch__action[data-v-eea72278] {
        -webkit-transform: translate(20px);
        transform: translate(20px);
      }
      .dark .dark-icon[data-v-eea72278] {
        opacity: 1;
      }
      .dark .light-icon[data-v-eea72278] {
        opacity: 0;
      }
    </style>
    <style>
      .icon[data-v-d05f474b] {
        fill: currentColor;
      }
    </style>
    <style>
      .icon[data-v-8b73f5d5] {
        fill: currentColor;
      }
    </style>
    <style>
      .icon[data-v-1664b317] {
        display: inline-block;
        vertical-align: middle;
      }
    </style>
    <style>
      .aside-nav {
        --el-menu-item-height: 44px;
        --el-menu-base-level-padding: 20px;
        --el-menu-level-padding: 1em;
        --el-menu-sub-item-height: calc(var(--el-menu-item-height) - 6px);
        padding-top: 1em;
      }
      .aside-nav a {
        color: var(--blog-text-2);
        overflow: hidden;
        text-decoration: none;
        text-overflow: ellipsis;
      }
      .aside-nav a:hover {
        color: var(--blog-text-1);
      }
      .aside-nav a.router-link-active {
        color: var(--blog-brand-light);
      }
      .aside-nav .el-menu-item {
        cursor: auto;
        font-size: 12px;
        margin: 0;
      }
      .aside-nav .el-divider--horizontal {
        margin: 12px 0;
      }
    </style>
    <style>
      .content-doc[data-v-dfb18308] {
        padding-bottom: 4em;
      }
      .nav[data-v-dfb18308] {
        -webkit-box-pack: justify;
        -ms-flex-pack: justify;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        justify-content: space-between;
      }
      .nav .link[data-v-dfb18308] {
        color: var(--blog-brand-light);
        font-weight: bolder;
        line-height: 1.6;
        text-decoration: none;
        vertical-align: baseline;
        white-space: nowrap;
      }
      .nav .link .title[data-v-dfb18308] {
        display: inline-block;
        vertical-align: middle;
        white-space: normal;
      }
      .nav .link[data-v-dfb18308]:hover {
        color: var(--blog-brand-highlight);
      }
      .nav .link[data-v-dfb18308]:active {
        color: var(--blog-brand-light);
      }
      .nav .nav-item-before[data-v-dfb18308] {
        padding-right: 2em;
      }
      .nav .dir-title[data-v-dfb18308] {
        color: var(--blog-text-2);
        font-size: 14px;
      }
      .nav .nav-item-after .dir-title[data-v-dfb18308] {
        margin-right: 1em;
        text-align: right;
      }
      .nav .nav-item-before .dir-title[data-v-dfb18308] {
        margin-left: 1em;
      }
    </style>
    <style>
      .title[data-v-98ff1997] {
        color: var(--blog-text-h);
        font-size: var(--blog-font-size-h2);
        margin: 0.2em 0;
        padding-left: 0.2em;
      }
      .link[data-v-98ff1997] {
        color: inherit;
        text-decoration: none;
      }
      .symbol[data-v-98ff1997] {
        color: var(--blog-brand-light);
        opacity: 0;
      }
      .title:hover .symbol[data-v-98ff1997] {
        opacity: 1;
      }
    </style>
    <style>
      .prose-p[data-v-4aba2c1d] {
        padding: 0;
      }
    </style>
    <style>
      .prose-a {
        border-bottom: 1px dashed;
        font-weight: bolder;
        line-height: 1.6;
        padding: 0 0.2em 0.2em;
        position: relative;
        text-decoration: none;
        vertical-align: baseline;
      }
      .prose-a,
      .prose-a:visited {
        color: var(--blog-brand-light);
      }
      .prose-a:hover {
        color: var(--blog-brand-highlight);
      }
      .prose-a:active {
        color: var(--blog-brand-light);
      }
      .prose-a .external-icon {
        margin-left: -0.8em;
        opacity: 0;
        -webkit-transform: translate(0.8em, -0.8em);
        transform: translate(0.8em, -0.8em);
      }
      .prose-a:hover .external-icon {
        opacity: 1;
      }
    </style>
    <style>
      .icon[data-v-b5945cb7] {
        fill: currentColor;
      }
    </style>
    <style>
      .title[data-v-6c81ca94] {
        color: var(--blog-text-h);
        font-size: var(--blog-font-size-h3);
        margin: 0.2em 0;
        padding-left: 0.2em;
      }
      .link[data-v-6c81ca94] {
        color: inherit;
        text-decoration: none;
      }
      .symbol[data-v-6c81ca94] {
        color: var(--blog-brand-light);
        opacity: 0;
      }
      .title:hover .symbol[data-v-6c81ca94] {
        opacity: 1;
      }
    </style>
    <style>
      .prose-code {
        background-color: var(--blog-gray-light-5);
        border: 1px solid var(--blog-border-color-3);
        border-radius: var(--blog-radius-2);
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        margin: 1em 0;
        padding: 1em;
        position: relative;
      }
      .prose-code.lang {
        background-color: var(--blog-black-regular);
        padding-bottom: 0;
        padding-right: 1.6em;
        padding-top: 1.8em;
      }
      .prose-code.lang .file-info {
        color: var(--blog-text-dark-2);
        font-size: 12px;
        position: absolute;
        right: 1em;
        top: 0.5em;
      }
      .prose-code.lang pre code {
        word-wrap: normal;
        white-space: pre;
      }
      .prose-code.no-lang {
        padding-bottom: 0.2em;
        padding-top: 1.2em;
      }
      .prose-code.no-lang pre {
        font-family: inherit;
      }
      .prose-code.no-lang pre code {
        font-family: inherit;
        padding-bottom: 0.8em;
        white-space: pre-wrap;
      }
      .prose-code.no-lang a {
        padding: 0 0.2em;
        position: relative;
        text-decoration: none;
        vertical-align: baseline;
      }
      .prose-code.no-lang a,
      .prose-code.no-lang a:visited {
        color: var(--blog-brand-light);
      }
      .prose-code.no-lang a:hover {
        color: var(--blog-brand-highlight);
      }
      .prose-code.no-lang a:active {
        color: var(--blog-brand-light);
      }
      .prose-code pre {
        margin: 0;
      }
      .prose-code pre code {
        display: inline-block;
        overflow: auto;
        padding-bottom: 1.5em;
        white-space: normal;
        width: 100%;
      }
      .prose-code .copy {
        bottom: 0.5em;
        color: var(--blog-text-dark-1);
        cursor: pointer;
        opacity: 0.5;
        position: absolute;
        right: 0.5em;
      }
      .prose-code:hover .copy {
        opacity: 1;
      }
      pre code .line {
        display: block;
        line-height: 1.6;
        min-height: 1rem;
      }
      .dark .prose-code.no-lang {
        background-color: var(--blog-black-regular);
      }
      .el-message--success.copy {
        --el-message-bg-color: var(--blog-bg-soft);
        --el-message-border-color: var(--blog-border-color-2);
        --el-message-text-color: var(--blog-text-2);
        white-space: nowrap;
        width: auto;
      }
      .prose-code ::-webkit-scrollbar {
        height: 8px;
        width: 10px;
      }
      .prose-code ::-webkit-scrollbar-track {
        background: var(--blog-black-soft);
        border-radius: 10px;
      }
      .prose-code ::-webkit-scrollbar-thumb {
        background: var(--blog-black-mute);
        border-radius: 10px;
      }
      .prose-code ::-webkit-scrollbar-thumb:hover {
        background: #646464;
        border-radius: 10px;
      }
      .prose-code ::-webkit-scrollbar-thumb:active {
        background: #444;
        border-radius: 10px;
      }
      @media screen and (max-width: 768px) {
        .prose-code ::-webkit-scrollbar {
          height: 2px;
          width: 2px;
        }
      }
    </style>
    <style>
      .prose-code-inline[data-v-0f1d1df0] {
        background-color: var(--blog-black-regular);
        border-radius: var(--blog-radius-1);
        padding: 0.3em 0.5em;
      }
    </style>
  </head>
  <body>
    <div id="__nuxt">
      <!--[-->
      <header class="header">
        <nav class="nav item" data-v-7b359261>
          <!--[-->
          <ul class="nav-list" data-v-7b359261>
            <!--[-->
            <li class="active nav-item" data-v-7b359261>
              <a href="/articles/css/bfcstackcascading" class="" data-v-7b359261>文章</a>
            </li>
            <li class="nav-item" data-v-7b359261>
              <a href="/browser_plugins/modifyingwebdata/install" class="" data-v-7b359261
                >浏览器插件</a
              >
            </li>
            <!--]-->
          </ul>
          <!--]-->
        </nav>
        <div class="theme-change item" title="切换主题" data-v-eea72278>
          <button
            role="switch"
            aria-label="切换暗色主题"
            aria-checked="false"
            class="switch"
            data-v-eea72278
          >
            <div class="switch__action" data-v-eea72278>
              <div class="switch__icon" data-v-eea72278>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="1em"
                  height="1em"
                  aria-hidden="true"
                  focusable="false"
                  viewbox="0 0 24 24"
                  class="icon dark-icon icon"
                  data-v-eea72278
                  data-v-d05f474b
                >
                  <path
                    d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"
                    data-v-d05f474b
                  ></path></svg
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="1em"
                  height="1em"
                  aria-hidden="true"
                  focusable="false"
                  viewbox="0 0 24 24"
                  class="icon light-icon icon"
                  data-v-eea72278
                  data-v-8b73f5d5
                >
                  <path
                    d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"
                    data-v-8b73f5d5
                  ></path>
                  <path
                    d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"
                    data-v-8b73f5d5
                  ></path>
                </svg>
              </div>
            </div>
          </button>
        </div>
        <div title="github 仓库" class="item">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            aria-hidden="true"
            role="img"
            class="icon"
            style=""
            width="1.8em"
            height="1.8em"
            viewBox="0 0 24 24"
            data-v-1664b317
          >
            <path
              fill="currentColor"
              d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"
            />
          </svg>
        </div>
        <span
          class="el-avatar el-avatar--circle avatar-home item"
          style="--el-avatar-size: 26px"
          title="首页"
          ><img src="/_nuxt/changlishe.0913a958.jpg" alt="首页" style="object-fit: cover"
        /></span>
      </header>
      <div class="container">
        <aside class="aside" style="">
          <div class="aside-stick">
            <nav class="nav">
              <ul
                role="menubar"
                style="--el-menu-level: 0"
                class="el-menu el-menu--vertical aside-nav"
              >
                <!--[--><!--]-->
                <div
                  class="el-divider el-divider--horizontal"
                  style="--el-border-style: solid"
                  role="separator"
                >
                  <!--v-if-->
                </div>
                <li class="el-menu-item" role="menuitem" tabindex="-1">
                  <!--[--><!--[--><a href="/test" class="">markdown</a
                  ><!--]--><!--[--><!--]--><!--]-->
                </li>
              </ul>
            </nav>
          </div>
        </aside>
        <main class="main">
          <div class="content-doc" data-v-dfb18308>
            <!--[-->
            <div>
              <h3 class="title" id="前言" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#前言"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->前言<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->vue3.0 使用了 Proxy 对象做响应式系统,让很多人都认识了 Proxy 对象,vue3.0
                中的响应式数据甚至是组件实例,其实都是 Proxy 对象。但是这篇文章不是说 Proxy 对象在
                vue3.0 是怎样发挥作用的,而是说说其影子兄弟
                Reflect。既然是影子,自然是相映相随的。Reflect
                中文解释可以是映射,也正好说明其设计初衷。简单来说 Proxy
                对象代理并拦截目标对象特定行为,而这些行为都有其默认行为,而 Reflect
                对象就是方便可以实现这些默认行为,Proxy 有多少拦截类型,Reflect
                就实现了多少对应类型的映射函数(<a
                  href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy"
                  rel="nofollow"
                  target="_blank"
                  class="prose-a"
                  ><!--[-->Proxy 对象的拦截类型<!--]--><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="0.8em"
                    height="0.8em"
                    aria-hidden="true"
                    focusable="false"
                    viewbox="0 0 24 24"
                    class="icon external-icon"
                    data-v-b5945cb7
                  >
                    <path
                      fill="currentColor"
                      d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z"
                      data-v-b5945cb7
                    ></path></svg></a
                >,
                <a
                  href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect"
                  rel="nofollow"
                  target="_blank"
                  class="prose-a"
                  ><!--[-->Reflect 对象的映射 API<!--]--><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="0.8em"
                    height="0.8em"
                    aria-hidden="true"
                    focusable="false"
                    viewbox="0 0 24 24"
                    class="icon external-icon"
                    data-v-b5945cb7
                  >
                    <path
                      fill="currentColor"
                      d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z"
                      data-v-b5945cb7
                    ></path></svg
                ></a>
                如果对这个两个对象还不是很了解,可以先看看上面链接中对这两个对象的介绍)<br />
                可能你会想,我都知道默认行为了,自已实现不就可以了,为什么还需要
                Reflect,为了说明这个问题,下文将针对 set 这个常用拦截类型去说明,如果不用 Reflect
                去实现你将遇到多少问题,才能成功实现其默认行为。<!--]-->
              </p>
              <h3 class="title" id="存取器属性搭上-receiver-参数" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#存取器属性搭上-receiver-参数"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->存取器属性搭上 receiver 参数<!--]--><span class="symbol" data-v-98ff1997
                    >#</span
                  ></a
                >
              </h3>
              <h3 class="title" id="基础实现" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#基础实现"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->基础实现<!--]--><span class="symbol" data-v-6c81ca94>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d><!--[-->下面先定义基础的代码<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">javascript</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">target</span><span class="ct-189df5"> = {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-c90c4a">_name:</span><span class="ct-189df5"> </span><span class="ct-28b8ec">&#39;目标对象&#39;</span><span class="ct-189df5">,
</span></span><span class="line" line="3"><span class="ct-189df5">  </span><span class="ct-06c629">get</span><span class="ct-189df5"> </span><span class="ct-cdf856">name</span><span class="ct-189df5">() {
</span></span><span class="line" line="4"><span class="ct-189df5">    </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-06c629">this</span><span class="ct-189df5">.</span><span class="ct-c90c4a">_name
</span></span><span class="line" line="5"><span class="ct-189df5">  },
</span></span><span class="line" line="6"><span class="ct-189df5">  </span><span class="ct-06c629">set</span><span class="ct-189df5"> </span><span class="ct-cdf856">name</span><span class="ct-189df5">(</span><span class="ct-c90c4a">name</span><span class="ct-189df5">) {
</span></span><span class="line" line="7"><span class="ct-189df5">    </span><span class="ct-06c629">this</span><span class="ct-189df5">.</span><span class="ct-c90c4a">_name</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">name
</span></span><span class="line" line="8"><span class="ct-189df5">  },
</span></span><span class="line" line="9"><span class="ct-189df5">  </span><span class="ct-c90c4a">age:</span><span class="ct-189df5"> </span><span class="ct-6881ad">18
</span></span><span class="line" line="10"><span class="ct-189df5">}
</span></span><span class="line" line="11"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">defaultProxy</span><span class="ct-189df5"> = </span><span class="ct-06c629">new</span><span class="ct-189df5"> </span><span class="ct-cdf856">Proxy</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, {})
</span></span><span class="line" line="12"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">customProxy</span><span class="ct-189df5"> = </span><span class="ct-06c629">new</span><span class="ct-189df5"> </span><span class="ct-cdf856">Proxy</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, {
</span></span><span class="line" line="13"><span class="ct-189df5">  </span><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">) {
</span></span><span class="line" line="14"><span class="ct-189df5">    </span><span class="ct-c90c4a">target</span><span class="ct-189df5">[</span><span class="ct-c90c4a">key</span><span class="ct-189df5">] = </span><span class="ct-c90c4a">value
</span></span><span class="line" line="15"><span class="ct-189df5">  }
</span></span><span class="line" line="16"><span class="ct-189df5">})</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <h3 class="title" id="存取器属性" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#存取器属性"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->存取器属性<!--]--><span class="symbol" data-v-6c81ca94>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->先看设置的 target 对象,也就是代理的目标对象,先看 name
                属性,可以看到该属性前面有 get set
                标识,这类属性叫存取器属性,在访问值和设置值时才会惰性执行对应的 getter setter 函数。
                每一个普通对象属性都有一个对应属性描述对象,下面是其属性描述符对象<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">javascript</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;name&#39;</span><span class="ct-189df5">)
</span></span><span class="line" line="2"><span class="ct-189df5">{</span><span class="ct-9c7777">enumerable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">, </span><span class="ct-9c7777">configurable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">, </span><span class="ct-9c7777">get</span><span class="ct-189df5">: </span><span class="ct-c90c4a">ƒ</span><span class="ct-189df5">, </span><span class="ct-9c7777">set</span><span class="ct-189df5">: </span><span class="ct-c90c4a">ƒ</span><span class="ct-189df5">}</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->age 属性是一个数据属性,其属性描述符对象是<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;age&#39;</span><span class="ct-189df5">)
</span></span><span class="line" line="2"><span class="ct-189df5">{</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">, </span><span class="ct-9c7777">writable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">, </span><span class="ct-9c7777">enumerable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">, </span><span class="ct-9c7777">configurable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">}</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->如果要让一个属性变为只读可以把数据属性的 writable 设置为
                false,或者把存取器属性的 set 设置为
                undefined,具体怎么设置属性的描述符对象下文会有提及,以上只是稍微说一下基础的知识,下面回归正题<!--]-->
              </p>
              <h3 class="title" id="触发-set-拦截的行为" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#触发-set-拦截的行为"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->触发 set 拦截的行为<!--]--><span class="symbol" data-v-6c81ca94
                    >#</span
                  ></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->defaultProxy 是一个默认的代理对象,没有设置任何拦截行为,接着设置了一个
                customProxy 对象并设置了 set 拦截行为,这个方法具有 4 个参数,比较有疑惑的可能是
                receiver 参数,下面通过例子就可以知道该参数的作用了。set 方法内部的代码就是要实现 set
                拦截的默认行为,如果不用 Reflect
                对象,实现其默认行为要遇到多少问题,就是下面要详细说明的内容。<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->在开始前先根据文档列出了能触发 set 拦截行为的操作<!--]-->
              </p>
              <ul>
                <!--[-->
                <li>
                  <!--[-->Property assignment: proxy<span>foo</span> = bar and proxy.foo = bar<!--]-->
                </li>
                <li>
                  <!--[-->Inherited property assignment: Object.create(proxy)<span>foo</span> = bar
                  代理对象位于原型链上,在这种情况下拦截函数的 receiver 指向子类实例对象<!--]-->
                </li>
                <li>
                  <!--[-->Reflect.set() 准确来说是 Reflect.set(proxy, key, value, receiver?)
                  注意第一个参数是代理对象不是目标对象,receiver 是可选值,不存在时指向第一个参数<!--]-->
                </li>
                <!--]-->
              </ul>
              <h3 class="title" id="基础实现的问题" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#基础实现的问题"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->基础实现的问题<!--]--><span class="symbol" data-v-6c81ca94>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d><!--[-->先从最容易的实现开始<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">target</span><span class="ct-189df5">[</span><span class="ct-c90c4a">key</span><span class="ct-189df5">] = </span><span class="ct-c90c4a">value</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d><!--[-->先看默认行为,这里是控制台输出<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="2"><span class="ct-28b8ec">&quot;hello world&quot;
</span></span><span class="line" line="3"><span class="ct-c90c4a">target</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name
</span></span><span class="line" line="4"><span class="ct-28b8ec">&quot;hello world&quot;
</span></span><span class="line" line="5"><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3</span><span class="ct-189df5"> 
</span></span><span class="line" line="6"><span class="ct-6881ad">3
</span></span><span class="line" line="7"><span class="ct-c90c4a">target</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age
</span></span><span class="line" line="8"><span class="ct-6881ad">3</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d><!--[-->再看实现的默认行为<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="2"><span class="ct-28b8ec">&quot;hello world&quot;
</span></span><span class="line" line="3"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name
</span></span><span class="line" line="4"><span class="ct-28b8ec">&quot;hello world&quot;
</span></span><span class="line" line="5"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3
</span></span><span class="line" line="6"><span class="ct-6881ad">3
</span></span><span class="line" line="7"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age
</span></span><span class="line" line="8"><span class="ct-6881ad">3</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->看似都一样,是不是就已经成功了?下面我们把 set name 修改一下,让其读出 this<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">set</span><span class="ct-189df5"> </span><span class="ct-cdf856">name</span><span class="ct-189df5">(</span><span class="ct-c90c4a">name</span><span class="ct-189df5">) {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-06c629">this</span><span class="ct-189df5">)
</span></span><span class="line" line="3"><span class="ct-189df5">  </span><span class="ct-06c629">this</span><span class="ct-189df5">.</span><span class="ct-c90c4a">_name</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">name
</span></span><span class="line" line="4"><span class="ct-189df5">},</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->设置
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->defaultProxy.name = &#39;hello world&#39;<!--]--></code
                >
                this 的输出是
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Proxy {_name: &quot;hello world&quot;, age: 18}<!--]--></code
                ><br />
                设置
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->customProxy.name = &#39;hello world&#39;<!--]--></code
                >
                this 的输出是
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->{_name: &quot;目标对象&quot;, age: 18}<!--]--></code
                ><br />
                设置
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->defaultProxy.name = &#39;hello world&#39;<!--]--></code
                >
                this 的输出是
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Proxy {_name: &quot;hello world&quot;, age: 18}<!--]--></code
                ><br />
                设置
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Reflect.set(defaultProxy, &#39;name&#39;, &#39;hello world&#39;)<!--]--></code
                >
                this 的输出是
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Proxy {_name: &quot;hello world&quot;, age: 18}<!--]--></code
                ><br />
                设置
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Reflect.set(defaultProxy, &#39;name&#39;, &#39;hello world&#39;, { a: 1})<!--]--></code
                >
                this 的输出是
                <code class="prose-code-inline" data-v-0f1d1df0><!--[-->{a: 1}<!--]--></code><br />
                设置
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Reflect.set(customProxy, &#39;name&#39;, &#39;hello world&#39;, { a: 1})<!--]--></code
                >
                this 的输出是
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->{_name: &quot;hello world&quot;, age: 18}<!--]--></code
                ><br />
                可以看出使用 cunstomProxy 其 this
                值总是指向目标对象,因为我们的实现就是简单的对象属性赋值,this
                自然就指向目标对象。而默认行为中,this 是指向代理对象的,而通过
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Reflect.set(defaultProxy, &#39;name&#39;, &#39;hello world&#39;, { a: 1})<!--]--></code
                >可以看出 this 更严格来说是指向 receiver 参数,在没有传入时就取第一个参数的值。<!--]-->
              </p>
              <h3 class="title" id="修复存取器属性" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#修复存取器属性"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->修复存取器属性<!--]--><span class="symbol" data-v-6c81ca94>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->很明显这里实现的默认行为是有问题的,针对这类问题可以修复为<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">) {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">descriptor</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">)
</span></span><span class="line" line="3"><span class="ct-189df5">  </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;set&#39;</span><span class="ct-189df5">)) {
</span></span><span class="line" line="4"><span class="ct-189df5">    </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">setter</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">set
</span></span><span class="line" line="5"><span class="ct-189df5">    </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-06c629">typeof</span><span class="ct-189df5"> </span><span class="ct-c90c4a">setter</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;function&#39;</span><span class="ct-189df5"> ) {
</span></span><span class="line" line="6"><span class="ct-189df5">      </span><span class="ct-c90c4a">setter</span><span class="ct-189df5">.</span><span class="ct-cdf856">call</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">)
</span></span><span class="line" line="7"><span class="ct-189df5">    }
</span></span><span class="line" line="8"><span class="ct-189df5">  } </span><span class="ct-19fb87">else</span><span class="ct-189df5"> {
</span></span><span class="line" line="9"><span class="ct-189df5">    </span><span class="ct-c90c4a">target</span><span class="ct-189df5">[</span><span class="ct-c90c4a">key</span><span class="ct-189df5">] = </span><span class="ct-c90c4a">value
</span></span><span class="line" line="10"><span class="ct-189df5">  }
</span></span><span class="line" line="11"><span class="ct-189df5">}</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->然后按上面的测试方法,测试了一番,发现都满足默认行为了,但是到这步只解决了存取器属性的问题,还有数据属性的还没有解决,下面看看数据属性你会遇到什么问题。<!--]-->
              </p>
              <h3 class="title" id="隐匿的-defineproperty-陷阱拦截" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#隐匿的-defineproperty-陷阱拦截"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->隐匿的 defineProperty 陷阱拦截<!--]--><span
                    class="symbol"
                    data-v-98ff1997
                    >#</span
                  ></a
                >
              </h3>
              <h3 class="title" id="增加-defineproperty-拦截" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#增加-defineproperty-拦截"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->增加 defineProperty 拦截<!--]--><span class="symbol" data-v-6c81ca94
                    >#</span
                  ></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->在开始介绍这个问题前,先增加默认代理对象和实现代理对象一个 defineProperty
                拦截,由于是针对 set 拦截实现默认行为,为了不引入其他问题,直接就使用
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->return Reflect.defineProperty(target, property, descriptor)<!--]--></code
                >
                实现 defineProperty 拦截的默认行为<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">defaultProxy</span><span class="ct-189df5"> = </span><span class="ct-06c629">new</span><span class="ct-189df5"> </span><span class="ct-cdf856">Proxy</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">property</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">) {
</span></span><span class="line" line="3"><span class="ct-189df5">    </span><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-28b8ec">`defaultProxy defineProperty 拦截触发`</span><span class="ct-189df5">, </span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">property</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">)
</span></span><span class="line" line="4"><span class="ct-189df5">    </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-c90c4a">Reflect</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">property</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">)
</span></span><span class="line" line="5"><span class="ct-189df5">  }
</span></span><span class="line" line="6"><span class="ct-189df5">})
</span></span><span class="line" line="7"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">customProxy</span><span class="ct-189df5"> = </span><span class="ct-06c629">new</span><span class="ct-189df5"> </span><span class="ct-cdf856">Proxy</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, {
</span></span><span class="line" line="8"><span class="ct-189df5">  </span><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">) {
</span></span><span class="line" line="9"><span class="ct-189df5">    </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">descriptor</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">)
</span></span><span class="line" line="10"><span class="ct-189df5">    </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;set&#39;</span><span class="ct-189df5">)) {
</span></span><span class="line" line="11"><span class="ct-189df5">      </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">setter</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">set
</span></span><span class="line" line="12"><span class="ct-189df5">      </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-06c629">typeof</span><span class="ct-189df5"> </span><span class="ct-c90c4a">setter</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;function&#39;</span><span class="ct-189df5"> ) {
</span></span><span class="line" line="13"><span class="ct-189df5">        </span><span class="ct-c90c4a">setter</span><span class="ct-189df5">.</span><span class="ct-cdf856">call</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">)
</span></span><span class="line" line="14"><span class="ct-189df5">      }
</span></span><span class="line" line="15"><span class="ct-189df5">    } </span><span class="ct-19fb87">else</span><span class="ct-189df5"> {
</span></span><span class="line" line="16"><span class="ct-189df5">      </span><span class="ct-c90c4a">target</span><span class="ct-189df5">[</span><span class="ct-c90c4a">key</span><span class="ct-189df5">] = </span><span class="ct-c90c4a">value
</span></span><span class="line" line="17"><span class="ct-189df5">    }
</span></span><span class="line" line="18"><span class="ct-189df5">  },
</span></span><span class="line" line="19"><span class="ct-189df5">  </span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">property</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">) {
</span></span><span class="line" line="20"><span class="ct-189df5">    </span><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-28b8ec">`cunstomProxy defineProperty 拦截触发`</span><span class="ct-189df5">, </span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">property</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">)
</span></span><span class="line" line="21"><span class="ct-189df5">    </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-c90c4a">Reflect</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">property</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">)
</span></span><span class="line" line="22"><span class="ct-189df5">  }
</span></span><span class="line" line="23"><span class="ct-189df5">})</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <h3 class="title" id="分析拦截逻辑" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#分析拦截逻辑"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->分析拦截逻辑<!--]--><span class="symbol" data-v-6c81ca94>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d><!--[-->下面执行默认行为<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="2"><span class="ct-c90c4a">Proxy</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;目标对象&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">}
</span></span><span class="line" line="3"><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5"> </span><span class="ct-c90c4a">defineProperty</span><span class="ct-189df5"> </span><span class="ct-c90c4a">拦截触发</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;目标对象&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">} </span><span class="ct-c90c4a">_name</span><span class="ct-189df5"> {</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;hello world&quot;</span><span class="ct-189df5">}
</span></span><span class="line" line="4"><span class="ct-28b8ec">&quot;hello world&quot;
</span></span><span class="line" line="5"><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3
</span></span><span class="line" line="6"><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5"> </span><span class="ct-c90c4a">defineProperty</span><span class="ct-189df5"> </span><span class="ct-c90c4a">拦截触发</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;hello world&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">} </span><span class="ct-c90c4a">age</span><span class="ct-189df5"> {</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-6881ad">3</span><span class="ct-189df5">}
</span></span><span class="line" line="7"><span class="ct-6881ad">3</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d><!--[-->下面执行实现行为<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="2"><span class="ct-c90c4a">Proxy</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;目标对象&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">}
</span></span><span class="line" line="3"><span class="ct-28b8ec">&quot;hello world&quot;
</span></span><span class="line" line="4"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3
</span></span><span class="line" line="5"><span class="ct-6881ad">3</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->可以看出默认的代理行为在设置属性时会触发 defineProperty
                拦截,而查看文档你会发现,触发 defineProperty 拦截的行为有<!--]-->
              </p>
              <ul>
                <!--[-->
                <li><!--[-->Object.defineProperty()<!--]--></li>
                <li>
                  <!--[-->Reflect.defineProperty()<br />
                  这里没有提到对象属性赋值也会触发 defineProperty 拦截,那这个触发行为应该是 set
                  默认行为所触发,如果要实现该默认行为也需要在 set 拦截中去实现。
                  仔细分析以上的输出可以发现,触发 defineProperty 拦截的属性是
                  <code class="prose-code-inline" data-v-0f1d1df0><!--[-->_name<!--]--></code> 和
                  <code class="prose-code-inline" data-v-0f1d1df0><!--[-->age<!--]--></code>,并没有
                  <code class="prose-code-inline" data-v-0f1d1df0><!--[-->name<!--]--></code>,
                  <code class="prose-code-inline" data-v-0f1d1df0><!--[-->_name<!--]--></code>
                  是因为在设置 name 属性时在对应的 setter
                  函数执行时进行赋值的,从而执行对应的拦截函数,也就是在设置数据属性时会触发
                  defineProperty 拦截,而设置存取性属性时并不会触发 defineProperty 拦截。<!--]-->
                </li>
                <!--]-->
              </ul>
              <h3 class="title" id="修复数据属性" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#修复数据属性"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->修复数据属性<!--]--><span class="symbol" data-v-6c81ca94>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->基于上面的分析,让 set 拦截触发 defineProperty 拦截<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">) {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">descriptor</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">)
</span></span><span class="line" line="3"><span class="ct-189df5">  </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;set&#39;</span><span class="ct-189df5">)) {
</span></span><span class="line" line="4"><span class="ct-189df5">    </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">setter</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">set
</span></span><span class="line" line="5"><span class="ct-189df5">    </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-06c629">typeof</span><span class="ct-189df5"> </span><span class="ct-c90c4a">setter</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;function&#39;</span><span class="ct-189df5"> ) {
</span></span><span class="line" line="6"><span class="ct-189df5">      </span><span class="ct-c90c4a">setter</span><span class="ct-189df5">.</span><span class="ct-cdf856">call</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">)
</span></span><span class="line" line="7"><span class="ct-189df5">    }
</span></span><span class="line" line="8"><span class="ct-189df5">  } </span><span class="ct-19fb87">else</span><span class="ct-189df5"> {
</span></span><span class="line" line="9"><span class="ct-189df5">    </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, {
</span></span><span class="line" line="10"><span class="ct-189df5">      </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-c90c4a">value
</span></span><span class="line" line="11"><span class="ct-189df5">    })
</span></span><span class="line" line="12"><span class="ct-189df5">  }
</span></span><span class="line" line="13"><span class="ct-189df5">},</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d><!--[-->再次运行测试<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="2"><span class="ct-c90c4a">Proxy</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;目标对象&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">}
</span></span><span class="line" line="3"><span class="ct-c90c4a">cunstomProxy</span><span class="ct-189df5"> </span><span class="ct-c90c4a">defineProperty</span><span class="ct-189df5"> </span><span class="ct-c90c4a">拦截触发</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;目标对象&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">} </span><span class="ct-c90c4a">_name</span><span class="ct-189df5"> {</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;hello world&quot;</span><span class="ct-189df5">}
</span></span><span class="line" line="4"><span class="ct-28b8ec">&quot;hello world&quot;
</span></span><span class="line" line="5"><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3
</span></span><span class="line" line="6"><span class="ct-c90c4a">cunstomProxy</span><span class="ct-189df5"> </span><span class="ct-c90c4a">defineProperty</span><span class="ct-189df5"> </span><span class="ct-c90c4a">拦截触发</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;hello world&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">18</span><span class="ct-189df5">} </span><span class="ct-c90c4a">age</span><span class="ct-189df5"> {</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-6881ad">3</span><span class="ct-189df5">}
</span></span><span class="line" line="7"><span class="ct-6881ad">3</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->以上的测试都是在修改已经存在的属性,如果增加属性,
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->Object.getOwnPropertyDescriptor(target, key)<!--]--></code
                >
                会返回 undefined,执行 hasOwnProperty 方法是会报错的。<br />
                当一个属性使用对象属性赋值的方式设置时,会默认设置为数据属性,而且是可枚举可配置和可写的。<br />
                而且还有一点 Object.defineProperty
                这个方法设置属性时,如果属性是新属性,那些忽略设置的描述属性都默认为 false 或者是
                undefined,如果是已经存在的属性,忽略设置的描述属性取原来的值,例如<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-06c629">let</span><span class="ct-189df5"> </span><span class="ct-c90c4a">o</span><span class="ct-189df5"> = {}
</span></span><span class="line" line="2"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;value&#39;</span><span class="ct-189df5">, { </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-28b8ec">&#39;2&#39;</span><span class="ct-189df5">})
</span></span><span class="line" line="3"><span class="ct-189df5">{</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;2&quot;</span><span class="ct-189df5">}
</span></span><span class="line" line="4"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;value&#39;</span><span class="ct-189df5">)
</span></span><span class="line" line="5"><span class="ct-189df5">{</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;2&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">writable</span><span class="ct-189df5">: </span><span class="ct-06c629">false</span><span class="ct-189df5">, </span><span class="ct-9c7777">enumerable</span><span class="ct-189df5">: </span><span class="ct-06c629">false</span><span class="ct-189df5">, </span><span class="ct-9c7777">configurable</span><span class="ct-189df5">: </span><span class="ct-06c629">false</span><span class="ct-189df5">}
</span></span><span class="line" line="6"><span class="ct-c90c4a">o</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hh&#39;
</span></span><span class="line" line="7"><span class="ct-28b8ec">&quot;hh&quot;
</span></span><span class="line" line="8"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;name&#39;</span><span class="ct-189df5">)
</span></span><span class="line" line="9"><span class="ct-189df5">{</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;hh&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">writable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">, </span><span class="ct-9c7777">enumerable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">, </span><span class="ct-9c7777">configurable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">}</span><span class="ct-9c7777">configurable</span><span class="ct-189df5">: </span><span class="ct-9c7777">trueenumerable</span><span class="ct-189df5">: </span><span class="ct-9c7777">truevalue</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;hh&quot;</span><span class="ct-9c7777">writable</span><span class="ct-189df5">: </span><span class="ct-9c7777">true__proto__</span><span class="ct-189df5">: </span><span class="ct-c90c4a">Object
</span></span><span class="line" line="10"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;name&#39;</span><span class="ct-189df5">, { </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-28b8ec">&#39;3&#39;</span><span class="ct-189df5">, </span><span class="ct-c90c4a">enumerable:</span><span class="ct-189df5"> </span><span class="ct-06c629">false</span><span class="ct-189df5">})
</span></span><span class="line" line="11"><span class="ct-189df5">{</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;2&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;3&quot;</span><span class="ct-189df5">}
</span></span><span class="line" line="12"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;name&#39;</span><span class="ct-189df5">)
</span></span><span class="line" line="13"><span class="ct-189df5">{</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;3&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">writable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">, </span><span class="ct-9c7777">enumerable</span><span class="ct-189df5">: </span><span class="ct-06c629">false</span><span class="ct-189df5">, </span><span class="ct-9c7777">configurable</span><span class="ct-189df5">: </span><span class="ct-06c629">true</span><span class="ct-189df5">}</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d><!--[-->基于这些要求重新修改 set 实现<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">) {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">descriptor</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">)
</span></span><span class="line" line="3"><span class="ct-189df5">  </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5"> &amp;&amp; </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;set&#39;</span><span class="ct-189df5">)) {
</span></span><span class="line" line="4"><span class="ct-189df5">    </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">setter</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">set
</span></span><span class="line" line="5"><span class="ct-189df5">    </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-06c629">typeof</span><span class="ct-189df5"> </span><span class="ct-c90c4a">setter</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;function&#39;</span><span class="ct-189df5"> ) {
</span></span><span class="line" line="6"><span class="ct-189df5">      </span><span class="ct-c90c4a">setter</span><span class="ct-189df5">.</span><span class="ct-cdf856">call</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">)
</span></span><span class="line" line="7"><span class="ct-189df5">    }
</span></span><span class="line" line="8"><span class="ct-189df5">  } </span><span class="ct-19fb87">else</span><span class="ct-189df5"> {
</span></span><span class="line" line="9"><span class="ct-189df5">    </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5"> ? {
</span></span><span class="line" line="10"><span class="ct-189df5">      </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-8d92c2">// 为保持和默认行为一致,不能修改 descriptor.value 后把 descriptor 返回
</span></span><span class="line" line="11"><span class="ct-189df5">    } : {
</span></span><span class="line" line="12"><span class="ct-189df5">      </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-c90c4a">value</span><span class="ct-189df5">,
</span></span><span class="line" line="13"><span class="ct-189df5">      </span><span class="ct-c90c4a">writable:</span><span class="ct-189df5"> </span><span class="ct-06c629">true</span><span class="ct-189df5">,
</span></span><span class="line" line="14"><span class="ct-189df5">      </span><span class="ct-c90c4a">enumerable:</span><span class="ct-189df5"> </span><span class="ct-06c629">true</span><span class="ct-189df5">,
</span></span><span class="line" line="15"><span class="ct-189df5">      </span><span class="ct-c90c4a">configurable:</span><span class="ct-189df5"> </span><span class="ct-06c629">true
</span></span><span class="line" line="16"><span class="ct-189df5">    })
</span></span><span class="line" line="17"><span class="ct-189df5">  }
</span></span><span class="line" line="18"><span class="ct-189df5">},</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <h3 class="title" id="defineproperty-拦截的作用" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#defineproperty-拦截的作用"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->defineProperty 拦截的作用<!--]--><span class="symbol" data-v-6c81ca94
                    >#</span
                  ></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->基于上面的实现,也实现了在代理对象作用原型对象时,把数据属性设置在子类实例身上。
                看下面的例子<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">children</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">create</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">)
</span></span><span class="line" line="2"><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="3"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;name&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// false
</span></span><span class="line" line="4"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;_name&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// true
</span></span><span class="line" line="5"><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3
</span></span><span class="line" line="6"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;age&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// true
</span></span><span class="line" line="7"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5">) </span><span class="ct-8d92c2">// 3
</span></span><span class="line" line="8"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5">) </span><span class="ct-8d92c2">// 18
</span></span><span class="line" line="9"><span>
</span></span><span class="line" line="10"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">children2</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">create</span><span class="ct-189df5">(</span><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5">)
</span></span><span class="line" line="11"><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="12"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;name&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// false
</span></span><span class="line" line="13"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;_name&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// true
</span></span><span class="line" line="14"><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3
</span></span><span class="line" line="15"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;age&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// true
</span></span><span class="line" line="16"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5">) </span><span class="ct-8d92c2">// 3
</span></span><span class="line" line="17"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5">) </span><span class="ct-8d92c2">// 18
</span></span><span class="line" line="18"><span>
</span></span><span class="line" line="19"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">children3</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">create</span><span class="ct-189df5">(</span><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">)
</span></span><span class="line" line="20"><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">name</span><span class="ct-189df5"> = </span><span class="ct-28b8ec">&#39;hello world&#39;
</span></span><span class="line" line="21"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;name&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// false
</span></span><span class="line" line="22"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;_name&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// true
</span></span><span class="line" line="23"><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5"> = </span><span class="ct-6881ad">3
</span></span><span class="line" line="24"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;age&#39;</span><span class="ct-189df5">)) </span><span class="ct-8d92c2">// true
</span></span><span class="line" line="25"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">children</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5">) </span><span class="ct-8d92c2">// 3
</span></span><span class="line" line="26"><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">.</span><span class="ct-c90c4a">age</span><span class="ct-189df5">) </span><span class="ct-8d92c2">// 18</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->当代理对象在原型链上时,子类实例设置属性时,一样会触发代理的拦截行为,这个时候
                receiver 参数的值表示的是子类实例,也就是这里的 children,如果 children
                设置的属性是存取器属性默认会调用原型链对象中对应属性的 getter setter
                函数,而并不会设置在 children
                身上。如果是新属性或者是数据属性,那么会设置在自身身上,并不会修改原型链上的属性。如果不采用
                defineProperty 进行设置,直接通过
                <code class="prose-code-inline" data-v-0f1d1df0
                  ><!--[-->
                  receiver[key] = value<!--]--></code
                >
                来实现,就会出现无限递归。<br />
                数据属性和存取器属性都修复了,还有什么问题吗<!--]-->
              </p>
              <h3 class="title" id="invariants" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#invariants"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->Invariants<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->如果你有看文档,你会发现每一个拦截操作中都有一个
                Invariants,中文翻译为不变式。我的理解就是对拦截行为的限制,如果你的拦截行为超出了限制,就会报
                TypeError<br />
                先来看看 set 拦截的限制<!--]-->
              </p>
              <ul>
                <!--[-->
                <li>
                  <!--[-->Cannot change the value of a property to be different from the value of
                  the corresponding target object property if the corresponding target object
                  property is a non-writable, non-configurable data property.
                  这条限制是针对数据属性的,如果设置的对象属性是非可配置和非可读的,那么拦截函数不能返回
                  true<!--]-->
                </li>
                <li>
                  <!--[-->Cannot set the value of a property if the corresponding target object
                  property is a non-configurable accessor property that has undefined as its [[Set]]
                  attribute 这条限制是针对存取器属性的,如果设置的对象属性是非可配置且 set 为
                  undefined,,那么拦截函数不能返回 true<!--]-->
                </li>
                <li>
                  <!--[-->In strict mode, a false return value from the set() handler will throw a
                  TypeError exception.
                  前两条都表明该属性如果是只读属性,就应该是不能修改的,最后一条就是在严格模式下如果返回
                  false 会触发报错<!--]-->
                </li>
                <!--]-->
              </ul>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">o</span><span class="ct-189df5"> = {}
</span></span><span class="line" line="2"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;level&#39;</span><span class="ct-189df5">, {
</span></span><span class="line" line="3"><span class="ct-189df5">  </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-6881ad">5</span><span class="ct-189df5"> </span><span class="ct-8d92c2">// 没有设置的描述属性均为 false
</span></span><span class="line" line="4"><span class="ct-189df5">})
</span></span><span class="line" line="5"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;grade&#39;</span><span class="ct-189df5">, {
</span></span><span class="line" line="6"><span class="ct-189df5">  </span><span class="ct-c90c4a">set:</span><span class="ct-189df5"> </span><span class="ct-06c629">undefined</span><span class="ct-189df5"> </span><span class="ct-8d92c2">// 没有设置的描述属性均为 false, get 为 undefined
</span></span><span class="line" line="7"><span class="ct-189df5">})
</span></span><span class="line" line="8"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">proxy</span><span class="ct-189df5"> = </span><span class="ct-06c629">new</span><span class="ct-189df5"> </span><span class="ct-cdf856">Proxy</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, {
</span></span><span class="line" line="9"><span class="ct-189df5">  </span><span class="ct-cdf856">set</span><span class="ct-189df5">() {
</span></span><span class="line" line="10"><span class="ct-189df5">    </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-06c629">true</span><span class="ct-189df5"> </span><span class="ct-8d92c2">// 强行认为可以修改,就会触发拦截行为限制错误
</span></span><span class="line" line="11"><span class="ct-189df5">  }
</span></span><span class="line" line="12"><span class="ct-189df5">})
</span></span><span class="line" line="13"><span class="ct-8d92c2">// proxy.level = 666 // Uncaught TypeError: &#39;set&#39; on proxy: trap returned truish for property &#39;level&#39; which exists in the proxy target as a non-configurable and non-writable data property with a different value
</span></span><span class="line" line="14"><span class="ct-8d92c2">// proxy.grade = 666 // Uncaught TypeError: &#39;set&#39; on proxy: trap returned truish for property &#39;grade&#39; which exists in the proxy target as a non-configurable and non-writable accessor property without a setter
</span></span><span class="line" line="15"><span>
</span></span><span class="line" line="16"><span class="ct-06c629">void</span><span class="ct-189df5"> </span><span class="ct-06c629">function</span><span class="ct-189df5"> () {
</span></span><span class="line" line="17"><span class="ct-189df5">  </span><span class="ct-28b8ec">&#39;use strict&#39;
</span></span><span class="line" line="18"><span class="ct-189df5">  </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">proxy2</span><span class="ct-189df5"> = </span><span class="ct-06c629">new</span><span class="ct-189df5"> </span><span class="ct-cdf856">Proxy</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, {
</span></span><span class="line" line="19"><span class="ct-189df5">    </span><span class="ct-cdf856">set</span><span class="ct-189df5">() {
</span></span><span class="line" line="20"><span class="ct-189df5">      </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-06c629">false</span><span class="ct-189df5"> 
</span></span><span class="line" line="21"><span class="ct-189df5">    }
</span></span><span class="line" line="22"><span class="ct-189df5">  })
</span></span><span class="line" line="23"><span class="ct-189df5">  </span><span class="ct-c90c4a">proxy2</span><span class="ct-189df5">.</span><span class="ct-c90c4a">a</span><span class="ct-189df5"> = </span><span class="ct-6881ad">1
</span></span><span class="line" line="24"><span class="ct-189df5">  </span><span class="ct-c90c4a">console</span><span class="ct-189df5">.</span><span class="ct-cdf856">log</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">) </span><span class="ct-8d92c2">// Uncaught TypeError: &#39;set&#39; on proxy: trap returned falsish for property &#39;a&#39;
</span></span><span class="line" line="25"><span class="ct-189df5">}()</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->如果要正确触发这类默认行为,那么在实现中需要正确 return
                设置是否成功的信息,这里可能有点难理解,可以看看这个例子<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">o</span><span class="ct-189df5"> = {}
</span></span><span class="line" line="2"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;level&#39;</span><span class="ct-189df5">, {
</span></span><span class="line" line="3"><span class="ct-189df5">  </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-6881ad">5</span><span class="ct-189df5"> </span><span class="ct-8d92c2">// 没有设置的描述属性均为 false
</span></span><span class="line" line="4"><span class="ct-189df5">})
</span></span><span class="line" line="5"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">proxy</span><span class="ct-189df5"> = </span><span class="ct-06c629">new</span><span class="ct-189df5"> </span><span class="ct-cdf856">Proxy</span><span class="ct-189df5">(</span><span class="ct-c90c4a">o</span><span class="ct-189df5">, {})
</span></span><span class="line" line="6"><span class="ct-c90c4a">proxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">level</span><span class="ct-189df5"> = </span><span class="ct-6881ad">6</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->这个并不会报错,因为默认行为知道了这个是不能设置的,因此默认拦截函数就返回了
                false,因此你如果要实现默认行为,也需要返回一个正确设置与否的信息。不能设置就应该返回
                false,可以设置就应该返回 true。<!--]-->
              </p>
              <h3 class="title" id="返回设置信息" data-v-6c81ca94>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#返回设置信息"
                  class="router-link-active router-link-exact-active link"
                  data-v-6c81ca94
                  ><!--[-->返回设置信息<!--]--><span class="symbol" data-v-6c81ca94>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->基于这点我们再来看看有返回时的实现<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">) {
</span></span><span class="line" line="2"><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">descriptor</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">getOwnPropertyDescriptor</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">)
</span></span><span class="line" line="3"><span class="ct-19fb87">if</span><span class="ct-189df5"> (</span><span class="ct-06c629">typeof</span><span class="ct-189df5"> </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;object&#39;</span><span class="ct-189df5">) {
</span></span><span class="line" line="4"><span class="ct-189df5">  </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">configurable</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;false&#39;</span><span class="ct-189df5"> &amp;&amp; (</span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">writable</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;false&#39;</span><span class="ct-189df5"> || </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">set</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;undefined&#39;</span><span class="ct-189df5">)) {
</span></span><span class="line" line="5"><span class="ct-189df5">    </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-06c629">false
</span></span><span class="line" line="6"><span class="ct-189df5">  }
</span></span><span class="line" line="7"><span class="ct-189df5">}
</span></span><span class="line" line="8"><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5"> &amp;&amp; </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-cdf856">hasOwnProperty</span><span class="ct-189df5">(</span><span class="ct-28b8ec">&#39;set&#39;</span><span class="ct-189df5">)) {
</span></span><span class="line" line="9"><span class="ct-189df5">  </span><span class="ct-06c629">const</span><span class="ct-189df5"> </span><span class="ct-d52385">setter</span><span class="ct-189df5"> = </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5">.</span><span class="ct-c90c4a">set
</span></span><span class="line" line="10"><span class="ct-189df5">  </span><span class="ct-19fb87">if</span><span class="ct-189df5">(</span><span class="ct-06c629">typeof</span><span class="ct-189df5"> </span><span class="ct-c90c4a">setter</span><span class="ct-189df5"> === </span><span class="ct-28b8ec">&#39;function&#39;</span><span class="ct-189df5"> ) {
</span></span><span class="line" line="11"><span class="ct-189df5">    </span><span class="ct-c90c4a">setter</span><span class="ct-189df5">.</span><span class="ct-cdf856">call</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">)
</span></span><span class="line" line="12"><span class="ct-189df5">    </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-06c629">true</span><span class="ct-189df5"> 
</span></span><span class="line" line="13"><span class="ct-189df5">  } 
</span></span><span class="line" line="14"><span class="ct-189df5">} </span><span class="ct-19fb87">else</span><span class="ct-189df5"> {
</span></span><span class="line" line="15"><span class="ct-189df5">  </span><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">descriptor</span><span class="ct-189df5"> ? {
</span></span><span class="line" line="16"><span class="ct-189df5">  </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-8d92c2">// 为保持和默认行为一致,不能修改 descriptor.value 后把 descriptor 返回
</span></span><span class="line" line="17"><span class="ct-189df5">  } : {
</span></span><span class="line" line="18"><span class="ct-189df5">    </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-c90c4a">value</span><span class="ct-189df5">,
</span></span><span class="line" line="19"><span class="ct-189df5">    </span><span class="ct-c90c4a">writable:</span><span class="ct-189df5"> </span><span class="ct-06c629">true</span><span class="ct-189df5">,
</span></span><span class="line" line="20"><span class="ct-189df5">    </span><span class="ct-c90c4a">enumerable:</span><span class="ct-189df5"> </span><span class="ct-06c629">true</span><span class="ct-189df5">,
</span></span><span class="line" line="21"><span class="ct-189df5">    </span><span class="ct-c90c4a">configurable:</span><span class="ct-189df5"> </span><span class="ct-06c629">true
</span></span><span class="line" line="22"><span class="ct-189df5">  })
</span></span><span class="line" line="23"><span class="ct-189df5">  </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-06c629">true
</span></span><span class="line" line="24"><span class="ct-189df5">} 
</span></span><span class="line" line="25"><span class="ct-189df5">},</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d><!--[-->下面测试一下<!--]--></p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">Object</span><span class="ct-189df5">.</span><span class="ct-cdf856">defineProperty</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;level&#39;</span><span class="ct-189df5">, {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-c90c4a">value:</span><span class="ct-189df5"> </span><span class="ct-6881ad">5
</span></span><span class="line" line="3"><span class="ct-189df5">})
</span></span><span class="line" line="4"><span class="ct-06c629">void</span><span class="ct-189df5"> </span><span class="ct-06c629">function</span><span class="ct-189df5">() {
</span></span><span class="line" line="5"><span class="ct-189df5">  </span><span class="ct-28b8ec">&#39;use strict&#39;
</span></span><span class="line" line="6"><span class="ct-189df5">  </span><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">level</span><span class="ct-189df5"> = </span><span class="ct-6881ad">6</span><span class="ct-189df5"> </span><span class="ct-8d92c2">//Uncaught TypeError: Cannot assign to read only property &#39;level&#39; of object &#39;[object Object]&#39;
</span></span><span class="line" line="7"><span class="ct-189df5">}()
</span></span><span class="line" line="8"><span class="ct-06c629">void</span><span class="ct-189df5"> </span><span class="ct-06c629">function</span><span class="ct-189df5">() {
</span></span><span class="line" line="9"><span class="ct-189df5">  </span><span class="ct-28b8ec">&#39;use strict&#39;
</span></span><span class="line" line="10"><span class="ct-189df5">  </span><span class="ct-c90c4a">customProxy</span><span class="ct-189df5">.</span><span class="ct-c90c4a">level</span><span class="ct-189df5"> = </span><span class="ct-6881ad">6</span><span class="ct-189df5"> </span><span class="ct-8d92c2">// Uncaught TypeError: &#39;set&#39; on proxy: trap returned falsish for property &#39;level&#39;
</span></span><span class="line" line="11"><span class="ct-189df5">}()</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->虽然都按期望那样报错了,但是报错的内容不同,很明显默认行为还执行了其他的操作。<!--]-->
              </p>
              <h3 class="title" id="总结" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#总结"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->总结<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->最后,其实还是没有实现 set
                的真实默认行为,但是通过这个例子,也可以清楚了解到,要模拟真实的默认拦截行为是很复杂的,而
                Reflect 设计出来就是为了解决这样的难题。<br />
                下面就是正确的实现<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">) {
</span></span><span class="line" line="2"><span class="ct-189df5">  </span><span class="ct-19fb87">return</span><span class="ct-189df5"> </span><span class="ct-c90c4a">Reflect</span><span class="ct-189df5">.</span><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-c90c4a">key</span><span class="ct-189df5">, </span><span class="ct-c90c4a">value</span><span class="ct-189df5">, </span><span class="ct-c90c4a">receiver</span><span class="ct-189df5">)
</span></span><span class="line" line="3"><span class="ct-189df5">}</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->如果使用了拦截函数,并需要执行默认行为,如果要保持代码的健壮性,传入的参数都需要全部传入到
                Reflect 对象内,如果漏掉 receiver, receiver 会被当做第一个参数,这样就不会触发
                defineProperty 拦截,这个就违背了默认行为<!--]-->
              </p>
              <div class="lang prose-code">
                <div class="file-info">js</div>
                <!--[-->
                <pre><code><span class="line" line="1"><span class="ct-c90c4a">Reflect</span><span class="ct-189df5">.</span><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;age&#39;</span><span class="ct-189df5">, </span><span class="ct-6881ad">3</span><span class="ct-189df5">)
</span></span><span class="line" line="2"><span class="ct-06c629">true
</span></span><span class="line" line="3"><span class="ct-c90c4a">Reflect</span><span class="ct-189df5">.</span><span class="ct-cdf856">set</span><span class="ct-189df5">(</span><span class="ct-c90c4a">target</span><span class="ct-189df5">, </span><span class="ct-28b8ec">&#39;age&#39;</span><span class="ct-189df5">, </span><span class="ct-6881ad">3</span><span class="ct-189df5">, </span><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5">)
</span></span><span class="line" line="4"><span class="ct-c90c4a">defaultProxy</span><span class="ct-189df5"> </span><span class="ct-c90c4a">defineProperty</span><span class="ct-189df5"> </span><span class="ct-c90c4a">拦截触发</span><span class="ct-189df5"> {</span><span class="ct-9c7777">_name</span><span class="ct-189df5">: </span><span class="ct-28b8ec">&quot;目标对象&quot;</span><span class="ct-189df5">, </span><span class="ct-9c7777">age</span><span class="ct-189df5">: </span><span class="ct-6881ad">3</span><span class="ct-189df5">} </span><span class="ct-c90c4a">age</span><span class="ct-189df5"> {</span><span class="ct-9c7777">value</span><span class="ct-189df5">: </span><span class="ct-6881ad">3</span><span class="ct-189df5">}
</span></span><span class="line" line="5"><span class="ct-06c629">true</span></span></code></pre>
                <!--]-->
                <div title="复制" class="copy">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    style=""
                    width="1.2em"
                    height="1.2em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"
                    />
                  </svg>
                </div>
              </div>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->还需要注意的是需要 return 该返回值,不然不会正确触发 Invariants 的限制行为<!--]-->
              </p>
              <p class="prose-p" data-v-4aba2c1d>
                <!--[-->这里举的是 set
                拦截的例子,其他的拦截例子,如果需要调用默认行为也都是同样的操作,注意两点<!--]-->
              </p>
              <ul>
                <!--[-->
                <li><!--[-->Reflect 中传入全部参数<!--]--></li>
                <li><!--[-->return Reflect 的执行结果<!--]--></li>
                <!--]-->
              </ul>
              <h3 class="title" id="参考" data-v-98ff1997>
                <a
                  aria-current="page"
                  href="/articles/javascript/proxyandreflect#参考"
                  class="router-link-active router-link-exact-active link"
                  data-v-98ff1997
                  ><!--[-->参考<!--]--><span class="symbol" data-v-98ff1997>#</span></a
                >
              </h3>
              <ul>
                <!--[-->
                <li>
                  <!--[--><a
                    href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set"
                    rel="nofollow"
                    target="_blank"
                    class="prose-a"
                    ><!--[-->https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set<!--]--><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="0.8em"
                      height="0.8em"
                      aria-hidden="true"
                      focusable="false"
                      viewbox="0 0 24 24"
                      class="icon external-icon"
                      data-v-b5945cb7
                    >
                      <path
                        fill="currentColor"
                        d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z"
                        data-v-b5945cb7
                      ></path></svg></a
                  ><!--]-->
                </li>
                <li>
                  <!--[--><a
                    href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set"
                    rel="nofollow"
                    target="_blank"
                    class="prose-a"
                    ><!--[-->https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set<!--]--><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="0.8em"
                      height="0.8em"
                      aria-hidden="true"
                      focusable="false"
                      viewbox="0 0 24 24"
                      class="icon external-icon"
                      data-v-b5945cb7
                    >
                      <path
                        fill="currentColor"
                        d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z"
                        data-v-b5945cb7
                      ></path></svg></a
                  ><!--]-->
                </li>
                <!--]-->
              </ul>
              <style>
                .ct-8d92c2 {
                  color: #6a9955;
                }
                .ct-9c7777 {
                  color: #c8c8c8;
                }
                .ct-6881ad {
                  color: #b5cea8;
                }
                .ct-19fb87 {
                  color: #c586c0;
                }
                .ct-cdf856 {
                  color: #dcdcaa;
                }
                .ct-28b8ec {
                  color: #ce9178;
                }
                .ct-c90c4a {
                  color: #9cdcfe;
                }
                .ct-d52385 {
                  color: #4fc1ff;
                }
                .ct-189df5 {
                  color: #d4d4d4;
                }
                .ct-06c629 {
                  color: #569cd6;
                }
              </style>
            </div>
            <!--]-->
            <nav class="nav" data-v-dfb18308>
              <div class="nav-item nav-item-before" data-v-dfb18308>
                <div class="dir-title" data-v-dfb18308></div>
                <a
                  href="/articles/javascript/floatingpointlossprecision"
                  class="link"
                  data-v-dfb18308
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    data-v-dfb18308
                    style="transform: scale(-1, 1)"
                    width="1em"
                    height="1em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="m12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"
                    /></svg
                  ><span class="title" data-v-dfb18308>js 浮点数存储精度丢失原理</span></a
                >
              </div>
              <div class="nav-item nav-item-after" data-v-dfb18308>
                <div class="dir-title" data-v-dfb18308></div>
                <a href="/articles/mobile/selfadaptiveanddpr" class="link" data-v-dfb18308
                  ><span class="title" data-v-dfb18308>真的，移动端尺寸自适应与 dpr 无关</span
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    role="img"
                    class="icon"
                    data-v-dfb18308
                    style=""
                    width="1em"
                    height="1em"
                    viewBox="0 0 24 24"
                    data-v-1664b317
                  >
                    <path
                      fill="currentColor"
                      d="m12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"
                    /></svg
                ></a>
              </div>
            </nav>
          </div>
        </main>
      </div>
      <div
        class="nuxt-loading-indicator"
        style="
          position: fixed;
          top: 0;
          right: 0;
          left: 0;
          pointer-events: none;
          width: auto;
          height: 3px;
          opacity: 0;
          background: repeating-linear-gradient(to right, #00dc82 0%, #34cdfe 50%, #0047e1 100%);
          background-size: Infinity% auto;
          transform: scaleX(0%);
          transform-origin: left;
          transition: transform 0.1s, height 0.4s, opacity 0.4s;
          z-index: 999999;
        "
      ></div>
      <!--]-->
    </div>
    <script type="module">
      import p from '/articles/javascript/proxyandreflect/_payload.js';
      window.__NUXT__ = {
        ...p,
        ...(function (a, b, c, d, e, f) {
          return {
            state: {
              $sicons: {
                'mdi:github': {
                  left: b,
                  top: b,
                  width: c,
                  height: c,
                  rotate: b,
                  vFlip: a,
                  hFlip: a,
                  body: '\u003Cpath fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"\u002F\u003E'
                },
                'ic:baseline-arrow-forward': {
                  left: b,
                  top: b,
                  width: c,
                  height: c,
                  rotate: b,
                  vFlip: a,
                  hFlip: a,
                  body: '\u003Cpath fill="currentColor" d="m12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"\u002F\u003E'
                },
                'material-symbols:copy-all-rounded': {
                  left: b,
                  top: b,
                  width: c,
                  height: c,
                  rotate: b,
                  vFlip: a,
                  hFlip: a,
                  body: '\u003Cpath fill="currentColor" d="M9 18q-.825 0-1.413-.588T7 16V4q0-.825.588-1.413T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.588 1.413T18 18H9Zm0-2h9V4H9v12Zm-6-1h2v-2H3v2Zm0-3.5h2v-2H3v2ZM10 22h2v-2h-2v2Zm-7-3.5h2v-2H3v2ZM5 22v-2H3q0 .825.588 1.413T5 22Zm1.5 0h2v-2h-2v2Zm7 0q.825 0 1.413-.588T15.5 20h-2v2ZM3 8h2V6q-.825 0-1.413.588T3 8Z"\u002F\u003E'
                }
              }
            },
            _errors: { 'content-navigation-8C37fagqQL': e, 'content-query-tD1yNpvbfE': e },
            serverRendered: true,
            prerenderedAt: 1685447130538,
            config: {
              public: {
                content: {
                  locales: [f],
                  defaultLocale: f,
                  integrity: 1685446921222,
                  experimental: { stripQueryParameters: a, clientDB: a, advancedIgnoresPattern: a },
                  api: { baseURL: '\u002Fapi\u002F_content' },
                  navigation: { fields: [] },
                  tags: {
                    p: 'prose-p',
                    a: 'prose-a',
                    blockquote: 'prose-blockquote',
                    'code-inline': 'prose-code-inline',
                    code: 'prose-code',
                    em: 'prose-em',
                    h1: 'prose-h1',
                    h2: 'prose-h2',
                    h3: 'prose-h3',
                    h4: 'prose-h4',
                    h5: 'prose-h5',
                    h6: 'prose-h6',
                    hr: 'prose-hr',
                    img: 'prose-img',
                    ul: 'prose-ul',
                    ol: 'prose-ol',
                    li: 'prose-li',
                    strong: 'prose-strong',
                    table: 'prose-table',
                    thead: 'prose-thead',
                    tbody: 'prose-tbody',
                    td: 'prose-td',
                    th: 'prose-th',
                    tr: 'prose-tr'
                  },
                  highlight: { theme: 'dark-plus' },
                  wsUrl: d,
                  documentDriven: a,
                  host: d,
                  trailingSlash: a,
                  anchorLinks: { depth: 4, exclude: [1] }
                }
              },
              app: { baseURL: '\u002F', buildAssetsDir: '\u002F_nuxt\u002F', cdnURL: d }
            }
          };
        })(false, 0, 24, '', null, 'zh-Hans')
      };
    </script>
    <script type="module" src="/_nuxt/entry.73671b33.js" crossorigin></script>
  </body>
</html>
