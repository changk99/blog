<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>真的，移动端尺寸自适应与 dpr 无关</title>
<script src="/blog/js/theme.js"></script>
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<link rel="icon" href="/blog/favicon.ico">
<meta property="og:title" content="真的，移动端尺寸自适应与 dpr 无关"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/entry.141f5eb8.js"><link rel="preload" as="style" href="/blog/_nuxt/entry.1624466f.css"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ArticleSearch.852dad08.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/AsideNav.aca10375.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/_...slug_.a8d5c97d.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ContentDoc.d33504f9.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ContentRenderer.fb8a9a3f.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ContentRendererMarkdown.a35c9240.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ContentQuery.4885cd11.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ClientOnlyIcon.a4ba4e50.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ProseH2.ed4426d9.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ProseP.ba66a029.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ProseA.e54e6eb4.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/Link.12e05f08.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ProseCode.8df737ff.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/use-global-config.03beb6d7.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ProseImg.61e5955e.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ProseOl.d765a2ce.js"><link rel="modulepreload" as="script" crossorigin href="/blog/_nuxt/ProseLi.dc3aad90.js"><link rel="prefetch" as="image" type="image/jpeg" href="/blog/_nuxt/changlishe.0913a958.jpg"><link rel="prefetch" as="script" crossorigin href="/blog/_nuxt/client-db.2362d050.js"><link rel="prefetch" as="script" crossorigin href="/blog/_nuxt/error-component.4a3d84f3.js"><link rel="stylesheet" href="/blog/_nuxt/entry.1624466f.css"><style>.header{-webkit-box-pack:end;-ms-flex-pack:end;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--blog-bg);background-image:linear-gradient(0deg,var(--blog-divider-light),var(--blog-divider-light) 1px,transparent 1px,transparent);display:-webkit-box;display:-ms-flexbox;display:flex;height:var(--navigation-bar-height);justify-content:flex-end;position:sticky;top:0;z-index:100}.header .item{cursor:pointer;margin-right:12px}.header .search{margin-right:auto}.header .avatar-home{-ms-flex-negative:0;flex-shrink:0}@supports ((-webkit-backdrop-filter:blur(1px)) or (backdrop-filter:blur(1px))){.header{-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background-color:transparent}}.container{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:calc(100% - var(--window-top))}.aside{background-color:var(--blog-bg-regular);min-width:var(--aside-min-width)}.aside-stick{max-height:calc(100vh - var(--navigation-bar-height));overflow:auto;padding-bottom:50px;position:sticky;top:var(--window-top)}.aside-stick,.main{-webkit-box-sizing:border-box;box-sizing:border-box}.main{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;min-height:calc(100vh - var(--navigation-bar-height));min-width:0;padding:1.5em;padding-bottom:var(--safe-bottom-area)}.fade-enter-active,.fade-leave-active{-webkit-transition:all .2s;transition:all .2s}.fade-enter-from,.fade-leave-to{opacity:0}.slide-enter-active{-webkit-transition:all .4s;transition:all .4s}.slide-leave-active{-webkit-transition:all .2s;transition:all .2s}.slide-enter-from,.slide-leave-to{-webkit-transform:translateY(100%);transform:translateY(100%)}#__nuxt{background-color:var(--blog-bg-soft)}.to-top{border:1px solid;border-radius:50%;bottom:1em;color:var(--blog-brand-light);cursor:pointer;line-height:1;opacity:.8;padding:.2em;position:fixed;right:2em}.to-top:hover{opacity:1}.article-outline{max-width:300px}@media screen and (max-width:900px){.article-outline{-webkit-box-shadow:1px 1px 5px 1px var(--blog-shadow-color);box-shadow:1px 1px 5px 1px var(--blog-shadow-color);-webkit-box-sizing:border-box;box-sizing:border-box;max-width:var(--aside-max-width);min-height:calc(100% - var(--navigation-bar-height));min-height:100%;position:fixed;right:0;top:var(--navigation-bar-height);-webkit-transform:translateX(calc(var(--aside-max-width) + 20px));transform:translateX(calc(var(--aside-max-width) + 20px));-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;z-index:100}.article-outline.open{-webkit-transform:translateX(0);transform:translateX(0)}.article-outline .right-aside{position:static}}@media screen and (max-width:768px){.menu{-webkit-box-shadow:-2px 2px 5px 1px var(--blog-shadow-color);box-shadow:-2px 2px 5px 1px var(--blog-shadow-color);left:0;max-width:var(--aside-max-width);min-height:calc(100% - var(--navigation-bar-height));position:fixed;top:var(--navigation-bar-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;z-index:100}.menu.open{-webkit-transform:scale(1);transform:scale(1)}.menu .left-aside{position:static}}@media screen and (max-width:500px){.search.is-focus{-webkit-box-flex:1;-ms-flex:1;flex:1}.search.is-focus .el-autocomplete{width:100%}.search.is-focus~.item{display:none}}.nuxt-loading-indicator{top:var(--navigation-bar-height)!important}</style><style>.article-search-wrapper .el-input{--el-input-focus-border-color:var(--blog-brand-light)}.article-search-wrapper .el-input__wrapper{background-color:transparent;border-radius:0;-webkit-box-shadow:0 1px 0 0 transparent;box-shadow:0 1px 0 0 transparent;padding:0}.article-search-wrapper .el-input__wrapper.is-focus{-webkit-box-shadow:0 1px 0 0 var(--el-input-focus-border-color);box-shadow:0 1px 0 0 var(--el-input-focus-border-color)}.article-search-wrapper .el-input__suffix .el-input__icon{color:var(--blog-brand-light)}.article-search-wrapper .el-input__suffix .el-input__icon:hover{color:var(--blog-brand-dark)}.article-search .el-autocomplete-suggestion{max-width:500px}.article-search .empty{font-size:12px}.article-search a{line-height:1.6;padding:0 .2em .2em;position:relative;text-decoration:none;vertical-align:baseline}.article-search a,.article-search a:visited{color:var(--blog-brand-light)}.article-search a:hover{color:var(--blog-brand-highlight)}.article-search a:active{color:var(--blog-brand-light)}.article-search-wrapper{padding:0 1em}@media screen and (max-width:500px){.article-search .el-autocomplete-suggestion{max-width:300px}.article-search .el-autocomplete-suggestion li{white-space:normal}}</style><style>.nav[data-v-99f34480]{cursor:auto!important}.dropdown[data-v-99f34480]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;direction:ltr;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dropdown .title[data-v-99f34480]{font-size:14px;white-space:nowrap}.dropdown .arrow[data-v-99f34480]{padding:0 .3em;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.nav-list[data-v-99f34480]{-webkit-box-pack:center;-ms-flex-pack:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;justify-content:center;list-style:none;margin:0;padding:0}.nav-list a[data-v-99f34480]{color:var(--blog-text-1);font-size:14px;text-decoration:none;white-space:nowrap}.nav-item[data-v-99f34480]{margin:0;padding:.1em .3em;position:relative}.nav-item.active[data-v-99f34480],.nav-item[data-v-99f34480]:hover{color:var(--blog-brand-light)}.nav-item a[data-v-99f34480]{color:inherit}.nav-item[data-v-99f34480]:before{border-bottom:2px solid var(--blog-brand-light);content:"";height:100%;left:100%;position:absolute;top:0;-webkit-transition:all .2s linear;transition:all .2s linear;width:0;z-index:-1}.nav-item[data-v-99f34480]:hover:before{left:0;width:100%}.nav-item:hover~.nav-item[data-v-99f34480]:before{left:0}@media screen and (max-width:500px){.nav[data-v-99f34480]{direction:rtl}.dropdown[data-v-99f34480]{display:-webkit-box;display:-ms-flexbox;display:flex}.dropdown.open .arrow[data-v-99f34480]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.dropdown .title.active[data-v-99f34480]{color:var(--blog-brand-light)}.nav-list[data-v-99f34480]{--top:auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;background-color:var(--blog-bg-regular);border:1px solid var(--blog-text-4);border-radius:.4em;-webkit-box-shadow:var(--blog-shadow-4);box-shadow:var(--blog-shadow-4);direction:ltr;-ms-flex-direction:column;flex-direction:column;margin-top:.2em;padding:.5em .4em 1em;position:fixed;top:var(--top);-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.nav-list a[data-v-99f34480]{font-size:13px}.nav-list[data-v-99f34480]:after{border-bottom:1px solid transparent;border-left:1px solid var(--blog-text-4);border-right:1px solid transparent;border-top:1px solid var(--blog-text-4);height:.3em;right:calc(50% - .3em);top:calc(-.3em + 1px);-webkit-transform:rotate(45deg);transform:rotate(45deg);width:.3em;z-index:-1}.nav-list[data-v-99f34480]:after,.nav-list[data-v-99f34480]:before{background-color:var(--blog-bg-regular);content:"";position:absolute}.nav-list[data-v-99f34480]:before{height:.5em;pointer-events:none;right:calc(50% - .5em);top:0;width:1em}.dropdown.open+.nav-list[data-v-99f34480]{-webkit-transform:scale(1);transform:scale(1)}}</style><style>.theme-change[data-v-eea72278]{font-size:0}.theme-change .switch[data-v-eea72278]{background:var(--blog-bg-soft);border:1px solid var(--blog-border-color-1);border-radius:10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;display:inline-block;font-size:16px;height:20px;margin:0;outline:none;position:relative;-webkit-transition:border-color var(--transition-duration),background-color var(--transition-duration)!important;transition:border-color var(--transition-duration),background-color var(--transition-duration)!important;width:40px}.theme-change .switch[data-v-eea72278]:hover{border-color:var(--blog-border-color-3)}.theme-change .switch__action[data-v-eea72278]{background-color:var(--blog-bg);border-radius:50%;color:var(--blog-text-1);left:1px;position:absolute;top:1px;-webkit-transform:translate(0);transform:translate(0);-webkit-transition:border-color var(--transition-duration),background-color var(--transition-duration),-webkit-transform var(--transition-duration)!important;transition:border-color var(--transition-duration),background-color var(--transition-duration),-webkit-transform var(--transition-duration)!important;transition:border-color var(--transition-duration),background-color var(--transition-duration),transform var(--transition-duration)!important;transition:border-color var(--transition-duration),background-color var(--transition-duration),transform var(--transition-duration),-webkit-transform var(--transition-duration)!important}.theme-change .switch__action[data-v-eea72278],.theme-change .switch__icon[data-v-eea72278]{height:16px;width:16px}.theme-change .switch__icon[data-v-eea72278]{position:relative}.theme-change .icon[data-v-eea72278]{left:0;position:absolute;top:0;-webkit-transition:color var(--transition-duration),opacity var(--transition-duration)!important;transition:color var(--transition-duration),opacity var(--transition-duration)!important}.theme-change .dark-icon[data-v-eea72278]{opacity:0}.dark .switch__action[data-v-eea72278]{-webkit-transform:translate(20px);transform:translate(20px)}.dark .dark-icon[data-v-eea72278]{opacity:1}.dark .light-icon[data-v-eea72278]{opacity:0}</style><style>.icon[data-v-95f7ae78]{fill:currentColor;vertical-align:middle}</style><style>.icon[data-v-42e682c2]{fill:currentColor;vertical-align:middle}</style><style>.icon[data-v-7a55d05e]{fill:currentColor;vertical-align:middle}</style><style>.aside-nav{--el-menu-item-height:44px;--el-menu-base-level-padding:20px;--el-menu-level-padding:1em;--el-menu-sub-item-height:calc(var(--el-menu-item-height) - 6px);padding-top:1em}.aside-nav a{-webkit-box-flex:1;color:var(--blog-text-2);-ms-flex:1;flex:1;overflow:hidden;text-decoration:none;text-overflow:ellipsis}.aside-nav a:hover{color:var(--blog-text-1)}.aside-nav a.router-link-active{color:var(--blog-brand-light)}.aside-nav .el-menu-item{cursor:auto;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:12px;margin:0}.aside-nav .el-divider--horizontal{margin:12px 0}.open-menu{color:var(--blog-brand-light);cursor:pointer;left:0;opacity:.9;padding:.1em .5em .5em;position:fixed;top:calc(var(--navigation-bar-height));-webkit-transition:opacity .3s;transition:opacity .3s;z-index:101}.open-menu .toggle-icon{-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s}.open-menu.open .toggle-icon{-webkit-transform:rotate(215deg);transform:rotate(215deg)}.scrolling .open-menu{opacity:0}@media screen and (min-width:768px){.open-menu{display:none}}</style><style>.wrapper[data-v-1423ab59]{-webkit-box-pack:center;-ms-flex-pack:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:none;height:50px;justify-content:center}.wrapper.loading[data-v-1423ab59]{display:-webkit-box;display:-ms-flexbox;display:flex}.snow[data-v-1423ab59]{-webkit-animation:rotating-1423ab59 2s linear infinite;animation:rotating-1423ab59 2s linear infinite;color:var(--blog-text-2);height:24px;width:24px}@-webkit-keyframes rotating-1423ab59{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotating-1423ab59{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.spinner[data-v-1423ab59]{height:24px;width:24px}.spinner .path[data-v-1423ab59]{stroke-dasharray:90,150;stroke-dashoffset:0;stroke-width:2;stroke:var(--blog-text-2);stroke-linecap:round;-webkit-animation:loading-dash-1423ab59 1.5s ease-in-out infinite;animation:loading-dash-1423ab59 1.5s ease-in-out infinite}.spinner .circular[data-v-1423ab59]{-webkit-animation:loading-rotate-1423ab59 2s linear infinite;animation:loading-rotate-1423ab59 2s linear infinite}@-webkit-keyframes loading-dash-1423ab59{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}@keyframes loading-dash-1423ab59{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}@-webkit-keyframes loading-rotate-1423ab59{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-rotate-1423ab59{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}</style><style>.content-doc[data-v-58a2f6cb]{padding-bottom:2em}.content-doc[data-v-58a2f6cb] .content{min-height:400px}.content-doc .error[data-v-58a2f6cb]{color:var(--blog-text-1);font-size:2.66667vw;text-align:center}.content-doc .error[data-v-58a2f6cb] .refresh{color:var(--blog-brand-light);cursor:pointer}.nav[data-v-58a2f6cb]{-webkit-box-pack:justify;-ms-flex-pack:justify;display:-webkit-box;display:-ms-flexbox;display:flex;justify-content:space-between}.nav .link[data-v-58a2f6cb]{color:var(--blog-brand-light);font-weight:bolder;line-height:1.6;text-decoration:none;vertical-align:baseline;white-space:nowrap}.nav .link .title[data-v-58a2f6cb]{display:inline-block;vertical-align:middle;white-space:normal}.nav .link[data-v-58a2f6cb]:hover{color:var(--blog-brand-highlight)}.nav .link[data-v-58a2f6cb]:active{color:var(--blog-brand-light)}.nav .dir-title[data-v-58a2f6cb]{color:var(--blog-text-2);font-size:14px}.nav .nav-item[data-v-58a2f6cb]{min-width:0;word-break:break-all}.nav .nav-item-after .dir-title[data-v-58a2f6cb]{margin-right:1em;text-align:right}.nav .nav-item-before[data-v-58a2f6cb]{padding-right:2em}.nav .nav-item-before .dir-title[data-v-58a2f6cb]{margin-left:1em}</style><style>.icon[data-v-bfbb85d1]{fill:currentColor;vertical-align:middle}</style><style>.icon[data-v-d5088638]{fill:currentColor;vertical-align:middle}</style><style>.title[data-v-924fdd6f]{color:var(--blog-text-h);font-size:var(--blog-font-size-h2);margin:.2em 0;padding-left:.2em}.link[data-v-924fdd6f]{color:inherit;text-decoration:none}.symbol[data-v-924fdd6f]{color:var(--blog-brand-light);opacity:0}.title:hover .symbol[data-v-924fdd6f]{opacity:1}</style><style>.prose-p[data-v-4aba2c1d]{padding:0}</style><style>.prose-a{border-bottom:1px dashed;font-weight:bolder;line-height:1.6;padding:0 .2em .2em;position:relative;text-decoration:none;vertical-align:baseline}.prose-a,.prose-a:visited{color:var(--blog-brand-light)}.prose-a:hover{color:var(--blog-brand-highlight)}.prose-a:active{color:var(--blog-brand-light)}.prose-a .external-icon{margin-left:-.8em;opacity:0;-webkit-transform:translate(.8em,-.8em);transform:translate(.8em,-.8em)}.prose-a:hover .external-icon{opacity:1}</style><style>.icon[data-v-20b97dad]{fill:currentColor;vertical-align:middle}</style><style>.prose-code{background-color:var(--blog-gray-light-5);border:1px solid var(--blog-border-color-3);border-radius:var(--blog-radius-2);-webkit-box-sizing:border-box;box-sizing:border-box;margin:1em 0;padding:1em;position:relative}.prose-code.lang{background-color:var(--blog-black-regular);padding-bottom:0;padding-right:1.6em;padding-top:1.8em}.prose-code.lang .file-info{color:var(--blog-text-dark-2);font-size:12px;position:absolute;right:1em;top:.5em}.prose-code.lang pre code{word-wrap:normal;font-size:.9em;line-height:1.35;white-space:pre}.prose-code.no-lang{padding-bottom:.2em;padding-top:1.2em}.prose-code.no-lang pre{font-family:inherit}.prose-code.no-lang pre code{font-family:inherit;padding-bottom:.8em;white-space:pre-wrap}.prose-code.no-lang a{padding:0 .2em;position:relative;text-decoration:none;vertical-align:baseline}.prose-code.no-lang a,.prose-code.no-lang a:visited{color:var(--blog-brand-light)}.prose-code.no-lang a:hover{color:var(--blog-brand-highlight)}.prose-code.no-lang a:active{color:var(--blog-brand-light)}.prose-code pre{margin:0}.prose-code pre code{display:inline-block;overflow:auto;padding-bottom:1.5em;white-space:normal;width:100%}.prose-code .copy{bottom:.5em;color:var(--blog-text-dark-1);cursor:pointer;opacity:.5;position:absolute;right:.2em}.prose-code:hover .copy{opacity:1}pre code .line{display:block;line-height:1.6;min-height:1rem}.dark .prose-code.no-lang{background-color:var(--blog-black-regular)}.el-message--success.copy{--el-message-bg-color:var(--blog-bg-soft);--el-message-border-color:var(--blog-border-color-2);--el-message-text-color:var(--blog-text-2);white-space:nowrap;width:auto}.prose-code ::-webkit-scrollbar{height:8px;width:10px}.prose-code ::-webkit-scrollbar-track{background:var(--blog-black-soft);border-radius:10px}.prose-code ::-webkit-scrollbar-thumb{background:var(--blog-black-mute);border-radius:10px}.prose-code ::-webkit-scrollbar-thumb:hover{background:#646464;border-radius:10px}.prose-code ::-webkit-scrollbar-thumb:active{background:#444;border-radius:10px}@media screen and (max-width:768px){.prose-code ::-webkit-scrollbar{height:2px;width:2px}}</style></head>
<body ><div id="el-popper-container-1024"><div style="z-index:2018;position:absolute;left:0;top:0;display:none;" class="el-popper is-pure is-light el-autocomplete__popper article-search" tabindex="-1" aria-hidden="true"><!--[--><!--[--><!--[--><!--[--><div class="el-autocomplete-suggestion" style="min-width:;outline:none;" role="region"><div class="el-scrollbar" id="el-autocomplete-7463" role="listbox"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default" style=""><ul class="el-scrollbar__view el-autocomplete-suggestion__list" style=""><!--[--><!--]--></ul></div><!--[--><div class="el-scrollbar__bar is-horizontal" style="display:none;"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical" style="display:none;"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);"></div></div><!--]--></div></div><!--]--><span class="el-popper__arrow" style="position:absolute;" data-popper-arrow></span><!--]--><!--]--><!--]--></div><!--teleport anchor--></div><div id="__nuxt"><!--[--><header class="header"><div class="search item"><div class="article-search-wrapper"><!--[--><div class="el-autocomplete search el-tooltip__trigger el-tooltip__trigger" style="" role="combobox" aria-owns="el-autocomplete-7463"><div class="el-input el-input--prefix el-input--suffix" style=""><!-- input --><!--[--><!-- prepend slot --><!--v-if--><div class="el-input__wrapper"><!-- prefix slot --><span class="el-input__prefix"><span class="el-input__prefix-inner"><!--[--><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" aria-hidden="true" focusable="false" viewbox="0 0 20 20" class="icon search-icon" data-v-bfbb85d1><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" data-v-bfbb85d1></path></svg><!--]--><!--]--><!--v-if--></span></span><input class="el-input__inner" type="text" autocomplete="off" tabindex="0" placeholder="搜索" style=""><!-- suffix slot --><!--v-if--></div><!-- append slot --><!--v-if--><!--]--></div></div><!--teleport start--><!--teleport end--><!--]--></div></div><nav class="nav item" data-v-99f34480><!--[--><div class="dropdown" data-v-99f34480><span class="title" data-v-99f34480>文章</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" aria-hidden="true" focusable="false" viewbox="0 0 1024 1024" class="icon arrow" data-v-99f34480 data-v-d5088638><path d="M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z" data-v-d5088638></path></svg></div><ul class="nav-list" data-v-99f34480><!--[--><li class="active nav-item" data-v-99f34480><a href="/blog/articles/css/bfcstackcascading" class="" data-v-99f34480>文章</a></li><li class="nav-item" data-v-99f34480><a href="/blog/browser_plugins/modifyingwebdata/install" class="" data-v-99f34480>浏览器插件</a></li><li class="nav-item" data-v-99f34480><a href="/blog/tools/douyin" class="" data-v-99f34480>工具</a></li><!--]--></ul><!--]--></nav><div class="theme-change item" title="切换主题" data-v-eea72278><button role="switch" aria-label="切换暗色主题" aria-checked="false" class="switch" data-v-eea72278><div class="switch__action" data-v-eea72278><div class="switch__icon" data-v-eea72278><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon dark-icon icon" data-v-eea72278 data-v-95f7ae78><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z" data-v-95f7ae78></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon light-icon icon" data-v-eea72278 data-v-42e682c2><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z" data-v-42e682c2></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z" data-v-42e682c2></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z" data-v-42e682c2></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z" data-v-42e682c2></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z" data-v-42e682c2></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z" data-v-42e682c2></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z" data-v-42e682c2></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z" data-v-42e682c2></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z" data-v-42e682c2></path></svg></div></div></button></div><div title="github 仓库" class="item"><svg xmlns="http://www.w3.org/2000/svg" width="1.8em" height="1.8em" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-7a55d05e><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z" data-v-7a55d05e></path></svg></div><span class="el-avatar el-avatar--circle avatar-home item" style="--el-avatar-size:26px;" title="首页"><img src="/blog/_nuxt/changlishe.0913a958.jpg" alt="首页" style="object-fit:cover;"></span></header><div class="container"><aside style="" class="open aside menu"><div class="aside-stick left-aside"><nav class="nav"><span></span><ul role="menubar" style="--el-menu-level:0;" class="el-menu el-menu--vertical aside-nav"><!--[--><!--]--><div class="wrapper loading" data-v-1423ab59><div class="spinner" data-v-1423ab59><svg class="circular" viewBox="0 0 50 50" data-v-1423ab59><circle class="path" cx="25" cy="25" r="20" fill="none" data-v-1423ab59></circle></svg></div><!----></div><div class="el-divider el-divider--horizontal" style="--el-border-style:solid;" role="separator"><!--v-if--></div><!--[--><li class="el-menu-item" role="menuitem" tabindex="-1"><!--[--><!--[--><a href="/blog/test" class="">markdown</a><!--]--><!--[--><!--]--><!--]--></li><!--]--></ul></nav></div></aside><main class="main"><div class="content-doc" data-v-58a2f6cb><!--[--><div class="content"><h2 class="title" id="前言" data-v-924fdd6f><a aria-current="page" href="/blog/articles/mobile/selfadaptiveanddpr#前言" class="router-link-active router-link-exact-active link" data-v-924fdd6f><span class="content" data-v-924fdd6f><!--[-->前言<!--]--></span><span class="symbol" data-v-924fdd6f>#</span></a></h2><p class="prose-p" data-v-4aba2c1d><!--[-->做移动端自适应时可能很多人都对自适应和 dpr 之间的关系产生疑问,也有一些人会疑虑比如我的自适应方案没有加 dpr 会不会出问题,针对这些疑问我说一下我的见解,希望能解除你的担忧。<!--]--></p><h2 class="title" id="_1-什么是尺寸自适应" data-v-924fdd6f><a aria-current="page" href="/blog/articles/mobile/selfadaptiveanddpr#_1-什么是尺寸自适应" class="router-link-active router-link-exact-active link" data-v-924fdd6f><span class="content" data-v-924fdd6f><!--[-->1. 什么是尺寸自适应<!--]--></span><span class="symbol" data-v-924fdd6f>#</span></a></h2><p class="prose-p" data-v-4aba2c1d><!--[-->首先说到自适应,可能在不同人眼里理解不同，特别与响应式的关系,在这里说一下我所理解的自适应,和其与响应式的区别。先说响应式设计,响应式设计表示在不同的屏幕尺寸下,都有良好的布局和内容表现,简单一点的说,就是一个页面可以适配多种不同尺寸的屏幕,而且看上去还是设计良好的。为了实现这个目的,可能会利用 js 或者 css 去动态改变布局的尺寸,在这个过程中会伴随元素尺寸的改变,布局的改变,甚至会把元素隐藏,比如在 pc 端显示的页面转到移动端就会这样。而自适应往往考虑的是另一个方面,就是希望页面的设计与设计稿的设计比例一致,这个也是做自适应的目的,在这个过程中针对不同的屏幕宽度元素的尺寸也会改变,但是一般不会有布局改变,和元素的隐藏,因为设计稿就这样。所以按照我以上的说法,那些按照 css 媒体查询写的自适应严格来说不叫自适应,因为断点之间会造成比例误差,而让误差少一点就得多插值。很明显使用 css 媒体查询并不是做自适应的好方法,我们需要一种准确的方法来做这个事,这个时候 js 就出来了,下面将会列举坊间流传甚广的淘宝方案和网易方案。<!--]--></p><h2 class="title" id="_2-淘宝方案" data-v-924fdd6f><a aria-current="page" href="/blog/articles/mobile/selfadaptiveanddpr#_2-淘宝方案" class="router-link-active router-link-exact-active link" data-v-924fdd6f><span class="content" data-v-924fdd6f><!--[-->2. 淘宝方案<!--]--></span><span class="symbol" data-v-924fdd6f>#</span></a></h2><p class="prose-p" data-v-4aba2c1d><!--[-->点这里可以看到淘宝方案具体的代码<a href="https://github.com/huainanhai/flexible/blob/master/public/js/frame/flexible.debug.js" rel="nofollow" target="_blank" class="prose-a"><!--[-->flexible<!--]--><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon external-icon" data-v-20b97dad><path fill="currentColor" d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z" data-v-20b97dad></path></svg></a><!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->当然具体的代码是做了很多的边界处理和兼容处理的,但是核心可以浓缩为以下代码<!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-ddf197">(</span><span class="ct-d656d1">function</span><span class="ct-ddf197"> () {
</span></span><span class="line" line="2"><span class="ct-ddf197">  </span><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">window</span><span class="ct-ddf197">.</span><span class="ct-d22c67">devicePixelRatio</span><span class="ct-ddf197">;
</span></span><span class="line" line="3"><span class="ct-ddf197">  </span><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">meta</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-5a8524">createElement</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;meta&#39;</span><span class="ct-ddf197">);
</span></span><span class="line" line="4"><span class="ct-ddf197">  </span><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">scale</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">1</span><span class="ct-ddf197"> / </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197">;
</span></span><span class="line" line="5"><span class="ct-ddf197">  </span><span class="ct-d22c67">meta</span><span class="ct-ddf197">.</span><span class="ct-5a8524">setAttribute</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;name&#39;</span><span class="ct-ddf197">, </span><span class="ct-f38d04">&#39;viewport&#39;</span><span class="ct-ddf197">);
</span></span><span class="line" line="6"><span class="ct-ddf197">  </span><span class="ct-d22c67">meta</span><span class="ct-ddf197">.</span><span class="ct-5a8524">setAttribute</span><span class="ct-ddf197">(
</span></span><span class="line" line="7"><span class="ct-ddf197">    </span><span class="ct-f38d04">&#39;content&#39;</span><span class="ct-ddf197">,
</span></span><span class="line" line="8"><span class="ct-ddf197">    </span><span class="ct-f38d04">&#39;width=device-width, user-scalable=no, initial-scale=&#39;</span><span class="ct-ddf197"> +
</span></span><span class="line" line="9"><span class="ct-ddf197">      </span><span class="ct-d22c67">scale</span><span class="ct-ddf197"> +
</span></span><span class="line" line="10"><span class="ct-ddf197">      </span><span class="ct-f38d04">&#39;, maximum-scale=&#39;</span><span class="ct-ddf197"> +
</span></span><span class="line" line="11"><span class="ct-ddf197">      </span><span class="ct-d22c67">scale</span><span class="ct-ddf197"> +
</span></span><span class="line" line="12"><span class="ct-ddf197">      </span><span class="ct-f38d04">&#39;, minimum-scale=&#39;</span><span class="ct-ddf197"> +
</span></span><span class="line" line="13"><span class="ct-ddf197">      </span><span class="ct-d22c67">scale
</span></span><span class="line" line="14"><span class="ct-ddf197">  );
</span></span><span class="line" line="15"><span class="ct-ddf197">  </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-5a8524">getElementsByTagName</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;head&#39;</span><span class="ct-ddf197">)[</span><span class="ct-3924bb">0</span><span class="ct-ddf197">].</span><span class="ct-5a8524">appendChild</span><span class="ct-ddf197">(</span><span class="ct-d22c67">meta</span><span class="ct-ddf197">);
</span></span><span class="line" line="16"><span class="ct-ddf197">  </span><span class="ct-9c92a2">// 动态设置的缩放大小会影响布局视口的尺寸
</span></span><span class="line" line="17"><span class="ct-ddf197">  </span><span class="ct-d656d1">function</span><span class="ct-ddf197"> </span><span class="ct-5a8524">resize</span><span class="ct-ddf197">() {
</span></span><span class="line" line="18"><span class="ct-ddf197">    </span><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">deviceWidth</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-d22c67">documentElement</span><span class="ct-ddf197">.</span><span class="ct-d22c67">clientWidth</span><span class="ct-ddf197">;
</span></span><span class="line" line="19"><span class="ct-ddf197">    </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-d22c67">documentElement</span><span class="ct-ddf197">.</span><span class="ct-d22c67">style</span><span class="ct-ddf197">.</span><span class="ct-d22c67">fontSize</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">deviceWidth</span><span class="ct-ddf197"> / </span><span class="ct-3924bb">10</span><span class="ct-ddf197"> + </span><span class="ct-f38d04">&#39;px&#39;</span><span class="ct-ddf197">;
</span></span><span class="line" line="20"><span class="ct-ddf197">  }
</span></span><span class="line" line="21"><span class="ct-ddf197">  </span><span class="ct-5a8524">resize</span><span class="ct-ddf197">();
</span></span><span class="line" line="22"><span class="ct-ddf197">  </span><span class="ct-d22c67">window</span><span class="ct-ddf197">.</span><span class="ct-d22c67">onresize</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">resize</span><span class="ct-ddf197">;
</span></span><span class="line" line="23"><span class="ct-ddf197">})();</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->这段代码放在浏览器上就能做到自适应了,他的过程是先获取设备的 dpr,所谓的 dpr 就是设备像素比,什么是设备像素比呢,就是单位尺寸内,设备物理像素的个数除以设备独立像素的大小,物理像素就是手机屏幕上一个一个的发光的点,大小是固定的,独立像素也叫做逻辑像素,css 设置的像素大小就是逻辑像素,对于 dpr 等于 2 的手机屏幕,设置 css 宽度为 1px,其实覆盖的是 2 个设备物理像素。回到正题,拿到 dpr 后,通过动态设置 meta 的 viewport 值,进行对布局的缩放操作。这里有一个关键,就是设置 width=device-width 和 initial-scale 的大小,在描述两者的作用之前我们先要理解一个概念就是布局视口,布局视口在之前有一个别名叫做初始包含块,而在比较早的文献中初始包含块也叫做画布。理解画布可能比理解布局视口更简单,如果你按比例绘图,很多时候就要参照你所用画布的大小,比如设计师在 750px 画了一个 200px 的正方形,如果你要在一张大小是 100cm 的纸上画,你可能就要这样计算正方形的宽度了 100cm * 200 / 750,可以看到这个计算中是没有用到 dpr,你的笔触跨过多少个纸张分子,多少个原子根本就不影响我的绘图比例。我们的画画的过程就相当于设置 css 的过程,css 的尺寸依赖的就是布局视口的大小,而网页的布局视口大小在标准模式下可以这样获取<!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-d22c67">documentElement</span><span class="ct-ddf197">.</span><span class="ct-d22c67">clientWidth</span><span class="ct-ddf197">;</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->而两个关键的元素设置 width=device-width,initial-scale = scale,做的事情就是先把布局视口放大 dpr 倍,然后整体缩放相应倍数以适应设备尺寸。这个也很容易验证在控制台打印布局视口大小就行了<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[--><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444eb6cffc5c8b~tplv-t2oaga2asx-image.image" alt="图片">
这是按照 640px 设计规范,设计图上标注 200px 元素大小,可以看出布局视口放大了 3 倍,然后再整体缩放到设备屏幕大小,由于这里是证明这个过程其实与 dpr 无关,我现在把 scale 的大小分别设置为
0.1 和 0.5<!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">meta</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-5a8524">createElement</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;meta&#39;</span><span class="ct-ddf197">);
</span></span><span class="line" line="2"><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">scale</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">0.1</span><span class="ct-ddf197">;
</span></span><span class="line" line="3"><span class="ct-d22c67">meta</span><span class="ct-ddf197">.</span><span class="ct-5a8524">setAttribute</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;name&#39;</span><span class="ct-ddf197">, </span><span class="ct-f38d04">&#39;viewport&#39;</span><span class="ct-ddf197">);</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[--><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444ed132e70696~tplv-t2oaga2asx-image.image" alt="0.1"><!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">meta</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-5a8524">createElement</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;meta&#39;</span><span class="ct-ddf197">);
</span></span><span class="line" line="2"><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">scale</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">0.5</span><span class="ct-ddf197">;
</span></span><span class="line" line="3"><span class="ct-d22c67">meta</span><span class="ct-ddf197">.</span><span class="ct-5a8524">setAttribute</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;name&#39;</span><span class="ct-ddf197">, </span><span class="ct-f38d04">&#39;viewport&#39;</span><span class="ct-ddf197">);</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[--><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444edd6d16eb1c~tplv-t2oaga2asx-image.image" alt="0.5"><!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->这里可以看到就算我设置 scale 不等于 1 / drp 的大小也不妨碍我按设计图的比例画出元素
这里要注意两点,因为我是用 chrome 模拟的,设置的时候发现几个问题<!--]--></p><ol><!--[--><li><!--[-->scale 的值如果小于 0.1 布局视口也只能放大 10 倍,也就是布局视口最多放大 10 倍<!--]--></li><li><!--[-->当 scale 的值大于 1 时布局视口并不会缩小,而且布局视口不再匹配设备宽度,这种情况实际不会出现。<!--]--></li><li><!--[-->如果你引入了 flexible.js 进行测试,要注意删除边界条件,因为缩放影响了布局视口大小,相应的边界条件会触发,导致误认为 dpr 与自适应有关<!--]--></li><!--]--></ol><p class="prose-p" data-v-4aba2c1d><!--[-->要做到自适应关键是让元素的尺寸与布局视口绑定关系,在这里虽然布局视口放大了,但并不影响这种绑定关系,这里淘宝方案把布局视口的宽度分割了十等份,每份的大小相当于布局宽度的十分之一,而把每份的大小分配给根元素的字体大小,元素尺寸就可以设置 rem 单位来与布局视口绑定关系,以 200px 尺寸为例,他们比例映射是这样的<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->200px : 640px =&gt; xrem : 10rem<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->这里的 10rem 就是布局视口宽度,元素尺寸只要维持这个比例关系就行了,与 dpr 是没有关系的<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->x= 10 * 200 / 640 = 3.125rem<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->这里的计算可能会费一点时间,也有一些插件可以辅助把 px 转为 rem 的
但是方案是死的,人是活的,你只要把淘宝固有的十等分改一下就行了,比如设计稿是 640px 的
改一下<!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-d22c67">documentElement</span><span class="ct-ddf197">.</span><span class="ct-d22c67">style</span><span class="ct-ddf197">.</span><span class="ct-d22c67">fontSize</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">deviceWidth</span><span class="ct-ddf197"> / </span><span class="ct-3924bb">6.4</span><span class="ct-ddf197"> + </span><span class="ct-f38d04">&#39;px&#39;</span><span class="ct-ddf197">;</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->分了 6.4 等份<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->200px : 640px =&gt; xrem : 6.4rem<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->x 一看就知道是 2rem<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->流程： rem =&gt; 根元素字体大小 =&gt; 布局视口<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->当然也可以分割为 100 等份,这样方便为以后使用 vw 单位进行过渡<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->那么为什么淘宝要引入 dpr,把布局放大再缩小呢,其中一点就是这个方案可以很好地解决 1px 边框的问题,对于高清屏来说设置 1px 像素大小,其实横跨的是 dpr 个设备像素,这样看起来线条不够细,与设计稿就产生出入,而通过布局放大再缩小的方案刚好就弥补了这个问题。但是随之而来也带来一个问题,看上面的截图我们看到字体大小发生了改变,在 scale 设置为 0.1 时基本就看不见了,原因是一般我们的字体大小的设置不会使用 rem,而是使用 px 单位,这里的字体大小没有随布局视口的放大而增大,却随页面的整体缩放而缩小了,这里就得要针对不同的 dpr 做响应的处理,在淘宝的代码中我们可以看到<!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-d22c67">docEl</span><span class="ct-ddf197">.</span><span class="ct-5a8524">setAttribute</span><span class="ct-ddf197">(</span><span class="ct-f38d04">&#39;data-dpr&#39;</span><span class="ct-ddf197">, </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197">);</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->就是通过在根元素上挂载 dpr 信息,然后设置相应的 css 属性例如<!--]--></p><div class="lang prose-code"><div class="file-info">css</div><!--[--><pre><code><span class="line" line="1"><span class="ct-ddf197">[</span><span class="ct-d22c67">data-dpr</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&#39;2&#39;</span><span class="ct-ddf197">] </span><span class="ct-cb53b4">div</span><span class="ct-ddf197"> {
</span></span><span class="line" line="2"><span class="ct-ddf197">  </span><span class="ct-d22c67">font-size</span><span class="ct-ddf197">: </span><span class="ct-3924bb">32px</span><span class="ct-ddf197">;
</span></span><span class="line" line="3"><span class="ct-ddf197">}
</span></span><span class="line" line="4"><span class="ct-ddf197">[</span><span class="ct-d22c67">data-dpr</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&#39;3&#39;</span><span class="ct-ddf197">] </span><span class="ct-cb53b4">div</span><span class="ct-ddf197"> {
</span></span><span class="line" line="5"><span class="ct-ddf197">  </span><span class="ct-d22c67">font-size</span><span class="ct-ddf197">: </span><span class="ct-3924bb">48px</span><span class="ct-ddf197">;
</span></span><span class="line" line="6"><span class="ct-ddf197">}</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->特别对于安卓手机,各种神奇的 dpr,如果每个都这样设置将会是灾难
所以淘宝非常聪明<!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">isAndroid</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">win</span><span class="ct-ddf197">.</span><span class="ct-d22c67">navigator</span><span class="ct-ddf197">.</span><span class="ct-d22c67">appVersion</span><span class="ct-ddf197">.</span><span class="ct-5a8524">match</span><span class="ct-ddf197">(</span><span class="ct-739324">/android/</span><span class="ct-d656d1">gi</span><span class="ct-ddf197">);
</span></span><span class="line" line="2"><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">isIPhone</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">win</span><span class="ct-ddf197">.</span><span class="ct-d22c67">navigator</span><span class="ct-ddf197">.</span><span class="ct-d22c67">appVersion</span><span class="ct-ddf197">.</span><span class="ct-5a8524">match</span><span class="ct-ddf197">(</span><span class="ct-739324">/iphone/</span><span class="ct-d656d1">gi</span><span class="ct-ddf197">);
</span></span><span class="line" line="3"><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">devicePixelRatio</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">win</span><span class="ct-ddf197">.</span><span class="ct-d22c67">devicePixelRatio</span><span class="ct-ddf197">;
</span></span><span class="line" line="4"><span class="ct-964974">if</span><span class="ct-ddf197"> (</span><span class="ct-d22c67">isIPhone</span><span class="ct-ddf197">) {
</span></span><span class="line" line="5"><span class="ct-ddf197">  </span><span class="ct-9c92a2">// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案
</span></span><span class="line" line="6"><span class="ct-ddf197">  </span><span class="ct-964974">if</span><span class="ct-ddf197"> (</span><span class="ct-d22c67">devicePixelRatio</span><span class="ct-ddf197"> &gt;= </span><span class="ct-3924bb">3</span><span class="ct-ddf197"> &amp;&amp; (!</span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> || </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> &gt;= </span><span class="ct-3924bb">3</span><span class="ct-ddf197">)) {
</span></span><span class="line" line="7"><span class="ct-ddf197">    </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">3</span><span class="ct-ddf197">;
</span></span><span class="line" line="8"><span class="ct-ddf197">  } </span><span class="ct-964974">else</span><span class="ct-ddf197"> </span><span class="ct-964974">if</span><span class="ct-ddf197"> (</span><span class="ct-d22c67">devicePixelRatio</span><span class="ct-ddf197"> &gt;= </span><span class="ct-3924bb">2</span><span class="ct-ddf197"> &amp;&amp; (!</span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> || </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> &gt;= </span><span class="ct-3924bb">2</span><span class="ct-ddf197">)) {
</span></span><span class="line" line="9"><span class="ct-ddf197">    </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">2</span><span class="ct-ddf197">;
</span></span><span class="line" line="10"><span class="ct-ddf197">  } </span><span class="ct-964974">else</span><span class="ct-ddf197"> {
</span></span><span class="line" line="11"><span class="ct-ddf197">    </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">1</span><span class="ct-ddf197">;
</span></span><span class="line" line="12"><span class="ct-ddf197">  }
</span></span><span class="line" line="13"><span class="ct-ddf197">} </span><span class="ct-964974">else</span><span class="ct-ddf197"> {
</span></span><span class="line" line="14"><span class="ct-ddf197">  </span><span class="ct-9c92a2">// 其他设备下，仍旧使用1倍的方案
</span></span><span class="line" line="15"><span class="ct-ddf197">  </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">1</span><span class="ct-ddf197">;
</span></span><span class="line" line="16"><span class="ct-ddf197">}
</span></span><span class="line" line="17"><span class="ct-d22c67">scale</span><span class="ct-ddf197"> = </span><span class="ct-3924bb">1</span><span class="ct-ddf197"> / </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197">;</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->够简单直接,安卓高清屏是不存在的, 但是其实影响也不大,就是安卓屏的 1px 线条粗一点而已<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->如果除了要做自适应还要做响应式,那也得像上面设置字体一样一个一个设置,因为 css 媒体查询也是针对布局视口尺寸的。对于淘宝他们来说,肯定有一套工程化的方案来解决这种技术难题,对于遇到这个坑的伙伴估计得自已想办法了,预处理器是必不可少的。
从前面可以知道淘宝引入 dpr 并不是为了做自适应的,而是为了解决 1px 问题的,当然也引入了其他难题,既然如此,放弃解决 1px 问题,不就简单得多,网易方案就是这么做的。<!--]--></p><h2 class="title" id="_3网易方案" data-v-924fdd6f><a aria-current="page" href="/blog/articles/mobile/selfadaptiveanddpr#_3网易方案" class="router-link-active router-link-exact-active link" data-v-924fdd6f><span class="content" data-v-924fdd6f><!--[-->3.网易方案<!--]--></span><span class="symbol" data-v-924fdd6f>#</span></a></h2><p class="prose-p" data-v-4aba2c1d><!--[-->去除了边界处理和兼容处理，由于没有动态设置 meta 所以要在 head 中引入<!--]--></p><div class="lang prose-code"><div class="file-info">html</div><!--[--><pre><code><span class="line" line="1"><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">meta
</span></span><span class="line" line="2"><span class="ct-ddf197">  </span><span class="ct-d22c67">name</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;viewport&quot;
</span></span><span class="line" line="3"><span class="ct-ddf197">  </span><span class="ct-d22c67">content</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;
</span></span><span class="line" line="4"><span class="ct-c7c99a">/&gt;</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-ddf197">(</span><span class="ct-d656d1">function</span><span class="ct-ddf197"> () {
</span></span><span class="line" line="2"><span class="ct-ddf197">  </span><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">dpr</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">window</span><span class="ct-ddf197">.</span><span class="ct-d22c67">devicePixelRatio</span><span class="ct-ddf197">;
</span></span><span class="line" line="3"><span class="ct-ddf197">  </span><span class="ct-d656d1">function</span><span class="ct-ddf197"> </span><span class="ct-5a8524">resize</span><span class="ct-ddf197">() {
</span></span><span class="line" line="4"><span class="ct-ddf197">    </span><span class="ct-d656d1">var</span><span class="ct-ddf197"> </span><span class="ct-d22c67">deviceWidth</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-d22c67">documentElement</span><span class="ct-ddf197">.</span><span class="ct-d22c67">clientWidth</span><span class="ct-ddf197">;
</span></span><span class="line" line="5"><span class="ct-ddf197">    </span><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-d22c67">documentElement</span><span class="ct-ddf197">.</span><span class="ct-d22c67">style</span><span class="ct-ddf197">.</span><span class="ct-d22c67">fontSize</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">deviceWidth</span><span class="ct-ddf197"> / </span><span class="ct-3924bb">6.4</span><span class="ct-ddf197"> + </span><span class="ct-f38d04">&#39;px&#39;</span><span class="ct-ddf197">;
</span></span><span class="line" line="6"><span class="ct-ddf197">  }
</span></span><span class="line" line="7"><span class="ct-ddf197">  </span><span class="ct-5a8524">resize</span><span class="ct-ddf197">();
</span></span><span class="line" line="8"><span class="ct-ddf197">  </span><span class="ct-d22c67">window</span><span class="ct-ddf197">.</span><span class="ct-d22c67">onresize</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">resize</span><span class="ct-ddf197">;
</span></span><span class="line" line="9"><span class="ct-ddf197">})();</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->网易方案没有引入 dpr 相关的,这也说明了移动端自适应与 dpr 是无关的<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[--><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444f837fa7be33~tplv-t2oaga2asx-image.image" alt="0.6"><!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->从图片中可以看出和淘宝方案的区别,布局视口没有放大,整个页面也没有缩放,但是并不影响与设计图的比例<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->200px : 640px =&gt; xrem : 6.4rem<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->x= 2rem<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->流程: rem =&gt; 根元素的大小 =&gt; 布局视口<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->既然自适应与 dpr 无关那么就可以扩展出很多方案了<!--]--></p><h2 class="title" id="_4-其他方案" data-v-924fdd6f><a aria-current="page" href="/blog/articles/mobile/selfadaptiveanddpr#_4-其他方案" class="router-link-active router-link-exact-active link" data-v-924fdd6f><span class="content" data-v-924fdd6f><!--[-->4. 其他方案<!--]--></span><span class="symbol" data-v-924fdd6f>#</span></a></h2><p class="prose-p" data-v-4aba2c1d><!--[-->1.在布局视口等于设备宽度时,直接把根元素字体大小绑定到设备宽度大小上<!--]--></p><div class="lang prose-code"><div class="file-info">js</div><!--[--><pre><code><span class="line" line="1"><span class="ct-d22c67">document</span><span class="ct-ddf197">.</span><span class="ct-d22c67">documentElement</span><span class="ct-ddf197">.</span><span class="ct-d22c67">style</span><span class="ct-ddf197">.</span><span class="ct-d22c67">fontSize</span><span class="ct-ddf197"> = </span><span class="ct-d22c67">screen</span><span class="ct-ddf197">.</span><span class="ct-d22c67">width</span><span class="ct-ddf197"> / </span><span class="ct-3924bb">6.4</span><span class="ct-ddf197"> + </span><span class="ct-f38d04">&#39;px&#39;</span><span class="ct-ddf197">;</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[-->这里有关相关的文章 <a href="https://www.zhangxinxu.com/wordpress/2016/06/pseudo-response-layout-base-on-screen-width/" rel="nofollow" target="_blank" class="prose-a"><!--[-->基于 screen.width 的伪响应式开发<!--]--><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon external-icon" data-v-20b97dad><path fill="currentColor" d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z" data-v-20b97dad></path></svg></a><!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->2.直接定死布局视口<!--]--></p><div class="lang prose-code"><div class="file-info">html</div><!--[--><pre><code><span class="line" line="1"><span class="ct-c7c99a">&lt;!</span><span class="ct-d656d1">DOCTYPE</span><span class="ct-ddf197"> </span><span class="ct-d22c67">html</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="2"><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">html</span><span class="ct-ddf197"> </span><span class="ct-d22c67">lang</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;zh-CN&quot;</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="3"><span class="ct-ddf197">  </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">head</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="4"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">meta</span><span class="ct-ddf197"> </span><span class="ct-d22c67">charset</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;UTF-8&quot;</span><span class="ct-ddf197"> </span><span class="ct-c7c99a">/&gt;
</span></span><span class="line" line="5"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">meta</span><span class="ct-ddf197"> </span><span class="ct-d22c67">http-equiv</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;X-UA-Compatible&quot;</span><span class="ct-ddf197"> </span><span class="ct-d22c67">content</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;ie=edge&quot;</span><span class="ct-ddf197"> </span><span class="ct-c7c99a">/&gt;
</span></span><span class="line" line="6"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">meta</span><span class="ct-ddf197"> </span><span class="ct-d22c67">name</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;viewport&quot;</span><span class="ct-ddf197"> </span><span class="ct-d22c67">content</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;width=640, user-scalable=no&quot;</span><span class="ct-ddf197"> </span><span class="ct-c7c99a">/&gt;
</span></span><span class="line" line="7"><span class="ct-ddf197">    //定死为设计稿的尺寸
</span></span><span class="line" line="8"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">meta</span><span class="ct-ddf197"> </span><span class="ct-d22c67">name</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;renderer&quot;</span><span class="ct-ddf197"> </span><span class="ct-d22c67">content</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;webkit&quot;</span><span class="ct-ddf197"> </span><span class="ct-c7c99a">/&gt;
</span></span><span class="line" line="9"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">title</span><span class="ct-c7c99a">&gt;</span><span class="ct-ddf197">定死布局视口</span><span class="ct-c7c99a">&lt;/</span><span class="ct-d656d1">title</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="10"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">style</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="11"><span class="ct-ddf197">      </span><span class="ct-cb53b4">html</span><span class="ct-ddf197">,
</span></span><span class="line" line="12"><span class="ct-ddf197">      </span><span class="ct-cb53b4">body</span><span class="ct-ddf197"> {
</span></span><span class="line" line="13"><span class="ct-ddf197">        </span><span class="ct-d22c67">margin</span><span class="ct-ddf197">: </span><span class="ct-3924bb">0</span><span class="ct-ddf197">;
</span></span><span class="line" line="14"><span class="ct-ddf197">      }
</span></span><span class="line" line="15"><span class="ct-ddf197">      </span><span class="ct-cb53b4">div</span><span class="ct-ddf197"> {
</span></span><span class="line" line="16"><span class="ct-ddf197">        </span><span class="ct-d22c67">width</span><span class="ct-ddf197">: </span><span class="ct-3924bb">200px</span><span class="ct-ddf197">;
</span></span><span class="line" line="17"><span class="ct-ddf197">        </span><span class="ct-d22c67">height</span><span class="ct-ddf197">: </span><span class="ct-3924bb">200px</span><span class="ct-ddf197">;
</span></span><span class="line" line="18"><span class="ct-ddf197">        </span><span class="ct-d22c67">background</span><span class="ct-ddf197">: </span><span class="ct-f38d04">red</span><span class="ct-ddf197">;
</span></span><span class="line" line="19"><span class="ct-ddf197">      }
</span></span><span class="line" line="20"><span>
</span></span><span class="line" line="21"><span class="ct-ddf197">      </span><span class="ct-cb53b4">body</span><span class="ct-ddf197"> {
</span></span><span class="line" line="22"><span class="ct-ddf197">        </span><span class="ct-d22c67">background</span><span class="ct-ddf197">: </span><span class="ct-f38d04">blue</span><span class="ct-ddf197">;
</span></span><span class="line" line="23"><span class="ct-ddf197">      }
</span></span><span class="line" line="24"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;/</span><span class="ct-d656d1">style</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="25"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">script</span><span class="ct-c7c99a">&gt;&lt;/</span><span class="ct-d656d1">script</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="26"><span class="ct-ddf197">  </span><span class="ct-c7c99a">&lt;/</span><span class="ct-d656d1">head</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="27"><span class="ct-ddf197">  </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">body</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="28"><span class="ct-ddf197">    </span><span class="ct-c7c99a">&lt;</span><span class="ct-d656d1">div</span><span class="ct-ddf197"> </span><span class="ct-d22c67">id</span><span class="ct-ddf197">=</span><span class="ct-f38d04">&quot;size200px&quot;</span><span class="ct-c7c99a">&gt;</span><span class="ct-ddf197">元素大小200px</span><span class="ct-c7c99a">&lt;/</span><span class="ct-d656d1">div</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="29"><span class="ct-ddf197">  </span><span class="ct-c7c99a">&lt;/</span><span class="ct-d656d1">body</span><span class="ct-c7c99a">&gt;
</span></span><span class="line" line="30"><span class="ct-c7c99a">&lt;/</span><span class="ct-d656d1">html</span><span class="ct-c7c99a">&gt;</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><p class="prose-p" data-v-4aba2c1d><!--[--><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444fac35b57970~tplv-t2oaga2asx-image.image" alt="0.001"><!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->不用 rem 单位,不用设置 js,但是布局视口定死后,就不能用 css 媒体查询做响应式了,从这里也可以看出 viewport 属性的作用,就是让布局视口通过缩放来适配屏幕宽度,width=device.width 仅仅是让布局视口初始大小等于设备宽度,后面设置的 initial-scale 是用来缩放布局视口大小,而且默认是布局视口初始大小等于设备宽度,也就是所谓的理想视口,换个说法就是如果你设置了 initial-scale 你可以不用设置 width=device.width 了,淘宝方案你把 width=device.width 去掉,并不会影响自适应过程,加上主要是防止一些不按规范的浏览器出现兼容问题。如果还不能理解 viewport 的作用,那么可以参考 svg 中的 viewport 和 viewBox 的关系，原理是一样的。<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->3.使用新出单位 vw, vw 就是专门为自适应而出现的,100vw 就是布局视口的宽度,非常厉害,你也不用设置 js 了<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->200px: 640px =&gt; xvw : 100vw<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->x=200 * 100 / 640 = 31.25vw<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->流程: vw =&gt; 布局视口<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->看一下兼容性<!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[--><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/28/16444fc469953bd0~tplv-t2oaga2asx-image.image" alt><!--]--></p><p class="prose-p" data-v-4aba2c1d><!--[-->兼容还可以,这里也有相关的资料<a href="https://www.w3cplus.com/css/taobao-2018-year.html" rel="nofollow" target="_blank" class="prose-a"><!--[--> 分享手淘过年项目中采用到的前端技术<!--]--><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon external-icon" data-v-20b97dad><path fill="currentColor" d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3h8z" data-v-20b97dad></path></svg></a><!--]--></p><h2 class="title" id="总结" data-v-924fdd6f><a aria-current="page" href="/blog/articles/mobile/selfadaptiveanddpr#总结" class="router-link-active router-link-exact-active link" data-v-924fdd6f><span class="content" data-v-924fdd6f><!--[-->总结<!--]--></span><span class="symbol" data-v-924fdd6f>#</span></a></h2><p class="prose-p" data-v-4aba2c1d><!--[-->移动端尺寸自适应与 dpr 无关,除了淘宝方案外,其他方案都得处理 1px 的问题,但也减少针对不同 dpr 设备做响应式处理的麻烦,而且其中也没有一种一劳永逸的方案能解决全部问题。而作为新出来的单位 vw,是时候该入坑了<!--]--></p><h2 class="title" id="参考文章" data-v-924fdd6f><a aria-current="page" href="/blog/articles/mobile/selfadaptiveanddpr#参考文章" class="router-link-active router-link-exact-active link" data-v-924fdd6f><span class="content" data-v-924fdd6f><!--[-->参考文章<!--]--></span><span class="symbol" data-v-924fdd6f>#</span></a></h2><div class="no-lang prose-code"><div class="file-info"></div><!--[--><pre><code><span class="line" line="1"><span>1. 张鑫旭 [基于 screen.width 的伪响应式开发](https://www.zhangxinxu.com/wordpress/2016/06/pseudo-response-layout-base-on-screen-width/)
</span></span><span class="line" line="2"><span>
</span></span><span class="line" line="3"><span>2. 大漠 [分享手淘过年项目中采用到的前端技术](https://www.w3cplus.com/css/taobao-2018-year.html)
</span></span><span class="line" line="4"><span>
</span></span><span class="line" line="5"><span>3. [fleible](https://github.com/huainanhai/flexible/blob/master/public/js/frame/flexible.debug.js)</span></span></code></pre><!--]--><div title="复制" class="copy"><span></span></div></div><style>.ct-c7c99a{color:#808080}
.ct-964974{color:#C586C0}
.ct-739324{color:#D16969}
.ct-cb53b4{color:#D7BA7D}
.ct-9c92a2{color:#6A9955}
.ct-3924bb{color:#B5CEA8}
.ct-f38d04{color:#CE9178}
.ct-5a8524{color:#DCDCAA}
.ct-d22c67{color:#9CDCFE}
.ct-d656d1{color:#569CD6}
.ct-ddf197{color:#D4D4D4}</style></div><!--]--><nav class="nav" data-v-58a2f6cb><div class="nav-item nav-item-before" data-v-58a2f6cb><div class="dir-title" data-v-58a2f6cb>JavaScript</div><a href="/blog/articles/javascript/proxyandreflect" class="link" data-v-58a2f6cb><span style="transform:scale(-1, 1);" data-v-58a2f6cb></span><span class="title" data-v-58a2f6cb>es6 深入理解 Proxy 和 Reflect 这对影子兄弟</span></a></div><div class="nav-item nav-item-after" data-v-58a2f6cb><div class="dir-title" data-v-58a2f6cb></div><!----></div></nav></div></main><aside style="display:none;" class="aside article-outline"><div class="aside-stick right-aside"><span></span></div></aside></div><footer><div class="to-top" style="display:none;"><span></span></div></footer><div class="nuxt-loading-indicator" style="position:fixed;top:0;right:0;left:0;pointer-events:none;width:auto;height:3px;opacity:0;background:repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%);background-size:Infinity% auto;transform:scaleX(0%);transform-origin:left;transition:transform 0.1s, height 0.4s, opacity 0.4s;z-index:999999;"></div><!--]--></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK){return {data:{"search-navigation":[{title:bf,_path:bg,children:[{title:bh,_path:bi,children:[{title:bj,_path:bk},{title:bl,_path:bm},{title:bn,_path:bo}]},{title:bp,_path:bq,children:[{title:br,_path:bs},{title:bt,_path:bu},{title:bv,_path:bw},{title:bx,_path:by}]},{title:bz,_path:bA,children:[{title:az,_path:aA}]}]},{title:bB,_path:bC,children:[{title:bD,_path:bE,children:[{title:ag,_path:bF},{title:ah,_path:bG}]},{title:bH,_path:bI,children:[{title:ag,_path:bJ},{title:ah,_path:bK}]}]},{title:bL,_path:bM},{title:aB,_path:bN},{title:bO,_path:bP,children:[{title:bQ,_path:bR},{title:bS,_path:bT}]}],"content-navigation-8C37fagqQL":[{title:bf,_path:bg,children:[{title:bh,_path:bi,children:[{title:bj,_path:bk},{title:bl,_path:bm},{title:bn,_path:bo}]},{title:bp,_path:bq,children:[{title:br,_path:bs},{title:bt,_path:bu},{title:bv,_path:bw},{title:bx,_path:by}]},{title:bz,_path:bA,children:[{title:az,_path:aA}]}]},{title:bB,_path:bC,children:[{title:bD,_path:bE,children:[{title:ag,_path:bF},{title:ah,_path:bG}]},{title:bH,_path:bI,children:[{title:ag,_path:bJ},{title:ah,_path:bK}]}]},{title:bL,_path:bM},{title:aB,_path:bN},{title:bO,_path:bP,children:[{title:bQ,_path:bR},{title:bS,_path:bT}]}],"content-query-3Vt2u4kWb1":{_path:aA,_dir:"mobile",_draft:J,_partial:J,_locale:aC,_empty:J,title:az,description:r,body:{type:"root",children:[{type:a,tag:L,props:{id:ai},children:[{type:c,value:ai}]},{type:a,tag:g,props:{},children:[{type:c,value:"做移动端自适应时可能很多人都对自适应和 dpr 之间的关系产生疑问,也有一些人会疑虑比如我的自适应方案没有加 dpr 会不会出问题,针对这些疑问我说一下我的见解,希望能解除你的担忧。"}]},{type:a,tag:L,props:{id:bU},children:[{type:c,value:bV}]},{type:a,tag:g,props:{},children:[{type:c,value:"首先说到自适应,可能在不同人眼里理解不同，特别与响应式的关系,在这里说一下我所理解的自适应,和其与响应式的区别。先说响应式设计,响应式设计表示在不同的屏幕尺寸下,都有良好的布局和内容表现,简单一点的说,就是一个页面可以适配多种不同尺寸的屏幕,而且看上去还是设计良好的。为了实现这个目的,可能会利用 js 或者 css 去动态改变布局的尺寸,在这个过程中会伴随元素尺寸的改变,布局的改变,甚至会把元素隐藏,比如在 pc 端显示的页面转到移动端就会这样。而自适应往往考虑的是另一个方面,就是希望页面的设计与设计稿的设计比例一致,这个也是做自适应的目的,在这个过程中针对不同的屏幕宽度元素的尺寸也会改变,但是一般不会有布局改变,和元素的隐藏,因为设计稿就这样。所以按照我以上的说法,那些按照 css 媒体查询写的自适应严格来说不叫自适应,因为断点之间会造成比例误差,而让误差少一点就得多插值。很明显使用 css 媒体查询并不是做自适应的好方法,我们需要一种准确的方法来做这个事,这个时候 js 就出来了,下面将会列举坊间流传甚广的淘宝方案和网易方案。"}]},{type:a,tag:L,props:{id:bW},children:[{type:c,value:bX}]},{type:a,tag:g,props:{},children:[{type:c,value:"点这里可以看到淘宝方案具体的代码"},{type:a,tag:aD,props:{href:"https:\u002F\u002Fgithub.com\u002Fhuainanhai\u002Fflexible\u002Fblob\u002Fmaster\u002Fpublic\u002Fjs\u002Fframe\u002Fflexible.debug.js",rel:[aE]},children:[{type:c,value:"flexible"}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"当然具体的代码是做了很多的边界处理和兼容处理的,但是核心可以浓缩为以下代码"}]},{type:a,tag:m,props:{code:"(function () {\n  var dpr = window.devicePixelRatio;\n  var meta = document.createElement('meta');\n  var scale = 1 \u002F dpr;\n  meta.setAttribute('name', 'viewport');\n  meta.setAttribute(\n    'content',\n    'width=device-width, user-scalable=no, initial-scale=' +\n      scale +\n      ', maximum-scale=' +\n      scale +\n      ', minimum-scale=' +\n      scale\n  );\n  document.getElementsByTagName('head')[0].appendChild(meta);\n  \u002F\u002F 动态设置的缩放大小会影响布局视口的尺寸\n  function resize() {\n    var deviceWidth = document.documentElement.clientWidth;\n    document.documentElement.style.fontSize = deviceWidth \u002F 10 + 'px';\n  }\n  resize();\n  window.onresize = resize;\n})();\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:aj}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bY}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ak}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:R}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:aF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]}]},{type:a,tag:b,props:{class:f,line:K},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:S}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:al}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:T}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:U},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aH}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:am}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aI}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]}]},{type:a,tag:b,props:{class:f,line:aa},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"(\n"}]}]},{type:a,tag:b,props:{class:f,line:an},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"'content'"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bZ}]}]},{type:a,tag:b,props:{class:f,line:ao},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"'width=device-width, user-scalable=no, initial-scale='"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ab}]}]},{type:a,tag:b,props:{class:f,line:ap},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:S}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ab}]}]},{type:a,tag:b,props:{class:f,line:aJ},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"', maximum-scale='"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ab}]}]},{type:a,tag:b,props:{class:f,line:aK},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:S}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ab}]}]},{type:a,tag:b,props:{class:f,line:aL},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"', minimum-scale='"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ab}]}]},{type:a,tag:b,props:{class:f,line:aM},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"scale\n"}]}]},{type:a,tag:b,props:{class:f,line:aN},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"  );\n"}]}]},{type:a,tag:b,props:{class:f,line:aO},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:"getElementsByTagName"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"'head'"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:")["}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:b_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"]."}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:"appendChild"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]}]},{type:a,tag:b,props:{class:f,line:aP},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:aQ},children:[{type:c,value:"\u002F\u002F 动态设置的缩放大小会影响布局视口的尺寸\n"}]}]},{type:a,tag:b,props:{class:f,line:aR},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:aj}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:V}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:b$}]}]},{type:a,tag:b,props:{class:f,line:ca},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aS}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:cb},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:O}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aq}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:T}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:"10"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ar}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:as}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:cc},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aT}]}]},{type:a,tag:b,props:{class:f,line:cd},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:V}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ce}]}]},{type:a,tag:b,props:{class:f,line:cf},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ak}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cg}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:V}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:ch},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ci}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"这段代码放在浏览器上就能做到自适应了,他的过程是先获取设备的 dpr,所谓的 dpr 就是设备像素比,什么是设备像素比呢,就是单位尺寸内,设备物理像素的个数除以设备独立像素的大小,物理像素就是手机屏幕上一个一个的发光的点,大小是固定的,独立像素也叫做逻辑像素,css 设置的像素大小就是逻辑像素,对于 dpr 等于 2 的手机屏幕,设置 css 宽度为 1px,其实覆盖的是 2 个设备物理像素。回到正题,拿到 dpr 后,通过动态设置 meta 的 viewport 值,进行对布局的缩放操作。这里有一个关键,就是设置 width=device-width 和 initial-scale 的大小,在描述两者的作用之前我们先要理解一个概念就是布局视口,布局视口在之前有一个别名叫做初始包含块,而在比较早的文献中初始包含块也叫做画布。理解画布可能比理解布局视口更简单,如果你按比例绘图,很多时候就要参照你所用画布的大小,比如设计师在 750px 画了一个 200px 的正方形,如果你要在一张大小是 100cm 的纸上画,你可能就要这样计算正方形的宽度了 100cm * 200 \u002F 750,可以看到这个计算中是没有用到 dpr,你的笔触跨过多少个纸张分子,多少个原子根本就不影响我的绘图比例。我们的画画的过程就相当于设置 css 的过程,css 的尺寸依赖的就是布局视口的大小,而网页的布局视口大小在标准模式下可以这样获取"}]},{type:a,tag:m,props:{code:"document.documentElement.clientWidth;\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aS}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:at}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"而两个关键的元素设置 width=device-width,initial-scale = scale,做的事情就是先把布局视口放大 dpr 倍,然后整体缩放相应倍数以适应设备尺寸。这个也很容易验证在控制台打印布局视口大小就行了"}]},{type:a,tag:g,props:{},children:[{type:a,tag:W,props:{alt:"图片",src:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2018\u002F6\u002F28\u002F16444eb6cffc5c8b~tplv-t2oaga2asx-image.image"},children:[]},{type:c,value:"\n这是按照 640px 设计规范,设计图上标注 200px 元素大小,可以看出布局视口放大了 3 倍,然后再整体缩放到设备屏幕大小,由于这里是证明这个过程其实与 dpr 无关,我现在把 scale 的大小分别设置为\n0.1 和 0.5"}]},{type:a,tag:m,props:{code:"var meta = document.createElement('meta');\nvar scale = 0.1;\nmeta.setAttribute('name', 'viewport');\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:aF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:S}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:cj}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aH}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:am}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aI}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aU}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:a,tag:W,props:{alt:cj,src:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2018\u002F6\u002F28\u002F16444ed132e70696~tplv-t2oaga2asx-image.image"},children:[]}]},{type:a,tag:m,props:{code:"var meta = document.createElement('meta');\nvar scale = 0.5;\nmeta.setAttribute('name', 'viewport');\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:aF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aG}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:S}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:ck}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:e},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aH}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:am}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:aI}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aU}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:a,tag:W,props:{alt:ck,src:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2018\u002F6\u002F28\u002F16444edd6d16eb1c~tplv-t2oaga2asx-image.image"},children:[]}]},{type:a,tag:g,props:{},children:[{type:c,value:"这里可以看到就算我设置 scale 不等于 1 \u002F drp 的大小也不妨碍我按设计图的比例画出元素\n这里要注意两点,因为我是用 chrome 模拟的,设置的时候发现几个问题"}]},{type:a,tag:"ol",props:{},children:[{type:a,tag:aV,props:{},children:[{type:c,value:"scale 的值如果小于 0.1 布局视口也只能放大 10 倍,也就是布局视口最多放大 10 倍"}]},{type:a,tag:aV,props:{},children:[{type:c,value:"当 scale 的值大于 1 时布局视口并不会缩小,而且布局视口不再匹配设备宽度,这种情况实际不会出现。"}]},{type:a,tag:aV,props:{},children:[{type:c,value:"如果你引入了 flexible.js 进行测试,要注意删除边界条件,因为缩放影响了布局视口大小,相应的边界条件会触发,导致误认为 dpr 与自适应有关"}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"要做到自适应关键是让元素的尺寸与布局视口绑定关系,在这里虽然布局视口放大了,但并不影响这种绑定关系,这里淘宝方案把布局视口的宽度分割了十等份,每份的大小相当于布局宽度的十分之一,而把每份的大小分配给根元素的字体大小,元素尺寸就可以设置 rem 单位来与布局视口绑定关系,以 200px 尺寸为例,他们比例映射是这样的"}]},{type:a,tag:g,props:{},children:[{type:c,value:"200px : 640px =\u003E xrem : 10rem"}]},{type:a,tag:g,props:{},children:[{type:c,value:"这里的 10rem 就是布局视口宽度,元素尺寸只要维持这个比例关系就行了,与 dpr 是没有关系的"}]},{type:a,tag:g,props:{},children:[{type:c,value:"x= 10 * 200 \u002F 640 = 3.125rem"}]},{type:a,tag:g,props:{},children:[{type:c,value:"这里的计算可能会费一点时间,也有一些插件可以辅助把 px 转为 rem 的\n但是方案是死的,人是活的,你只要把淘宝固有的十等分改一下就行了,比如设计稿是 640px 的\n改一下"}]},{type:a,tag:m,props:{code:"document.documentElement.style.fontSize = deviceWidth \u002F 6.4 + 'px';\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:O}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aq}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:T}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:aW}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ar}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:as}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:at}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"分了 6.4 等份"}]},{type:a,tag:g,props:{},children:[{type:c,value:cl}]},{type:a,tag:g,props:{},children:[{type:c,value:"x 一看就知道是 2rem"}]},{type:a,tag:g,props:{},children:[{type:c,value:"流程： rem =\u003E 根元素字体大小 =\u003E 布局视口"}]},{type:a,tag:g,props:{},children:[{type:c,value:"当然也可以分割为 100 等份,这样方便为以后使用 vw 单位进行过渡"}]},{type:a,tag:g,props:{},children:[{type:c,value:"那么为什么淘宝要引入 dpr,把布局放大再缩小呢,其中一点就是这个方案可以很好地解决 1px 边框的问题,对于高清屏来说设置 1px 像素大小,其实横跨的是 dpr 个设备像素,这样看起来线条不够细,与设计稿就产生出入,而通过布局放大再缩小的方案刚好就弥补了这个问题。但是随之而来也带来一个问题,看上面的截图我们看到字体大小发生了改变,在 scale 设置为 0.1 时基本就看不见了,原因是一般我们的字体大小的设置不会使用 rem,而是使用 px 单位,这里的字体大小没有随布局视口的放大而增大,却随页面的整体缩放而缩小了,这里就得要针对不同的 dpr 做响应的处理,在淘宝的代码中我们可以看到"}]},{type:a,tag:m,props:{code:"docEl.setAttribute('data-dpr', dpr);\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:e},children:[{type:c,value:"docEl"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"'data-dpr'"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:am}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aU}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"就是通过在根元素上挂载 dpr 信息,然后设置相应的 css 属性例如"}]},{type:a,tag:m,props:{code:"[data-dpr='2'] div {\n  font-size: 32px;\n}\n[data-dpr='3'] div {\n  font-size: 48px;\n}\n",language:"css",meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cm}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cn}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"'2'"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:co}]},{type:a,tag:b,props:{class:X},children:[{type:c,value:ad}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:P}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cp}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:Q}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:"32px"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cq}]}]},{type:a,tag:b,props:{class:f,line:K},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cm}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cn}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"'3'"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:co}]},{type:a,tag:b,props:{class:X},children:[{type:c,value:ad}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:P}]}]},{type:a,tag:b,props:{class:f,line:U},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cp}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:Q}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:"48px"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:aa},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"}"}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"特别对于安卓手机,各种神奇的 dpr,如果每个都这样设置将会是灾难\n所以淘宝非常聪明"}]},{type:a,tag:m,props:{code:"var isAndroid = win.navigator.appVersion.match(\u002Fandroid\u002Fgi);\nvar isIPhone = win.navigator.appVersion.match(\u002Fiphone\u002Fgi);\nvar devicePixelRatio = win.devicePixelRatio;\nif (isIPhone) {\n  \u002F\u002F iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n  if (devicePixelRatio \u003E= 3 && (!dpr || dpr \u003E= 3)) {\n    dpr = 3;\n  } else if (devicePixelRatio \u003E= 2 && (!dpr || dpr \u003E= 2)) {\n    dpr = 2;\n  } else {\n    dpr = 1;\n  }\n} else {\n  \u002F\u002F 其他设备下，仍旧使用1倍的方案\n  dpr = 1;\n}\nscale = 1 \u002F dpr;\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"isAndroid"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aX}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cr}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cs}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:ct}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:cu},children:[{type:c,value:"\u002Fandroid\u002F"}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cv}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cw}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aX}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cr}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cs}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:ct}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:cu},children:[{type:c,value:"\u002Fiphone\u002F"}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cv}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:M}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:R}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aX}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:R}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:K},children:[{type:a,tag:b,props:{class:Y},children:[{type:c,value:aY}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cw}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:") {\n"}]}]},{type:a,tag:b,props:{class:f,line:U},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:aQ},children:[{type:c,value:"\u002F\u002F iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n"}]}]},{type:a,tag:b,props:{class:f,line:aa},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:Y},children:[{type:c,value:aY}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:R}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:au}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:a_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cx}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cy}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:au}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:a_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cz}]}]},{type:a,tag:b,props:{class:f,line:an},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:a_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:ao},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cA}]},{type:a,tag:b,props:{class:Y},children:[{type:c,value:a$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:Y},children:[{type:c,value:aY}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:aZ}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:R}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:au}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:ba}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cx}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cy}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:au}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:ba}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:cz}]}]},{type:a,tag:b,props:{class:f,line:ap},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:ba}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:aJ},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cA}]},{type:a,tag:b,props:{class:Y},children:[{type:c,value:a$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:P}]}]},{type:a,tag:b,props:{class:f,line:aK},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:al}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:aL},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aT}]}]},{type:a,tag:b,props:{class:f,line:aM},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"} "}]},{type:a,tag:b,props:{class:Y},children:[{type:c,value:a$}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:P}]}]},{type:a,tag:b,props:{class:f,line:aN},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:aQ},children:[{type:c,value:"\u002F\u002F 其他设备下，仍旧使用1倍的方案\n"}]}]},{type:a,tag:b,props:{class:f,line:aO},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:al}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:aP},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:cq}]}]},{type:a,tag:b,props:{class:f,line:aR},children:[{type:a,tag:b,props:{class:e},children:[{type:c,value:S}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:al}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:T}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:at}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"够简单直接,安卓高清屏是不存在的, 但是其实影响也不大,就是安卓屏的 1px 线条粗一点而已"}]},{type:a,tag:g,props:{},children:[{type:c,value:"如果除了要做自适应还要做响应式,那也得像上面设置字体一样一个一个设置,因为 css 媒体查询也是针对布局视口尺寸的。对于淘宝他们来说,肯定有一套工程化的方案来解决这种技术难题,对于遇到这个坑的伙伴估计得自已想办法了,预处理器是必不可少的。\n从前面可以知道淘宝引入 dpr 并不是为了做自适应的,而是为了解决 1px 问题的,当然也引入了其他难题,既然如此,放弃解决 1px 问题,不就简单得多,网易方案就是这么做的。"}]},{type:a,tag:L,props:{id:cB},children:[{type:c,value:cC}]},{type:a,tag:g,props:{},children:[{type:c,value:"去除了边界处理和兼容处理，由于没有动态设置 meta 所以要在 head 中引入"}]},{type:a,tag:m,props:{code:"\u003Cmeta\n  name=\"viewport\"\n  content=\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\"\n\u002F\u003E\n",language:Z,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:"meta\n"}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:bb}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"viewport\"\n"}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ae}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\"\n"}]}]},{type:a,tag:b,props:{class:f,line:K},children:[{type:a,tag:b,props:{class:j},children:[{type:c,value:"\u002F\u003E"}]}]}]}]}]},{type:a,tag:m,props:{code:"(function () {\n  var dpr = window.devicePixelRatio;\n  function resize() {\n    var deviceWidth = document.documentElement.clientWidth;\n    document.documentElement.style.fontSize = deviceWidth \u002F 6.4 + 'px';\n  }\n  resize();\n  window.onresize = resize;\n})();\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:y}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:aj}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bY}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:A}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ak}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:R}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:aj}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:V}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:b$}]}]},{type:a,tag:b,props:{class:f,line:K},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aS}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:U},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:O}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aq}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ac}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:T}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:aW}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ar}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:as}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:aa},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:aT}]}]},{type:a,tag:b,props:{class:f,line:an},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:v},children:[{type:c,value:V}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ce}]}]},{type:a,tag:b,props:{class:f,line:ao},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ak}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cg}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:V}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:ap},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:ci}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"网易方案没有引入 dpr 相关的,这也说明了移动端自适应与 dpr 是无关的"}]},{type:a,tag:g,props:{},children:[{type:a,tag:W,props:{alt:"0.6",src:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2018\u002F6\u002F28\u002F16444f837fa7be33~tplv-t2oaga2asx-image.image"},children:[]}]},{type:a,tag:g,props:{},children:[{type:c,value:"从图片中可以看出和淘宝方案的区别,布局视口没有放大,整个页面也没有缩放,但是并不影响与设计图的比例"}]},{type:a,tag:g,props:{},children:[{type:c,value:cl}]},{type:a,tag:g,props:{},children:[{type:c,value:"x= 2rem"}]},{type:a,tag:g,props:{},children:[{type:c,value:"流程: rem =\u003E 根元素的大小 =\u003E 布局视口"}]},{type:a,tag:g,props:{},children:[{type:c,value:"既然自适应与 dpr 无关那么就可以扩展出很多方案了"}]},{type:a,tag:L,props:{id:cD},children:[{type:c,value:cE}]},{type:a,tag:g,props:{},children:[{type:c,value:"1.在布局视口等于设备宽度时,直接把根元素字体大小绑定到设备宽度大小上"}]},{type:a,tag:m,props:{code:"document.documentElement.style.fontSize = screen.width \u002F 6.4 + 'px';\n",language:G,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:e},children:[{type:c,value:E}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:N}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:O}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:aq}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:o}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"screen"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:i}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:T}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:aW}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:ar}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:as}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:at}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"这里有关相关的文章 "},{type:a,tag:aD,props:{href:"https:\u002F\u002Fwww.zhangxinxu.com\u002Fwordpress\u002F2016\u002F06\u002Fpseudo-response-layout-base-on-screen-width\u002F",rel:[aE]},children:[{type:c,value:"基于 screen.width 的伪响应式开发"}]}]},{type:a,tag:g,props:{},children:[{type:c,value:"2.直接定死布局视口"}]},{type:a,tag:m,props:{code:"\u003C!DOCTYPE html\u003E\n\u003Chtml lang=\"zh-CN\"\u003E\n  \u003Chead\u003E\n    \u003Cmeta charset=\"UTF-8\" \u002F\u003E\n    \u003Cmeta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" \u002F\u003E\n    \u003Cmeta name=\"viewport\" content=\"width=640, user-scalable=no\" \u002F\u003E\n    \u002F\u002F定死为设计稿的尺寸\n    \u003Cmeta name=\"renderer\" content=\"webkit\" \u002F\u003E\n    \u003Ctitle\u003E定死布局视口\u003C\u002Ftitle\u003E\n    \u003Cstyle\u003E\n      html,\n      body {\n        margin: 0;\n      }\n      div {\n        width: 200px;\n        height: 200px;\n        background: red;\n      }\n\n      body {\n        background: blue;\n      }\n    \u003C\u002Fstyle\u003E\n    \u003Cscript\u003E\u003C\u002Fscript\u003E\n  \u003C\u002Fhead\u003E\n  \u003Cbody\u003E\n    \u003Cdiv id=\"size200px\"\u003E元素大小200px\u003C\u002Fdiv\u003E\n  \u003C\u002Fbody\u003E\n\u003C\u002Fhtml\u003E\n",language:Z,meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{class:j},children:[{type:c,value:"\u003C!"}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:"DOCTYPE"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"lang"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"zh-CN\""}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cG}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:K},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"charset"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"UTF-8\""}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]}]},{type:a,tag:b,props:{class:f,line:U},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"http-equiv"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"X-UA-Compatible\""}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ae}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"ie=edge\""}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]}]},{type:a,tag:b,props:{class:f,line:aa},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:bb}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"viewport\""}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ae}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"width=640, user-scalable=no\""}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]}]},{type:a,tag:b,props:{class:f,line:an},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:"    \u002F\u002F定死为设计稿的尺寸\n"}]}]},{type:a,tag:b,props:{class:f,line:ao},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:C}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:bb}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"renderer\""}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:ae}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"webkit\""}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:av}]}]},{type:a,tag:b,props:{class:f,line:ap},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cH}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:bc}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"定死布局视口"}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:_}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cH}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:aJ},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:O}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:aK},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:X},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:bZ}]}]},{type:a,tag:b,props:{class:f,line:aL},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:X},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:P}]}]},{type:a,tag:b,props:{class:f,line:aM},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:af}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"margin"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:Q}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:b_}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:aN},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bd}]}]},{type:a,tag:b,props:{class:f,line:aO},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:X},children:[{type:c,value:ad}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:P}]}]},{type:a,tag:b,props:{class:f,line:aP},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:af}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cF}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:Q}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:cI}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:aR},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:af}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"height"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:Q}]},{type:a,tag:b,props:{class:q},children:[{type:c,value:cI}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:ca},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:af}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cJ}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:Q}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"red"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:cb},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bd}]}]},{type:a,tag:b,props:{class:f,line:cc},children:[{type:a,tag:b,props:{},children:[{type:c,value:be}]}]},{type:a,tag:b,props:{class:f,line:cd},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:I}]},{type:a,tag:b,props:{class:X},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:P}]}]},{type:a,tag:b,props:{class:f,line:cf},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:af}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:cJ}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:Q}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"blue"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:p}]}]},{type:a,tag:b,props:{class:f,line:ch},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:bd}]}]},{type:a,tag:b,props:{class:f,line:24},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:_}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:O}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:25},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cK}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:"\u003E\u003C\u002F"}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cK}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:26},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:_}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:cG}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:27},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:28},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:t}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:D}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:ad}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:l}]},{type:a,tag:b,props:{class:e},children:[{type:c,value:"id"}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:B}]},{type:a,tag:b,props:{class:k},children:[{type:c,value:"\"size200px\""}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:bc}]},{type:a,tag:b,props:{class:d},children:[{type:c,value:"元素大小200px"}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:_}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:ad}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:29},children:[{type:a,tag:b,props:{class:d},children:[{type:c,value:n}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:_}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:aw}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:F}]}]},{type:a,tag:b,props:{class:f,line:30},children:[{type:a,tag:b,props:{class:j},children:[{type:c,value:_}]},{type:a,tag:b,props:{class:h},children:[{type:c,value:Z}]},{type:a,tag:b,props:{class:j},children:[{type:c,value:bc}]}]}]}]}]},{type:a,tag:g,props:{},children:[{type:a,tag:W,props:{alt:"0.001",src:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2018\u002F6\u002F28\u002F16444fac35b57970~tplv-t2oaga2asx-image.image"},children:[]}]},{type:a,tag:g,props:{},children:[{type:c,value:"不用 rem 单位,不用设置 js,但是布局视口定死后,就不能用 css 媒体查询做响应式了,从这里也可以看出 viewport 属性的作用,就是让布局视口通过缩放来适配屏幕宽度,width=device.width 仅仅是让布局视口初始大小等于设备宽度,后面设置的 initial-scale 是用来缩放布局视口大小,而且默认是布局视口初始大小等于设备宽度,也就是所谓的理想视口,换个说法就是如果你设置了 initial-scale 你可以不用设置 width=device.width 了,淘宝方案你把 width=device.width 去掉,并不会影响自适应过程,加上主要是防止一些不按规范的浏览器出现兼容问题。如果还不能理解 viewport 的作用,那么可以参考 svg 中的 viewport 和 viewBox 的关系，原理是一样的。"}]},{type:a,tag:g,props:{},children:[{type:c,value:"3.使用新出单位 vw, vw 就是专门为自适应而出现的,100vw 就是布局视口的宽度,非常厉害,你也不用设置 js 了"}]},{type:a,tag:g,props:{},children:[{type:c,value:"200px: 640px =\u003E xvw : 100vw"}]},{type:a,tag:g,props:{},children:[{type:c,value:"x=200 * 100 \u002F 640 = 31.25vw"}]},{type:a,tag:g,props:{},children:[{type:c,value:"流程: vw =\u003E 布局视口"}]},{type:a,tag:g,props:{},children:[{type:c,value:"看一下兼容性"}]},{type:a,tag:g,props:{},children:[{type:a,tag:W,props:{alt:r,src:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2018\u002F6\u002F28\u002F16444fc469953bd0~tplv-t2oaga2asx-image.image"},children:[]}]},{type:a,tag:g,props:{},children:[{type:c,value:"兼容还可以,这里也有相关的资料"},{type:a,tag:aD,props:{href:"https:\u002F\u002Fwww.w3cplus.com\u002Fcss\u002Ftaobao-2018-year.html",rel:[aE]},children:[{type:c,value:" 分享手淘过年项目中采用到的前端技术"}]}]},{type:a,tag:L,props:{id:ax},children:[{type:c,value:ax}]},{type:a,tag:g,props:{},children:[{type:c,value:"移动端尺寸自适应与 dpr 无关,除了淘宝方案外,其他方案都得处理 1px 的问题,但也减少针对不同 dpr 设备做响应式处理的麻烦,而且其中也没有一种一劳永逸的方案能解决全部问题。而作为新出来的单位 vw,是时候该入坑了"}]},{type:a,tag:L,props:{id:ay},children:[{type:c,value:ay}]},{type:a,tag:m,props:{code:"1. 张鑫旭 [基于 screen.width 的伪响应式开发](https:\u002F\u002Fwww.zhangxinxu.com\u002Fwordpress\u002F2016\u002F06\u002Fpseudo-response-layout-base-on-screen-width\u002F)\n\n2. 大漠 [分享手淘过年项目中采用到的前端技术](https:\u002F\u002Fwww.w3cplus.com\u002Fcss\u002Ftaobao-2018-year.html)\n\n3. [fleible](https:\u002F\u002Fgithub.com\u002Fhuainanhai\u002Fflexible\u002Fblob\u002Fmaster\u002Fpublic\u002Fjs\u002Fframe\u002Fflexible.debug.js)\n",meta:u},children:[{type:a,tag:x,props:{},children:[{type:a,tag:m,props:{__ignoreMap:r},children:[{type:a,tag:b,props:{class:f,line:w},children:[{type:a,tag:b,props:{},children:[{type:c,value:"1. 张鑫旭 [基于 screen.width 的伪响应式开发](https:\u002F\u002Fwww.zhangxinxu.com\u002Fwordpress\u002F2016\u002F06\u002Fpseudo-response-layout-base-on-screen-width\u002F)\n"}]}]},{type:a,tag:b,props:{class:f,line:s},children:[{type:a,tag:b,props:{},children:[{type:c,value:be}]}]},{type:a,tag:b,props:{class:f,line:H},children:[{type:a,tag:b,props:{},children:[{type:c,value:"2. 大漠 [分享手淘过年项目中采用到的前端技术](https:\u002F\u002Fwww.w3cplus.com\u002Fcss\u002Ftaobao-2018-year.html)\n"}]}]},{type:a,tag:b,props:{class:f,line:K},children:[{type:a,tag:b,props:{},children:[{type:c,value:be}]}]},{type:a,tag:b,props:{class:f,line:U},children:[{type:a,tag:b,props:{},children:[{type:c,value:"3. [fleible](https:\u002F\u002Fgithub.com\u002Fhuainanhai\u002Fflexible\u002Fblob\u002Fmaster\u002Fpublic\u002Fjs\u002Fframe\u002Fflexible.debug.js)"}]}]}]}]}]},{type:a,tag:O,children:[{type:c,value:".ct-c7c99a{color:#808080}\n.ct-964974{color:#C586C0}\n.ct-739324{color:#D16969}\n.ct-cb53b4{color:#D7BA7D}\n.ct-9c92a2{color:#6A9955}\n.ct-3924bb{color:#B5CEA8}\n.ct-f38d04{color:#CE9178}\n.ct-5a8524{color:#DCDCAA}\n.ct-d22c67{color:#9CDCFE}\n.ct-d656d1{color:#569CD6}\n.ct-ddf197{color:#D4D4D4}"}]}],toc:{title:r,searchDepth:s,depth:s,links:[{id:ai,depth:s,text:ai},{id:bU,depth:s,text:bV},{id:bW,depth:s,text:bX},{id:cB,depth:s,text:cC},{id:cD,depth:s,text:cE},{id:ax,depth:s,text:ax},{id:ay,depth:s,text:ay}]}},_type:aB,_id:"content:articles:mobile:SelfAdaptiveAndDPR.md",_source:ae,_file:"articles\u002Fmobile\u002FSelfAdaptiveAndDPR.md",_extension:"md"}},state:{},_errors:{"search-navigation":u,"content-navigation-8C37fagqQL":u,"content-query-3Vt2u4kWb1":u},serverRendered:true,prerenderedAt:1691586503041,config:{public:{content:{locales:[aC],defaultLocale:aC,integrity:1691586235139,experimental:{stripQueryParameters:J,clientDB:J,advancedIgnoresPattern:J},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"dark-plus"},wsUrl:r,documentDriven:J,host:r,trailingSlash:J,anchorLinks:{depth:K,exclude:[w]}}},app:{baseURL:"\u002Fblog\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:r}}}}("element","span","text","ct-ddf197","ct-d22c67","line","p","ct-d656d1",".","ct-c7c99a","ct-f38d04"," ","code","  "," = ",";\n","ct-3924bb","",2,"    ",null,"ct-5a8524",1,"pre","(","var","dpr","=","meta","\u003C","document","\u003E\n","js",3,"      ",false,4,"h2",");\n","documentElement","style"," {\n",": ","devicePixelRatio","scale"," \u002F ",5,"resize","img","ct-cb53b4","ct-964974","html","\u003C\u002F","setAttribute",6," +\n","deviceWidth","div","content","        ","安装","使用说明","前言","function","window","1",", ",7,8,9,"fontSize"," + ","'px'",";"," \u003E= ","\u002F\u003E\n","body","总结","参考文章","真的，移动端尺寸自适应与 dpr 无关","\u002Farticles\u002Fmobile\u002Fselfadaptiveanddpr","markdown","zh-Hans","a","nofollow","createElement","'meta'","'name'","'viewport'",10,11,12,13,14,15,16,"ct-9c92a2",17,"clientWidth","  }\n",");","li","6.4","win","if"," (","3","else","2","name","\u003E","      }\n","\n","文章","\u002Farticles","Css","\u002Farticles\u002Fcss","BFC,层叠上下文,级联层","\u002Farticles\u002Fcss\u002Fbfcstackcascading","css 各种居中方法总结","\u002Farticles\u002Fcss\u002Fcsscenter","纯 css 实现数字自增的动画效果","\u002Farticles\u002Fcss\u002Fcsspropertyatrule","JavaScript","\u002Farticles\u002Fjavascript","async\u002Fawait 异步应用的常用场景","\u002Farticles\u002Fjavascript\u002Fasyncawaitscene","柯里化在异步编程的应用","\u002Farticles\u002Fjavascript\u002Fcurryandasync","js 浮点数存储精度丢失原理","\u002Farticles\u002Fjavascript\u002Ffloatingpointlossprecision","es6 深入理解 Proxy 和 Reflect 这对影子兄弟","\u002Farticles\u002Fjavascript\u002Fproxyandreflect","移动端","\u002Farticles\u002Fmobile","浏览器插件","\u002Fbrowser_plugins","修改网页信息","\u002Fbrowser_plugins\u002Fmodifyingwebdata","\u002Fbrowser_plugins\u002Fmodifyingwebdata\u002Finstall","\u002Fbrowser_plugins\u002Fmodifyingwebdata\u002Freadme","通用文字识别","\u002Fbrowser_plugins\u002Funiversaltextrecognition","\u002Fbrowser_plugins\u002Funiversaltextrecognition\u002Finstall","\u002Fbrowser_plugins\u002Funiversaltextrecognition\u002Freadme","首页","\u002F","\u002Ftest","工具","\u002Ftools","抖音评论爬取","\u002Ftools\u002Fdouyin","unicode 字符查询","\u002Ftools\u002Funicodesearch","_1-什么是尺寸自适应","1. 什么是尺寸自适应","_2-淘宝方案","2. 淘宝方案"," () {\n",",\n","0","() {\n",18,19,20,21,"();\n",22,"onresize",23,"})();","0.1","0.5","200px : 640px =\u003E xrem : 6.4rem","[","data-dpr","] ","font-size","}\n","navigator","appVersion","match","ct-739324","gi","isIPhone"," && (!"," || ",")) {\n","  } ","_3网易方案","3.网易方案","_4-其他方案","4. 其他方案","width","head","title","200px","background","script"))</script><script type="module" src="/blog/_nuxt/entry.141f5eb8.js" crossorigin></script></body>
</html>